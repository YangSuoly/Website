<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/blog-logo-32px.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/blog-logo-16px.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <link rel="manifest" href="/images/manifest.json">
  <meta name="msapplication-config" content="/images/browserconfig.xml">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yangsuoly.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":true},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":true,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="1. Introduction  本笔记是 DataWhale 第 33 期 Fantastic-Matplotlib 项目的学习笔记。原项目地址：Clike here。本博客提供笔记所使用的数据：  Download Now">
<meta property="og:type" content="article">
<meta property="og:title" content="Fantastic-Matplotlib">
<meta property="og:url" content="http://yangsuoly.com/2022/01/11/Fantastic-Matplotlib/index.html">
<meta property="og:site_name" content="独孤诗人的学习驿站">
<meta property="og:description" content="1. Introduction  本笔记是 DataWhale 第 33 期 Fantastic-Matplotlib 项目的学习笔记。原项目地址：Clike here。本博客提供笔记所使用的数据：  Download Now">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://matplotlib.org/_static/logo2_compressed.svg">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7M65ZR.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/11/7e5PfK.md.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7MhdfI.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7MhdfI.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7Mh36K.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7M6Id1.md.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7M6Id1.md.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7M67i6.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7M6oIx.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7M6fsJ.md.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7MhEOU.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7Mhhpq.md.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7McJm9.md.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7Mc8OJ.md.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7Mc3y4.md.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7Mc1lF.md.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7MclSU.md.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7McMWT.md.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7McKYV.md.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7McuF0.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7Mcewn.md.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7Mcmoq.md.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7McELj.md.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7McZes.md.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7McAyQ.md.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7MckQg.md.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7McFSS.md.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7McPW8.md.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7McCJf.md.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7McSot.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7Mc9FP.md.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7M6zdI.md.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210523162430365.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7M6xeA.md.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20201126105910781.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20201126105910780.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7M6XsH.md.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7M6OQe.md.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7M6jLd.md.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/13/7M6qzD.md.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/714z1s.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/714xpj.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/714jhQ.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/714Xtg.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/714OAS.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/714q78.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/714b0f.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/714HnP.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/714TXt.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/714o6I.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/714fte.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/714I1A.md.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/714hfH.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/7145pd.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/714WkD.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/715QHK.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/715MB6.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/73ij5F.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/73iXUU.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/73iOET.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/715Knx.md.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/715nj1.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/73iqbV.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/73ibD0.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/715mcR.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/715e39.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/715Z9J.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/715Eh4.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/715ANF.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/715kAU.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/715i7T.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/715PBV.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/73FpvR.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/73ixC4.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/73ixC4.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/715Cn0.md.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/715Cn0.md.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/715pXq.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/715Scn.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/73Fib6.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/73FPDx.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/73FCK1.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/73FS29.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/73iI3j.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/73iTvn.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/73ifUS.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/73ih4g.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/73iI3j.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/73iogs.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/73i5CQ.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/73FKKI.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/73FnxA.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/73Fm2d.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/73Fe8H.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/73FAUO.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/73FE5D.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/73FZPe.png">
<meta property="og:image" content="https://s4.ax1x.com/2022/01/14/73FkVK.png">
<meta property="article:published_time" content="2022-01-11T08:31:57.000Z">
<meta property="article:modified_time" content="2022-01-14T10:43:07.808Z">
<meta property="article:author" content="YangSu">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="Data analysis">
<meta property="article:tag" content="Matplotlib">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://matplotlib.org/_static/logo2_compressed.svg">

<link rel="canonical" href="http://yangsuoly.com/2022/01/11/Fantastic-Matplotlib/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>Fantastic-Matplotlib | 独孤诗人的学习驿站</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?f59f5fb59d32ec3903088b0f976956d1";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>
<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta custom-logo">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">独孤诗人的学习驿站</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">生活就是一半烟火，一半诗意。手执烟火谋生活，心怀诗意谋未来……</p>
      <a>
        <img class="custom-logo-image" src="/images/logo@2x.png" alt="独孤诗人的学习驿站">
      </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/Tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/Categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/YangSuoly" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yangsuoly.com/2022/01/11/Fantastic-Matplotlib/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/YangSu.jpg">
      <meta itemprop="name" content="YangSu">
      <meta itemprop="description" content="A blog for recording learning notes...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="独孤诗人的学习驿站">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Fantastic-Matplotlib
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-01-11 16:31:57" itemprop="dateCreated datePublished" datetime="2022-01-11T16:31:57+08:00">2022-01-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-01-14 18:43:07" itemprop="dateModified" datetime="2022-01-14T18:43:07+08:00">2022-01-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/Categories/DataWhale/" itemprop="url" rel="index"><span itemprop="name">DataWhale</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/Categories/DataWhale/Matplotlib/" itemprop="url" rel="index"><span itemprop="name">Matplotlib</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span id="busuanzi_value_page_pv"></span>
            </span><br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>62k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>56 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="1-introduction"><a class="markdownIt-Anchor" href="#1-introduction"></a> 1. Introduction</h1>
<p><img src="https://matplotlib.org/_static/logo2_compressed.svg" alt="" /></p>
<p>本笔记是 <code>DataWhale</code> 第 <code>33</code> 期 <code>Fantastic-Matplotlib</code> 项目的学习笔记。原项目地址：<a target="_blank" rel="noopener" href="https://github.com/datawhalechina/fantastic-matplotlib">Clike here</a>。本博客提供笔记所使用的数据：</p>
<p><a id="download" href="https://www.aliyundrive.com/s/5ny6LPYdyiu" target="_blank"><i class="fa fa-download"></i><span> Download Now </span> </a></p>
<a id="more"></a>
<p><code>Matplotlib</code> 是 <code>python</code> 数据可视化最重要且常见的工具之一，和数据打交道的过程中几乎都不可避免要用到，此外也有大量的可视化工具是基于 <code>matplotlib</code> 做的二次开发。它是一个 <code>Python 2D</code> 绘图库，能够以多种硬拷贝格式和跨平台的交互式环境生成出版物质量的图形，用来绘制各种静态，动态，交互式的图表。</p>
<p>通常，在用 <code>python</code> 做数据可视化时面临两大痛点:</p>
<ul>
<li>没有系统梳理 <code>matplotlib</code> 的绘图接口，常常是现用现查，用过即忘，效率极低；</li>
<li>没有深入理解 <code>matplotlib</code> 的设计框架，往往是只会复制粘贴，不知其所以然，面对复杂图表时一筹莫展；</li>
</ul>
<p>基于此，本项目将从 <a target="_blank" rel="noopener" href="https://matplotlib.org/">官方文档</a> 出发，系统的阐述 <code>Matplotlib</code> 的常见用法。</p>
<h1 id="2-begin-with-a-simple-case"><a class="markdownIt-Anchor" href="#2-begin-with-a-simple-case"></a> 2. Begin with a simple case</h1>
<h2 id="21-create-figure"><a class="markdownIt-Anchor" href="#21-create-figure"></a> 2.1 Create figure</h2>
<p><code>Matplotlib</code> 的图像是画在 <code>figure</code> （如 <code>windows</code>， <code>jupyter</code> 窗体）上的，每一个 <code>figure</code> 又包含了一个或多个 <code>axes</code>（一个可以制定坐标系的子区间）。最贱的创建 <code>figure</code> 以及 <code>axes</code> 的方式是通过 <code>pyplot.subplots</code> 命令，之后可以使用 <code>Axes.plot</code> 绘制最简易的折线图。</p>
<ul>
<li>
<p>Import module</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> matplotlib <span class="keyword">as</span> mpl</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br></pre></td></tr></table></figure>
<p><strong>Note</strong>: 有时，当我们在 <code>matplotlib</code> 中使用中文时，我们会发现乱码或者无法正常显示的情况，这是因为默认的字体不支持中文字体，可以在导入模块之后使用下述代码来自定义中文字体。</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pyplt <span class="keyword">import</span> mpl</span><br><span class="line">mpl.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line">mpl.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Plot</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fig, ax = plt.subplots()</span><br><span class="line">ax.plot([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], [<span class="number">1</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/13/7M65ZR.png' style='zoom:80%' />
</li>
<li>
<p>Components</p>
<p>创建了 <code>figure</code> 之后，我们来深入理解一下一张 <code>figure</code> 的组成。通过一张 <code>figure</code> 的解剖图，我们可以看到一个完整的 <code>matplotlib</code> 图像通常会包括四个层级，这些层级也被称为容器 <code>container</code>，下一章会对其进行详细介绍。在了解了容器之后，我们可以通过各种命令方式来操作图像中的每个部分，从而达到自定义数据可视化的效果。</p>
<ul>
<li><code>Figure</code>：顶层级，用来容纳所有绘图元素；</li>
<li><code>Axes</code>：<code>Matplotlib</code> 宇宙的核心，容纳了大量元素；用来构造一幅幅子图，一个 <code>figure</code> 可以由一个或多个子图组成；</li>
<li><code>Axis</code>：<code>Axes</code> 的下属层级，用于处理所有与纵坐标、网格有关的元素；</li>
<li><code>Tick</code>：<code>Axis</code> 的下属层级，用来处理所有和刻度有关的元素。</li>
</ul>
  <img src='https://s4.ax1x.com/2022/01/11/7e5PfK.md.png' style='zoom:80%' />
</li>
</ul>
<h2 id="22-interfaces"><a class="markdownIt-Anchor" href="#22-interfaces"></a> 2.2 Interfaces</h2>
<p><code>Matplotlib</code> 提供了两种最常用的绘图接口，面向对象编程绘图和函数式绘图。面向对象 （Object-oriented, <code>OO</code>）绘图更加灵活，现实中，在添加文本注释时，常使用 <code>OO</code>，在 <code>Axes</code> 找到对应的位置，直接添加文字，在考虑多张表不规则排放在一张图中时，尤其时嵌套等情况，也会使用 <code>Axes</code> 来规定位置。但是，函数式绘图更加方便与快速，两者结合都掌握才能更好地画出想要的图。</p>
<p><strong>Reference</strong>: <a target="_blank" rel="noopener" href="https://blog.csdn.net/Mart_inn/article/details/122352935">Matplotlib入门(一)</a></p>
<h3 id="221-面向对象编程绘图"><a class="markdownIt-Anchor" href="#221-面向对象编程绘图"></a> 2.2.1 面向对象编程绘图</h3>
<p>面向对象 （Object-oriented, <code>OO</code>）绘图灵活，当我们要更改坐标轴相关属性时会倾向于使用面向对象编程绘图，如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">x = np.linspace(<span class="number">0</span>, <span class="number">2</span>, <span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">fig, ax = plt.subplots()  </span><br><span class="line">ax.plot(x, x, label=<span class="string">&#x27;linear&#x27;</span>)  </span><br><span class="line">ax.plot(x, x**<span class="number">2</span>, label=<span class="string">&#x27;quadratic&#x27;</span>)  </span><br><span class="line">ax.plot(x, x**<span class="number">3</span>, label=<span class="string">&#x27;cubic&#x27;</span>)  </span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;x label&#x27;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&#x27;y label&#x27;</span>)</span><br><span class="line">ax.set_title(<span class="string">&quot;Simple Plot&quot;</span>)  </span><br><span class="line">ax.legend()</span><br></pre></td></tr></table></figure>
<p>Results:</p>
<img src='https://s4.ax1x.com/2022/01/13/7MhdfI.png' style='zoom:80%' />
<h3 id="222-函数式绘图"><a class="markdownIt-Anchor" href="#222-函数式绘图"></a> 2.2.2 函数式绘图</h3>
<p>函数式绘图则相对而言更便捷：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">x = np.linspace(<span class="number">0</span>, <span class="number">2</span>, <span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">plt.plot(x, x, label=<span class="string">&#x27;linear&#x27;</span>)</span><br><span class="line">plt.plot(x, x**<span class="number">2</span>, label=<span class="string">&#x27;quadratic&#x27;</span>)  </span><br><span class="line">plt.plot(x, x**<span class="number">3</span>, label=<span class="string">&#x27;cubic&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;x label&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;y label&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&quot;Simple Plot&quot;</span>)</span><br><span class="line">plt.legend()</span><br></pre></td></tr></table></figure>
<p>Results:</p>
<img src='https://s4.ax1x.com/2022/01/13/7MhdfI.png' style='zoom:80%' />
<h2 id="23-general-plot-template"><a class="markdownIt-Anchor" href="#23-general-plot-template"></a> 2.3 General plot template</h2>
<p>由于 <code>Matplotlib</code> 绘图的知识十分庞杂，在实际使用过程中，不可能将全部的 <code>API</code> 都记住。大部分时候都是边用边查。因此若想精通 <code>Matplotlib</code> 绘图的话，建议养成记笔记的良好习惯，每次绘图时都可以从自己的笔记库中摘抄相应的功能，类似于本人的博客：<a target="_blank" rel="noopener" href="https://www.yangsuoly.com/2020/11/30/Matplotlib/">Matplotlib</a>。由于里面记录许多图表类型，因此可以基本满足日常绘图的需求。</p>
<p>此处，就绘图的步骤提供一个通用绘图模板，初学者刚开始学习时只需要牢记这一模板就足以应对大部分简单图表的绘制，在学习过程中可以将这个模板模块化，了解每个模块在做什么，在绘制复杂图表时如何修改，填充对应的模块。</p>
<ul>
<li>
<p>Steps:</p>
<ol>
<li>
<p>Prepare data</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x = np.linspace(<span class="number">0</span>, <span class="number">2</span>, <span class="number">100</span>) <span class="comment"># Create 100 numbers</span></span><br><span class="line">y = x ** <span class="number">2</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Style set</p>
<p>设置绘图样式，这一模块的扩展参考第六章进一步学习，这一步不是必须的，样式也可以在绘制图像是进行设置。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mpl.rc(<span class="string">&#x27;lines&#x27;</span>, linewidth=<span class="number">4</span>, linestyle=<span class="string">&#x27;-.&#x27;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Define layout</p>
<p>定义布局， 这一模块的扩展参考第三章进一步学习</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fig, ax = plt.subplots()  </span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Plot</p>
<p>绘制图像， 这一模块的扩展参考第二章进一步学习</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ax.plot(x, y, label=<span class="string">&#x27;linear&#x27;</span>)  </span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Tag</p>
<p>添加标签，文字和图例，这一模块的扩展参考第四章进一步学习</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ax.set_xlabel(<span class="string">&#x27;x label&#x27;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&#x27;y label&#x27;</span>)</span><br><span class="line">ax.set_title(<span class="string">&quot;Simple Plot&quot;</span>)  </span><br><span class="line">ax.legend()</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li>
<p><strong>Full code</strong>:</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># step1 准备数据</span></span><br><span class="line">x = np.linspace(<span class="number">0</span>, <span class="number">2</span>, <span class="number">100</span>)</span><br><span class="line">y = x**<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># step2 设置绘图样式</span></span><br><span class="line">mpl.rc(<span class="string">&#x27;lines&#x27;</span>, linewidth=<span class="number">4</span>, linestyle=<span class="string">&#x27;-.&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># step3 定义布局， 这一模块的扩展参考第三章进一步学习</span></span><br><span class="line">fig, ax = plt.subplots()  </span><br><span class="line"></span><br><span class="line"><span class="comment"># step4 绘制图像</span></span><br><span class="line">ax.plot(x, y, label=<span class="string">&#x27;linear&#x27;</span>)  </span><br><span class="line"></span><br><span class="line"><span class="comment"># step5 添加标签</span></span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;x label&#x27;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&#x27;y label&#x27;</span>)</span><br><span class="line">ax.set_title(<span class="string">&quot;Simple Plot&quot;</span>)  </span><br><span class="line">ax.legend()</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/13/7Mh36K.png' style='zoom:80%' />
</li>
</ul>
<h2 id="24-thinking"><a class="markdownIt-Anchor" href="#24-thinking"></a> 2.4 Thinking</h2>
<ul>
<li>请思考两种绘图模式的优缺点和各自适合的使用场景</li>
<li>在第五节绘图模板中我们是以OO模式作为例子展示的，请思考并写一个pyplot绘图模式的简单模板</li>
</ul>
<p>这里借用之前的笔记，用一个稍微复杂点的例子来展示两种绘图模式的区别。</p>
<ol>
<li>
<p>面向对象编程绘图</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 对象式绘图</span></span><br><span class="line"><span class="comment"># pyplot 模块中的 figure() 函数创建名为 fig 的 Figure 对象</span></span><br><span class="line">fig = plt.figure(figsize = (<span class="number">12</span>, <span class="number">8</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在 Figure 对象中创建一个 Axes 对象，每个 Axes 对象即为一个绘图区域</span></span><br><span class="line">ax = fig.add_subplot(<span class="number">111</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># generate data</span></span><br><span class="line">start_val, stop_val, num_val = <span class="number">0</span>, <span class="number">10</span>, <span class="number">1000</span></span><br><span class="line">x = np.linspace(start_val, stop_val, num_val)</span><br><span class="line">y = np.sin(x)</span><br><span class="line"></span><br><span class="line"><span class="comment"># y = sin(x)</span></span><br><span class="line"><span class="comment"># &#x27;--g,&#x27;: format_string, equals with a combination of linestyle, color, market, 即折线、绿色、像素点</span></span><br><span class="line">ax.plot(x, y, <span class="string">&#x27;--g&#x27;</span>, lw = <span class="number">2</span>, label = <span class="string">&#x27;sin(x)&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调整坐标范围</span></span><br><span class="line">x_min, x_max = <span class="number">0</span>, <span class="number">10</span></span><br><span class="line">y_min, y_max = <span class="number">0</span>, <span class="number">1.5</span></span><br><span class="line">ax.set_xlim(x_min, x_max)</span><br><span class="line">ax.set_ylim(y_min, y_max)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置坐标轴标签</span></span><br><span class="line">plt.xlabel(<span class="string">&#x27;x轴&#x27;</span>, fontsize = <span class="number">15</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;y轴&#x27;</span>, fontsize = <span class="number">15</span>)</span><br><span class="line"></span><br><span class="line">x_location = np.arange(<span class="number">0</span>, <span class="number">10</span>, <span class="number">2</span>)</span><br><span class="line">x_labels = [<span class="string">&#x27;2019-01-01&#x27;</span>, <span class="string">&#x27;2019-02-01&#x27;</span>, <span class="string">&#x27;2019-03-01&#x27;</span>, <span class="string">&#x27;2019-04-01&#x27;</span>, <span class="string">&#x27;2019-05-01&#x27;</span>]</span><br><span class="line">y_location = np.arange(-<span class="number">1</span>, <span class="number">1.5</span>, <span class="number">1</span>)</span><br><span class="line">y_labels = [<span class="string">u&#x27;minimum&#x27;</span>, <span class="string">u&#x27;zero&#x27;</span>, <span class="string">u&#x27;maximum&#x27;</span>]</span><br><span class="line">plt.xticks(x_location, x_labels, rotation = <span class="number">45</span>, fontsize = <span class="number">15</span>)</span><br><span class="line">plt.yticks(y_location, y_labels, fontsize = <span class="number">15</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ls: linestyle</span></span><br><span class="line">plt.grid(<span class="literal">True</span>, ls = <span class="string">&#x27;:&#x27;</span>, color = <span class="string">&#x27;r&#x27;</span>, alpha = <span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line">plt.title(<span class="string">&#x27;函数式绘图 vs 对象式绘图&#x27;</span>, fontsize = <span class="number">25</span>)</span><br><span class="line">plt.legend(loc = <span class="string">&#x27;upper right&#x27;</span>, fontsize  = <span class="number">15</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>Result:</p>
 <img src='https://s4.ax1x.com/2022/01/13/7M6Id1.md.png' style='zoom:80%' />
</li>
<li>
<p>函数式绘图</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># step one: create figure and fix size</span></span><br><span class="line">plt.figure(figsize = (<span class="number">12</span>, <span class="number">6</span>)) <span class="comment"># length x width</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># step two: generate data</span></span><br><span class="line">start_val = <span class="number">0</span> <span class="comment"># start value</span></span><br><span class="line">stop_val = <span class="number">10</span> <span class="comment"># end value</span></span><br><span class="line">num_val = <span class="number">1000</span> <span class="comment"># samples number</span></span><br><span class="line">x = np.linspace(start_val, stop_val, num_val)</span><br><span class="line">y = np.sin(x)</span><br><span class="line">plt.plot(x, y, <span class="string">&#x27;--g,&#x27;</span>, lw = <span class="number">2</span>, label = <span class="string">&#x27;$sin(x)$&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># step three: adjust axis</span></span><br><span class="line">x_min = <span class="number">0</span></span><br><span class="line">x_max = <span class="number">10</span></span><br><span class="line">y_min = <span class="number">0</span></span><br><span class="line">y_max = <span class="number">1.5</span></span><br><span class="line">plt.xlim(x_min, x_max)</span><br><span class="line">plt.ylim(y_min, y_max)</span><br><span class="line"></span><br><span class="line"><span class="comment"># step four: set axis label</span></span><br><span class="line">plt.xlabel(<span class="string">&#x27;x轴&#x27;</span>, fontsize = <span class="number">15</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;y轴&#x27;</span>, fontsize = <span class="number">15</span>)</span><br><span class="line"></span><br><span class="line">x_location = np.arange(<span class="number">0</span>, <span class="number">10</span>, <span class="number">2</span>)</span><br><span class="line">x_labels = [<span class="string">&#x27;2019-01-01&#x27;</span>, <span class="string">&#x27;2019-02-01&#x27;</span>, <span class="string">&#x27;2019-03-01&#x27;</span>, <span class="string">&#x27;2019-04-01&#x27;</span>, <span class="string">&#x27;2019-05-01&#x27;</span>]</span><br><span class="line">y_location = np.arange(-<span class="number">1</span>, <span class="number">1.5</span>, <span class="number">1</span>)</span><br><span class="line">y_labels = [<span class="string">u&#x27;minimum&#x27;</span>, <span class="string">u&#x27;zero&#x27;</span>, <span class="string">u&#x27;maximum&#x27;</span>]</span><br><span class="line">plt.xticks(x_location, x_labels, rotation = <span class="number">45</span>, fontsize = <span class="number">15</span>)</span><br><span class="line">plt.yticks(y_location, y_labels, fontsize = <span class="number">15</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># step five: set grid</span></span><br><span class="line"><span class="comment"># ls: linestyle</span></span><br><span class="line">plt.grid(<span class="literal">True</span>, ls = <span class="string">&#x27;:&#x27;</span>, color = <span class="string">&#x27;r&#x27;</span>, alpha = <span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line">plt.title(<span class="string">&#x27;函数式绘图&#x27;</span>, fontsize = <span class="number">25</span>)</span><br><span class="line">plt.legend(loc = <span class="string">&#x27;upper right&#x27;</span>, fontsize  = <span class="number">15</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>Result:</p>
 <img src='https://s4.ax1x.com/2022/01/13/7M6Id1.md.png' style='zoom:80%' />
</li>
</ol>
<h1 id="3-艺术画笔见乾坤"><a class="markdownIt-Anchor" href="#3-艺术画笔见乾坤"></a> 3. 艺术画笔见乾坤</h1>
<h2 id="31-matplotlib-原理"><a class="markdownIt-Anchor" href="#31-matplotlib-原理"></a> 3.1 Matplotlib 原理</h2>
<h3 id="311-绘图步骤"><a class="markdownIt-Anchor" href="#311-绘图步骤"></a> 3.1.1 绘图步骤</h3>
<p><code>matplotlib</code> 绘图的原理是借助 <code>Artist</code> 对象在画布 （<code>Canvas</code>） 上绘制 （<code>Render</code>）图形。这与人作画的步骤类似：</p>
<ol>
<li>准备画布；</li>
<li>准备好颜料、画笔等制图工具；</li>
<li>作画</li>
</ol>
<p>对应地，<code>Matplotlib</code> 也有三层 <code>API</code>：</p>
<ul>
<li>绘图区：<code>matplotlib.backend_bases.FigureCanvas</code> 代表了绘图区，所有的图像都是在绘图区完成的；</li>
<li>渲染器：<code>matplotlib.backend_bases.Renderer</code> 表示渲染器，可以近似理解为画笔，控制如何在 <code>FigureCanvas</code> 上画图；</li>
<li>图表组件：<code>matplotlib.artist.Artist</code> 代表了具体的图表组件，即调用了 <code>Renderer</code> 的接口在 <code>Canvas</code> 上作图。</li>
<li></li>
</ul>
<p>前两者处理程序和计算机的底层交互的事项，第三项 <code>Artist</code> 就是具体的调用接口来做出我们想要的图，比如图形、文本、线条的设定。所以通常来说，我们 <code>95%</code> 的时间，都是用来和 <code>matplotlib.artist.Artist</code> 类打交道的。</p>
<h3 id="312-artist-分类"><a class="markdownIt-Anchor" href="#312-artist-分类"></a> 3.1.2 <code>Artist</code> 分类</h3>
<p><code>Artist</code> 有两种类型：</p>
<ul>
<li>
<p><code>primitives</code></p>
<p>基本要素，它包含一些我们要在绘图区作图用到的标准图形对象，如曲线 <code>Line2D</code>，文字 <code>Text</code>，矩形 <code>Rectangle</code>，图像 <code>Image</code> 等。</p>
</li>
<li>
<p><code>containers</code></p>
<p>容器，用来装基本要素的地方，包括图形 <code>Figure</code>、坐标系 <code>Axes</code> 和坐标轴 <code>Axis</code>。他们之间的关系如下所示：</p>
  <img src='https://s4.ax1x.com/2022/01/13/7M67i6.png' style='zoom:80%' />
</li>
</ul>
<p>可视化中，常见的 <code>Artist</code> 类可以参考下表。</p>
<center> Fig. 1 Aritist object </center>
<table>
<thead>
<tr>
<th>Axes helper method</th>
<th>Artist</th>
<th>Container</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>bar</code> - bar charts</td>
<td><code>Rectangle</code></td>
<td>ax.patches</td>
</tr>
<tr>
<td><code>errorbar</code> - error bar plots</td>
<td><code>Line2D</code> and <code>Rectangle</code></td>
<td>ax.lines and ax.patches</td>
</tr>
<tr>
<td><code>fill</code> - shared area</td>
<td><code>Polygon</code></td>
<td>ax.patches</td>
</tr>
<tr>
<td><code>hist</code> - histograms</td>
<td><code>Rectangle</code></td>
<td>ax.patches</td>
</tr>
<tr>
<td><code>imshow</code> - image data</td>
<td><code>AxesImage</code></td>
<td>ax.images</td>
</tr>
<tr>
<td><code>plot</code> - xy plots</td>
<td><code>Line2D</code></td>
<td>ax.lines</td>
</tr>
<tr>
<td><code>scatter</code> - scatter charts</td>
<td><code>PolyCollection</code></td>
<td>ax.collections</td>
</tr>
</tbody>
</table>
<p>三列各自的含义分别表示：</p>
<ul>
<li>
<p><code>Axes helper method</code></p>
<p>表示 <code>Matplotlib</code> 中子图上的辅助方法，可以理解为可视化中不同种类的图表类型，如柱状图，折线图，直方图等，这些图表都可以用这些辅助方法绘制。</p>
</li>
<li>
<p><code>Artist</code></p>
<p>表示图表背后的 <code>Artist</code> 类，比如折线图方法 <code>plot</code> 在底层用到的就是 <code>Line2D</code> 这一 <code>Artist</code> 类。</p>
</li>
<li>
<p><code>Container</code></p>
<p>表示 <code>Artist</code> 的列表容器，例如所有在子图中创建的 <code>Line2D</code> 对象都会被自动收集到 <code>ax.lines</code> 返回的列表中。</p>
</li>
</ul>
<p>后面的案列内容会更清楚地阐述这三者之间的关系。通常情况下，我们只需记住第一列的辅助方法及逆行绘图即可，而无需关注其底层具体用了什么类。但是了解底层类有助于我们绘制一些复杂的图表。</p>
<h2 id="32-primitives-基本元素"><a class="markdownIt-Anchor" href="#32-primitives-基本元素"></a> 3.2 <code>Primitives</code> 基本元素</h2>
<p>各个容器中可能会包含多种 <code>primitives</code> 基本元素，所以此处先介绍 <code>primitives</code>，再介绍容器 <code>container</code>。 <code>primitives</code> 主要包含如下种类：</p>
<ul>
<li>曲线 <code>Line2D</code>；</li>
<li>矩形 <code>Rectangle</code>；</li>
<li>多边形 <code>Polygon</code>；</li>
<li>图像 <code>image</code></li>
</ul>
<h3 id="321-2dlines"><a class="markdownIt-Anchor" href="#321-2dlines"></a> 3.2.1 <code>2Dlines</code></h3>
<p><code>Matplotlib</code> 中曲线的绘制主要通过类 <code>matplotlib.lines.line2D</code> 来完成。其中线 <code>line</code> 的含义：它表示的可以是连接所有顶点的实现央视，也可以是每个顶点的标记。此外，这条线也会受到会话风格的影响，比如，我们可以创建虚线种类的线。</p>
<p>它的构造函数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">matplotlib</span>.<span class="title">lines</span>.<span class="title">Line2D</span>(<span class="params">xdata, ydata, linewidth=<span class="literal">None</span>, linestyle=<span class="literal">None</span>, color=<span class="literal">None</span>, marker=<span class="literal">None</span>, markersize=<span class="literal">None</span>, markeredgewidth=<span class="literal">None</span>, markeredgecolor=<span class="literal">None</span>, markerfacecolor=<span class="literal">None</span>, markerfacecoloralt=<span class="string">&#x27;none&#x27;</span>, fillstyle=<span class="literal">None</span>, antialiased=<span class="literal">None</span>, dash_capstyle=<span class="literal">None</span>, solid_capstyle=<span class="literal">None</span>, dash_joinstyle=<span class="literal">None</span>, solid_joinstyle=<span class="literal">None</span>, pickradius=<span class="number">5</span>, drawstyle=<span class="literal">None</span>, markevery=<span class="literal">None</span>, **kwargs</span>)</span></span><br></pre></td></tr></table></figure>
<p>其中常用的参数有：</p>
<ul>
<li><code>xdata</code>：需要绘制的 <code>line</code> 中点在 <code>x</code> 轴上的取值，若忽略，则默认为 <code>range(1, len(ydata)+1)</code>；</li>
<li><code>ydata</code>：需要绘制的 <code>line</code> 中点的在 <code>y</code> 轴上的取值；</li>
<li><code>linewidth</code>：线条的宽度；</li>
<li><code>linewidth</code>：线条的宽度；</li>
<li><code>linestyle</code>：线性；</li>
<li><code>color</code>：线条的颜色；</li>
<li><code>marker</code>：点的标记，详细可参考 <a target="_blank" rel="noopener" href="https://matplotlib.org/api/markers_api.html#module-matplotlib.markers">markers API</a></li>
<li><code>markersize</code>：标记的 <code>size</code></li>
</ul>
<p>更多参数说明可查看 <a target="_blank" rel="noopener" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.lines.Line2D.html">Line2D 官方文档</a></p>
<p><strong>Load modules</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> matplotlib.lines <span class="keyword">import</span> Line2D   </span><br><span class="line"><span class="keyword">from</span> matplotlib.patches <span class="keyword">import</span> Circle, Wedge</span><br><span class="line"><span class="keyword">from</span> matplotlib.collections <span class="keyword">import</span> PatchCollection</span><br><span class="line"></span><br><span class="line"><span class="comment"># plt.figure(dpi=300,figsize=(12,8))</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;figure.figsize&#x27;</span>]=(<span class="number">12</span>,<span class="number">8</span>) <span class="comment"># 预设图片大小</span></span><br></pre></td></tr></table></figure>
<ol>
<li>
<p><strong>如何设置 <code>Line2D</code> 的属性</strong></p>
<p>可以通过如下方式设置线的属性：</p>
<ul>
<li>
<p>直接在 <code>plot()</code> 函数中设置；</p>
<p>借助 <code>plot</code> 函数的参数，可以便捷地设置属性。</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">5</span>)</span><br><span class="line">y = [<span class="number">2</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">10</span>]</span><br><span class="line">plt.plot(x, y, linewidth = <span class="number">10</span>) <span class="comment"># 设置线的粗细参数为 10</span></span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/13/7M6oIx.png' style='zoom:80%' />
</li>
<li>
<p>通过获得线对象，对线对象进行设置；</p>
<p>借助面向对象编程，先获取线对象，然后对其属性进行设置。</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">5</span>)</span><br><span class="line">y = [<span class="number">2</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">10</span>]</span><br><span class="line">line, = plt.plot(x, y, <span class="string">&#x27;-&#x27;</span>) <span class="comment"># 这里等号坐标的line,是一个列表解包的操作，目的是获取plt.plot返回列表中的Line2D对象</span></span><br><span class="line">line.set_antialiased(<span class="literal">False</span>); <span class="comment"># 关闭抗锯齿功能</span></span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/13/7M6fsJ.md.png' style='zoom:80%' />
<p><strong>Note</strong>：注意到这里使用了 <code>line</code> 来存储 <code>plt.plot()</code> 的返回对象，这里等号左边的 <code>line</code> 是一个解包的操作，目的是获取 <code>plt.plot</code> 返回列表中的 <code>Line2D</code> 对象，特别地，<code>plt.plot</code> 的返回为:</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&lt;matplotlib.lines.Line2D at 0x248e34d2760&gt;]</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>获得线对象，使用 <code>setp()</code> 函数设置</p>
<p>也可以先获得线属性，然后使用 <code>setp</code> 函数（<code>set property</code>）设置。</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">5</span>)</span><br><span class="line">y = [<span class="number">2</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">10</span>]</span><br><span class="line">lines = plt.plot(x, y)</span><br><span class="line">plt.setp(lines, color=<span class="string">&#x27;r&#x27;</span>, linewidth=<span class="number">10</span>)</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/13/7MhEOU.png' style='zoom:80%' />
</li>
</ul>
</li>
<li>
<p><strong>如何绘制</strong> <code>lines</code></p>
<p><strong>1）绘制直线 <code>line</code></strong>；</p>
<p>首先介绍两种绘制直线 <code>line</code> 常用的方法：</p>
<ul>
<li>
<p><code>plot</code> 方法绘制</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. plot方法绘制</span></span><br><span class="line">x = <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">5</span>)</span><br><span class="line">y1 = [<span class="number">2</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">10</span>]</span><br><span class="line">y2= [<span class="number">3</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">11</span>]</span><br><span class="line"></span><br><span class="line">fig,ax= plt.subplots()</span><br><span class="line">ax.plot(x,y1)</span><br><span class="line">ax.plot(x,y2) <span class="comment"># 通过直接使用辅助方法画线</span></span><br><span class="line">plt.show()</span><br><span class="line">print(ax.lines);</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/13/7Mhhpq.md.png' style='zoom:80%' />
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&lt;matplotlib.lines.Line2D object at 0x00000248E374F0A0&gt;, &lt;matplotlib.lines.Line2D object at 0x00000248E374FF40&gt;]</span><br></pre></td></tr></table></figure>
<p>通过直接使用辅助方法画线，打印 <code>ax.lines</code> 后可以看到在 <code>matplotlib</code> 在底层创建了两个 <code>Line2D</code> 对象</p>
</li>
<li>
<p><code>Line2D</code> 对象绘制</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">5</span>)</span><br><span class="line">y1 = [<span class="number">2</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">10</span>]</span><br><span class="line">y2= [<span class="number">3</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">11</span>]</span><br><span class="line">fig,ax= plt.subplots()</span><br><span class="line">lines = [Line2D(x, y1), Line2D(x, y2,color=<span class="string">&#x27;orange&#x27;</span>)]  <span class="comment"># 显式创建Line2D对象</span></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> lines:</span><br><span class="line">    ax.add_line(line) <span class="comment"># 使用add_line方法将创建的Line2D添加到子图中</span></span><br><span class="line">ax.set_xlim(<span class="number">0</span>,<span class="number">4</span>)</span><br><span class="line">ax.set_ylim(<span class="number">2</span>, <span class="number">11</span>);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>2）<code>errorbar</code> 绘制误差折线图；</p>
<p><code>pyplot</code> 里有个专门绘制误差线的功能，通过 <code>errorbar</code> 类实现，它的构造函数：</p>
   <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">matplotlib.pyplot.errorbar(x, y, yerr=<span class="literal">None</span>, xerr=<span class="literal">None</span>, fmt=<span class="string">&#x27;&#x27;</span>, ecolor=<span class="literal">None</span>, elinewidth=<span class="literal">None</span>, capsize=<span class="literal">None</span>, barsabove=<span class="literal">False</span>, lolims=<span class="literal">False</span>, uplims=<span class="literal">False</span>, xlolims=<span class="literal">False</span>, xuplims=<span class="literal">False</span>, errorevery=<span class="number">1</span>, capthick=<span class="literal">None</span>, *, data=<span class="literal">None</span>, **kwargs)</span><br></pre></td></tr></table></figure>
<p>其中最主要的参数包括：</p>
<ul>
<li><strong>x</strong>：需要绘制的 <code>line</code> 中点的在 <code>x</code> 轴上的取值</li>
<li><strong>y</strong>：需要绘制的 <code>line</code> 中点的在 <code>y</code> 轴上的取值</li>
<li><strong>yerr</strong>：指定 <code>y</code> 轴水平的误差</li>
<li><strong>xerr</strong>：指定 <code>x</code> 轴水平的误差</li>
<li><strong>fmt</strong>：指定折线图中某个点的颜色，形状，线条风格，例如 <code>co--</code></li>
<li><strong>ecolor</strong>：指定 <code>error bar</code> 的颜色</li>
<li><strong>elinewidth</strong>：指定 <code>error bar</code> 的线条宽度</li>
</ul>
<p><strong>绘制 <code>errorbar</code></strong>：</p>
   <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fig = plt.figure()</span><br><span class="line">x = np.arange(<span class="number">10</span>)</span><br><span class="line">y = <span class="number">2.5</span> * np.sin(x / <span class="number">20</span>* np.pi)</span><br><span class="line">yerr = np.linspace(<span class="number">0.05</span>, <span class="number">0.2</span>, <span class="number">10</span>)</span><br><span class="line">plt.errorbar(x, y + <span class="number">3</span>, yerr = yerr, label = <span class="string">&#x27;both limits (default)&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>Result:</p>
   <img src='https://s4.ax1x.com/2022/01/13/7McJm9.md.png' style='zoom:80%' />
</li>
</ol>
<h3 id="322-patches"><a class="markdownIt-Anchor" href="#322-patches"></a> 3.2.2 <code>patches</code></h3>
<p><code>matplotlib.patches.Patch</code> 类是二维图形类，并且它是众多二维图形的负类，它的所有子类见 <a target="_blank" rel="noopener" href="https://matplotlib.org/stable/api/patches_api.html">matplotlib.patches API</a>，<code>Patch</code> 类的构造函数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Patch(edgecolor=<span class="literal">None</span>, facecolor=<span class="literal">None</span>, color=<span class="literal">None</span>, linewidth=<span class="literal">None</span>, linestyle=<span class="literal">None</span>, antialiased=<span class="literal">None</span>, hatch=<span class="literal">None</span>, fill=<span class="literal">True</span>, capstyle=<span class="literal">None</span>, joinstyle=<span class="literal">None</span>, **kwargs)</span><br></pre></td></tr></table></figure>
<p>本小节主要聚焦三种最常见的子类，矩形、多边形和楔形。</p>
<ol>
<li>
<p><code>Rectangle</code>-矩形</p>
<p><code>Rectangle</code> 矩形类在官网中的定义是：通过描点 <code>xy</code> 及宽度和高度生成。<code>Rectangle</code> 本身主要比较简单，即 <code>xy</code> 控制描点，<code>width</code> 和 <code>height</code> 分别控制宽和高。它的构造函数：</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">matplotlib</span>.<span class="title">patches</span>.<span class="title">Rectangle</span>(<span class="params">xy, width, height, angle=<span class="number">0.0</span>, **kwargs</span>)</span></span><br></pre></td></tr></table></figure>
<p>在实际使用过程中最常用的是 <strong><code>hist</code> 直方图</strong> 和 <strong><code>bar</code> 条形图</strong>。</p>
<ul>
<li>
<p><code>hist</code> 直方图</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">matplotlib.pyplot.hist(x,bins=<span class="literal">None</span>,<span class="built_in">range</span>=<span class="literal">None</span>, density=<span class="literal">None</span>, bottom=<span class="literal">None</span>, histtype=<span class="string">&#x27;bar&#x27;</span>, align=<span class="string">&#x27;mid&#x27;</span>, log=<span class="literal">False</span>, color=<span class="literal">None</span>, label=<span class="literal">None</span>, stacked=<span class="literal">False</span>, normed=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>
<p>常用参数及含义：</p>
<ul>
<li><strong>x</strong>: 数据集，最终的直方图将对数据集进行统计</li>
<li><strong>bins</strong>: 统计的区间分布</li>
<li><strong>range</strong>: <code>tuple</code>, 显示的区间，<code>range</code> 在没有给出 <code>bins</code> 时生效</li>
<li><strong>density</strong>: <code>bool</code>，默认为 <code>false</code>，显示的是频数统计结果，为 <code>True</code> 则显示频率统计结果，这里需要注意，频率统计结果=区间数目/(总数*区间宽度)，和 <code>normed</code> 效果一致，官方推荐使用 <code>density</code></li>
<li><strong>histtype</strong>: 可选{<code>bar</code>, <code>barstacked</code>, <code>step</code>, <code>stepfilled</code>}之一，默认为 <code>bar</code>，推荐使用默认配置，<code>step</code> 使用的是梯状，<code>stepfilled</code> 则会对梯状内部进行填充，效果与 <code>bar</code> 类似</li>
<li><strong>align</strong>: 可选{<code>left</code>, <code>mid</code>, <code>right</code>}之一，默认为 <code>mid</code>，控制柱状图的水平分布，<code>left</code> 或者 <code>right</code>，会有部分空白区域，推荐使用默认</li>
<li><strong>log</strong>: <code>bool</code>，默认 <code>False</code>,即 <code>y</code> 坐标轴是否选择指数刻度</li>
<li><strong>stacked</strong>: <code>bool</code>，默认为 <code>False</code>，是否为堆积状图</li>
</ul>
<p><strong>借助 <code>hist</code> 绘制直方图</strong>：</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">x=np.random.randint(<span class="number">0</span>,<span class="number">100</span>,<span class="number">100</span>) <span class="comment"># 生成[0-100)之间的100个数据,即 数据集</span></span><br><span class="line">bins=np.arange(<span class="number">0</span>,<span class="number">101</span>,<span class="number">10</span>) <span class="comment"># 设置连续的边界值，即直方图的分布区间 [0,10), [10,20).</span></span><br><span class="line">plt.hist(x,bins,color=<span class="string">&#x27;fuchsia&#x27;</span>,alpha=<span class="number">0.5</span>) <span class="comment"># alpha设置透明度，0为完全透明</span></span><br><span class="line">plt.xlabel(<span class="string">&#x27;scores&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;count&#x27;</span>)</span><br><span class="line">plt.xlim(<span class="number">0</span>,<span class="number">100</span>); <span class="comment"># 设置x轴分布范围</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/13/7Mc8OJ.md.png' style='zoom:80%' />
<p><strong><code>Rectangle</code> 矩阵类绘制直方图</strong>：</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(columns = [<span class="string">&#x27;data&#x27;</span>])</span><br><span class="line">df.loc[:,<span class="string">&#x27;data&#x27;</span>] = x</span><br><span class="line">df[<span class="string">&#x27;fenzu&#x27;</span>] = pd.cut(df[<span class="string">&#x27;data&#x27;</span>], bins=bins, right = <span class="literal">False</span>,include_lowest=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">df_cnt = df[<span class="string">&#x27;fenzu&#x27;</span>].value_counts().reset_index()</span><br><span class="line">df_cnt.loc[:,<span class="string">&#x27;mini&#x27;</span>] = df_cnt[<span class="string">&#x27;index&#x27;</span>].astype(<span class="built_in">str</span>).<span class="built_in">map</span>(<span class="keyword">lambda</span> x:re.findall(<span class="string">&#x27;\[(.*)\,&#x27;</span>,x)[<span class="number">0</span>]).astype(<span class="built_in">int</span>)</span><br><span class="line">df_cnt.loc[:,<span class="string">&#x27;maxi&#x27;</span>] = df_cnt[<span class="string">&#x27;index&#x27;</span>].astype(<span class="built_in">str</span>).<span class="built_in">map</span>(<span class="keyword">lambda</span> x:re.findall(<span class="string">&#x27;\,(.*)\)&#x27;</span>,x)[<span class="number">0</span>]).astype(<span class="built_in">int</span>)</span><br><span class="line">df_cnt.loc[:,<span class="string">&#x27;width&#x27;</span>] = df_cnt[<span class="string">&#x27;maxi&#x27;</span>]- df_cnt[<span class="string">&#x27;mini&#x27;</span>]</span><br><span class="line">df_cnt.sort_values(<span class="string">&#x27;mini&#x27;</span>,ascending = <span class="literal">True</span>,inplace = <span class="literal">True</span>)</span><br><span class="line">df_cnt.reset_index(inplace = <span class="literal">True</span>,drop = <span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#用Rectangle把hist绘制出来</span></span><br><span class="line"></span><br><span class="line">fig = plt.figure()</span><br><span class="line">ax1 = fig.add_subplot(<span class="number">111</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> df_cnt.index:</span><br><span class="line">    rect =  plt.Rectangle((df_cnt.loc[i,<span class="string">&#x27;mini&#x27;</span>],<span class="number">0</span>),df_cnt.loc[i,<span class="string">&#x27;width&#x27;</span>],df_cnt.loc[i,<span class="string">&#x27;fenzu&#x27;</span>])</span><br><span class="line">    ax1.add_patch(rect)</span><br><span class="line"></span><br><span class="line">ax1.set_xlim(<span class="number">0</span>, <span class="number">100</span>)</span><br><span class="line">ax1.set_ylim(<span class="number">0</span>, <span class="number">16</span>)</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/13/7Mc3y4.md.png' style='zoom:80%' />
</li>
<li>
<p><code>bar</code> 柱状图</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">matplotlib.pyplot.bar(left, height, alpha=<span class="number">1</span>, width=<span class="number">0.8</span>, color=, edgecolor=, label=, lw=<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<p>常用的参数：</p>
<ul>
<li><strong>left</strong>：x轴的位置序列，一般采用range函数产生一个序列，但是有时候可以是字符串</li>
<li><strong>height</strong>：y轴的数值序列，也就是柱形图的高度，一般就是我们需要展示的数据；</li>
<li><strong>alpha</strong>：透明度，值越小越透明</li>
<li><strong>width</strong>：为柱形图的宽度，一般这是为0.8即可；</li>
<li><strong>color或facecolor</strong>：柱形图填充的颜色；</li>
<li><strong>edgecolor</strong>：图形边缘颜色</li>
<li><strong>label</strong>：解释每个图像代表的含义，这个参数是为legend()函数做铺垫的，表示该次bar的标签</li>
</ul>
<p>与上述类似，同样有两种方式绘制柱状图：</p>
<ul>
<li><code>bar</code> 绘制柱状图</li>
<li><code>Rectangle</code>矩形类绘制柱状图</li>
</ul>
<p><strong><code>bar</code> 绘制柱状图</strong></p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">y = <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">17</span>)</span><br><span class="line">plt.bar(np.arange(<span class="number">16</span>), y, alpha=<span class="number">0.5</span>, width=<span class="number">0.5</span>, color=<span class="string">&#x27;yellow&#x27;</span>, edgecolor=<span class="string">&#x27;red&#x27;</span>, label=<span class="string">&#x27;The First Bar&#x27;</span>, lw=<span class="number">3</span>);</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/13/7Mc1lF.md.png' style='zoom:80%' />
<p><strong><code>Rectangle</code></strong></p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">fig = plt.figure()</span><br><span class="line">ax1 = fig.add_subplot(<span class="number">111</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">17</span>):</span><br><span class="line">  rect = plt.Rectangle((i+<span class="number">0.25</span>, <span class="number">0</span>), <span class="number">0.5</span>, i)</span><br><span class="line">  ax1.add_patch(rect)</span><br><span class="line">ax1.set_xlim(<span class="number">0</span>, <span class="number">16</span>)</span><br><span class="line">ax1.set_ylim(<span class="number">0</span>, <span class="number">16</span>);</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/13/7MclSU.md.png' style='zoom:80%' />
</li>
</ul>
</li>
<li>
<p><code>Polygon</code>-多边形</p>
<p><code>matplotlib.patches.Polygon</code> 类是多边形类，它的构造函数：</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">matplotlib</span>.<span class="title">patches</span>.<span class="title">Polygon</span>(<span class="params">xy, closed=<span class="literal">True</span>, **kwargs</span>)</span></span><br></pre></td></tr></table></figure>
<p>参数说明：</p>
<ul>
<li><code>xy</code> 是一个 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi><mo>×</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">N \times 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span> 的 <code>numpy.array</code>，为多边形的顶点。</li>
<li><code>closed</code> 为 <code>True</code> 则制定多边形将起点和终点重合从而显式关闭多边形。</li>
</ul>
<p><code>matplotlib.patches.Polygon</code> 类中常用的是 <code>fill</code> 类，它是基于 <code>xy</code> 绘制一个填充的多边形，它的定义：</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">matplotlib.pyplot.fill(args, data=<span class="literal">None</span>, *kwargs)</span><br></pre></td></tr></table></figure>
<p>参数说明：关于 <code>x</code>、<code>y</code> 和 <code>color</code> 的序列，其中 <code>color</code> 是可选的参数，每个多边形都是由其他节点的 <code>x</code> 和 <code>y</code> 位置列表定义，后面可以选择一个颜色说明符。</p>
<p><strong>用 <code>fill</code> 来绘制图形</strong></p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x = np.linspace(<span class="number">0</span>, <span class="number">5</span>*np.pi, <span class="number">1000</span>)</span><br><span class="line">y1 = np.sin(x)</span><br><span class="line">y2 = np.sin(<span class="number">2</span>*x)</span><br><span class="line">plt.fill(x, y1, color = <span class="string">&#x27;g&#x27;</span>, alpha = <span class="number">0.3</span>);</span><br></pre></td></tr></table></figure>
<p>Results:</p>
 <img src='https://s4.ax1x.com/2022/01/13/7McMWT.md.png' style='zoom:80%' />  
</li>
<li>
<p><code>Wedge</code>-楔形</p>
<p><code>matplotlib.patches.Wedge</code> 类是楔形类，构造函数为：</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">matplotlib</span>.<span class="title">patches</span>.<span class="title">Wedge</span>(<span class="params">center, r, theta1, theta2, width=<span class="literal">None</span>, **kwargs</span>)</span></span><br></pre></td></tr></table></figure>
<p>一个 <code>Wedge</code>-楔形是以坐标 <code>x, y</code> 为中心，半径为 <code>r</code>，从 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>θ</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">\theta_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 扫到 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>θ</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">\theta_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>（单位是度）。如果宽度给定，则从内半径 <code>r</code>-宽度 到外半径 <code>r</code> 画出部分楔形。<code>wedge</code> 中比较常见的是绘制饼状图。</p>
<p><strong>以绘制饼图为例</strong>。通常我们可以使用 <code>matplotlib.pyplot.pie</code> 直接绘制饼图，其构造函数有如下：</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">matplotlib.pyplot.pie(x, explode=<span class="literal">None</span>, labels=<span class="literal">None</span>, colors=<span class="literal">None</span>, autopct=<span class="literal">None</span>, pctdistance=<span class="number">0.6</span>, shadow=<span class="literal">False</span>, labeldistance=<span class="number">1.1</span>, startangle=<span class="number">0</span>, radius=<span class="number">1</span>, counterclock=<span class="literal">True</span>, wedgeprops=<span class="literal">None</span>, textprops=<span class="literal">None</span>, center=<span class="number">0</span>, <span class="number">0</span>, frame=<span class="literal">False</span>, rotatelabels=<span class="literal">False</span>, *, normalize=<span class="literal">None</span>, data=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>
<p>制作数据 <code>x</code> 的饼图，每个楔子的面积用 <code>x/sum(x)</code> 表示。其主要的参数是前四个：</p>
<ul>
<li><strong>x</strong>：契型的形状，一维数组。</li>
<li><strong>explode</strong>：如果不是等于 <code>None</code>，则是一个 <code>len(x)</code> 数组，它指定用于偏移每个楔形块的半径的分数；</li>
<li><strong>labels</strong>：用于指定每个契型块的标记，取值是列表或为 <code>None</code>；</li>
<li><strong>colors</strong>：饼图循环使用的颜色序列。如果取值为 <code>None</code>，将使用当前活动循环中的颜色；</li>
<li><strong>startangle</strong>：饼状图开始的绘制的角度。</li>
</ul>
<p><strong><code>pie</code> 函数绘制饼图</strong>：</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">labels = <span class="string">&#x27;Frogs&#x27;</span>, <span class="string">&#x27;Hogs&#x27;</span>, <span class="string">&#x27;Dogs&#x27;</span>, <span class="string">&#x27;Logs&#x27;</span></span><br><span class="line">sizes = [<span class="number">15</span>, <span class="number">30</span>, <span class="number">45</span>, <span class="number">10</span>]</span><br><span class="line">explode = (<span class="number">0</span>, <span class="number">0.1</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">fig1, ax1 = plt.subplots()</span><br><span class="line">ax1.pie(sizes, explode=explode, labels=labels, autopct=<span class="string">&#x27;%1.1f%%&#x27;</span>, shadow=<span class="literal">True</span>, startangle=<span class="number">90</span>)</span><br><span class="line">ax1.axis(<span class="string">&#x27;equal&#x27;</span>); <span class="comment"># Equal aspect ratio ensures that pie is drawn as a circle.</span></span><br></pre></td></tr></table></figure>
<p>Results:</p>
 <img src='https://s4.ax1x.com/2022/01/13/7McKYV.md.png' style='zoom:80%' />
<p><strong><code>wedge</code> 绘制饼图</strong></p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">fig = plt.figure(figsize=(<span class="number">5</span>,<span class="number">5</span>))</span><br><span class="line">ax1 = fig.add_subplot(<span class="number">111</span>)</span><br><span class="line">theta1 = <span class="number">0</span></span><br><span class="line">sizes = [<span class="number">15</span>, <span class="number">30</span>, <span class="number">45</span>, <span class="number">10</span>]</span><br><span class="line">patches = []</span><br><span class="line">patches += [</span><br><span class="line">    Wedge((<span class="number">0.5</span>, <span class="number">0.5</span>), <span class="number">.4</span>, <span class="number">0</span>, <span class="number">54</span>),           </span><br><span class="line">    Wedge((<span class="number">0.5</span>, <span class="number">0.5</span>), <span class="number">.4</span>, <span class="number">54</span>, <span class="number">162</span>),  </span><br><span class="line">    Wedge((<span class="number">0.5</span>, <span class="number">0.5</span>), <span class="number">.4</span>, <span class="number">162</span>, <span class="number">324</span>),           </span><br><span class="line">    Wedge((<span class="number">0.5</span>, <span class="number">0.5</span>), <span class="number">.4</span>, <span class="number">324</span>, <span class="number">360</span>),  </span><br><span class="line">]</span><br><span class="line">colors = <span class="number">100</span> * np.random.rand(<span class="built_in">len</span>(patches))</span><br><span class="line">p = PatchCollection(patches, alpha=<span class="number">0.8</span>)</span><br><span class="line">p.set_array(colors)</span><br><span class="line">ax1.add_collection(p);</span><br></pre></td></tr></table></figure>
<p>Results:</p>
 <img src='https://s4.ax1x.com/2022/01/13/7McuF0.png' style='zoom:80%' />
</li>
</ol>
<h3 id="323-collection"><a class="markdownIt-Anchor" href="#323-collection"></a> 3.2.3 <code>collection</code></h3>
<p><code>collections</code> 类是用来绘制一组对象的集合，<code>collections</code> 有许多不同的子类，如 <code>RegularPolyCollection</code>，<code>CircleCollection</code>, <code>Pathcollection</code>，分别对应不同的集合子类型。其中比较常用的是散点图，它是属于 <code>PathCollection</code> 子类，<code>scatter</code> 方法提供了该类的封装，根据 <code>x</code> 与 <code>y</code> 绘制不同大小或颜色标记的散点图。它的构造方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Axes.scatter(self, x, y, s=<span class="literal">None</span>, c=<span class="literal">None</span>, marker=<span class="literal">None</span>, cmap=<span class="literal">None</span>, norm=<span class="literal">None</span>, vmin=<span class="literal">None</span>, vmax=<span class="literal">None</span>, alpha=<span class="literal">None</span>, linewidths=<span class="literal">None</span>, verts=, edgecolors=<span class="literal">None</span>, , plotnonfinite=<span class="literal">False</span>, data=<span class="literal">None</span>, *kwargs)</span><br></pre></td></tr></table></figure>
<p>主要参数为：</p>
<ul>
<li><strong>x</strong>：数据点x轴的位置</li>
<li><strong>y</strong>：数据点y轴的位置</li>
<li><strong>s</strong>：尺寸大小</li>
<li><strong>c</strong>：可以是单个颜色格式的字符串，也可以是一系列颜色</li>
<li><strong>marker</strong>: 标记的类型</li>
</ul>
<p><strong>用 <code>scatter</code> 绘制散点图</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x = [<span class="number">0</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">10</span>]</span><br><span class="line">y = [<span class="number">10</span>]*<span class="built_in">len</span>(x)</span><br><span class="line">s = [<span class="number">20</span>*<span class="number">2</span>**n <span class="keyword">for</span> n <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(x))]</span><br><span class="line">plt.scatter(x,y,s=s) ;</span><br></pre></td></tr></table></figure>
<p>Results:</p>
<img src='https://s4.ax1x.com/2022/01/13/7Mcewn.md.png' style='zoom:80%' />
<h3 id="324-images"><a class="markdownIt-Anchor" href="#324-images"></a> 3.2.4 <code>images</code></h3>
<p><code>images</code> 是 <code>matplotlib</code> 中绘制 <code>image</code> 图像的类，其构造函数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">matplotlib</span>.<span class="title">image</span>.<span class="title">AxesImage</span>(<span class="params">ax, cmap=<span class="literal">None</span>, norm=<span class="literal">None</span>, interpolation=<span class="literal">None</span>, origin=<span class="literal">None</span>, extent=<span class="literal">None</span>, filternorm=<span class="literal">True</span>, filterrad=<span class="number">4.0</span>, resample=<span class="literal">False</span>, **kwargs</span>)</span></span><br></pre></td></tr></table></figure>
<p>最常用的 <code>imshow</code> 可以根据数组绘制成图像，它的构造函数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">matplotlib.pyplot.imshow(X, cmap=<span class="literal">None</span>, norm=<span class="literal">None</span>, aspect=<span class="literal">None</span>, interpolation=<span class="literal">None</span>, alpha=<span class="literal">None</span>, vmin=<span class="literal">None</span>, vmax=<span class="literal">None</span>, origin=<span class="literal">None</span>, extent=<span class="literal">None</span>, shape=, filternorm=<span class="number">1</span>, filterrad=<span class="number">4.0</span>, imlim=, resample=<span class="literal">None</span>, url=<span class="literal">None</span>, , data=<span class="literal">None</span>, *kwargs)</span><br></pre></td></tr></table></figure>
<p>使用 <code>imshow</code> 画图时首先需要传入一个数组，数组对应的是空间内的像素位置和像素点的值，<code>interpolation</code> 参数可以设置不同的插值方法，具体效果如下:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">methods = [<span class="literal">None</span>, <span class="string">&#x27;none&#x27;</span>, <span class="string">&#x27;nearest&#x27;</span>, <span class="string">&#x27;bilinear&#x27;</span>, <span class="string">&#x27;bicubic&#x27;</span>, <span class="string">&#x27;spline16&#x27;</span>,</span><br><span class="line">           <span class="string">&#x27;spline36&#x27;</span>, <span class="string">&#x27;hanning&#x27;</span>, <span class="string">&#x27;hamming&#x27;</span>, <span class="string">&#x27;hermite&#x27;</span>, <span class="string">&#x27;kaiser&#x27;</span>, <span class="string">&#x27;quadric&#x27;</span>,</span><br><span class="line">           <span class="string">&#x27;catrom&#x27;</span>, <span class="string">&#x27;gaussian&#x27;</span>, <span class="string">&#x27;bessel&#x27;</span>, <span class="string">&#x27;mitchell&#x27;</span>, <span class="string">&#x27;sinc&#x27;</span>, <span class="string">&#x27;lanczos&#x27;</span>]</span><br><span class="line"></span><br><span class="line">grid = np.random.rand(<span class="number">4</span>, <span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">fig, axs = plt.subplots(nrows=<span class="number">3</span>, ncols=<span class="number">6</span>, figsize=(<span class="number">9</span>, <span class="number">6</span>),</span><br><span class="line">                        subplot_kw=&#123;<span class="string">&#x27;xticks&#x27;</span>: [], <span class="string">&#x27;yticks&#x27;</span>: []&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ax, interp_method <span class="keyword">in</span> <span class="built_in">zip</span>(axs.flat, methods):</span><br><span class="line">    ax.imshow(grid, interpolation=interp_method, cmap=<span class="string">&#x27;viridis&#x27;</span>)</span><br><span class="line">    ax.set_title(<span class="built_in">str</span>(interp_method))</span><br><span class="line"></span><br><span class="line">plt.tight_layout();</span><br></pre></td></tr></table></figure>
<p>Results:</p>
<img src='https://s4.ax1x.com/2022/01/13/7Mcmoq.md.png' style='zoom:80%' />
<p><strong>Note</strong>：其中，<code>nrows</code> 和 <code>ncols</code> 分别表示子图的行和列，此处表示 <code>3</code> 行 <code>6</code> 列。返回值 <code>axs</code> 为 <code>18</code> 个子图，因此可以通过 <code>for</code> 循环对其进行遍历，并对各个子图的属性进行修改。</p>
<h2 id="33-object-container-对象容器"><a class="markdownIt-Anchor" href="#33-object-container-对象容器"></a> 3.3 Object container 对象容器</h2>
<p>容器会包含一些 <code>primitives</code>，并且容器还有它自身的属性。<br />
比如 <code>Axes Artist</code>，它是一种容器，它包含了很多 <code>primitives</code>，比如 <code>Line2D</code>，<code>Text</code>；同时，它也有自身的属性，比如 <code>xscal</code>，用来控制X轴是 <code>linear</code> 还是 <code>log</code> 的。</p>
<h3 id="331-figure-容器"><a class="markdownIt-Anchor" href="#331-figure-容器"></a> 3.3.1 <code>Figure</code> 容器</h3>
<p><code>matplotlib.figure.Figure</code> 是 <code>Artist</code> 最顶层的 <code>container</code> -对象容器，它包含了图表中的所有元素。一张图表的背景就是在 <code>Figure.patch</code> 的一个矩形 <code>Rectangle</code>。<br />
当我们向图表添加 <code>Figure.add_subplot()</code> 或者 <code>Figure.add_axes()</code> 元素时，这些都会被添加到 <code>Figure.axes</code> 列表中。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fig = plt.figure()</span><br><span class="line">ax1 = fig.add_subplot(<span class="number">211</span>) <span class="comment"># 作一幅2*1的图，选择第1个子图</span></span><br><span class="line">ax2 = fig.add_axes([<span class="number">0.1</span>, <span class="number">0.1</span>, <span class="number">0.7</span>, <span class="number">0.3</span>]) <span class="comment"># 位置参数，四个数分别代表了(left,bottom,width,height)</span></span><br><span class="line">print(ax1)</span><br><span class="line">print(fig.axes) <span class="comment"># fig.axes 中包含了subplot和axes两个实例, 刚刚添加的</span></span><br></pre></td></tr></table></figure>
<p>Results:</p>
<img src='https://s4.ax1x.com/2022/01/13/7McELj.md.png' style='zoom:80%' />
<ul>
<li>
<p><strong>Note</strong>：</p>
<p>我们发现，这里面得到的两个子图没有对齐，这是为什么呢？因为 <code>add_axes</code> 是以 <code>figure</code> 容器为基准进行对齐的。</p>
  <img src='https://s4.ax1x.com/2022/01/13/7McZes.md.png' style='zoom:80%' />
<p>接下来，为了突出两种方式的区别，我们对图形重新绘制：</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fig = plt.figure()</span><br><span class="line">ax1 = fig.add_subplot(<span class="number">211</span>) <span class="comment"># 作一幅2*1的图，选择第1个子图</span></span><br><span class="line">ax1 = fig.add_subplot(<span class="number">212</span>)</span><br><span class="line">ax2 = fig.add_axes([<span class="number">0.0</span>, <span class="number">0.</span>, <span class="number">0.7</span>, <span class="number">0.3</span>]) <span class="comment"># 位置参数，四个数分别代表了(left,bottom,width,height)</span></span><br><span class="line">print(ax1)</span><br><span class="line">print(fig.axes) <span class="comment"># fig.axes 中包含了subplot和axes两个实例, 刚刚添加的</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/13/7McAyQ.md.png' style='zoom:80%' />
<p>可以发现，两个的基准对齐位置不同，可以理解为，<code>add_subplot</code> 是重新创建了一个 <code>subplot</code> 容器，因此，在基于此函数进行增添子图的时候，是在容器内部进行对齐。而 <code>add_axes</code> 则默认是基于 <code>figure</code> 进行操作和对齐。如果要在这种情况下进行对齐，可以首先获得 <code>subplot</code> 的位置信息。</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">fig = plt.figure()</span><br><span class="line">ax1 = fig.add_subplot(<span class="number">211</span>) <span class="comment"># 作一幅2*1的图，选择第1个子图</span></span><br><span class="line"></span><br><span class="line">position = ax1.get_position()</span><br><span class="line"></span><br><span class="line"><span class="comment">#(x0, y0) and (x1, y1) represent the the point coordinates of the lower left and upper right corner respectively</span></span><br><span class="line">width = position.x1 - position.x0</span><br><span class="line">height = position.y1 - position.y0</span><br><span class="line"></span><br><span class="line">ax2 = fig.add_axes([position.x0, position.y0 - <span class="number">0.4</span>, width, height]) <span class="comment"># 位置参数，四个数分别代表了(left,bottom,width,height)</span></span><br><span class="line">print(ax1)</span><br><span class="line">print(fig.axes) <span class="comment"># fig.axes 中包含了subplot和axes两个实例, 刚刚添加的</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/13/7MckQg.md.png' style='zoom:80%' />
<p><strong>Note</strong>: <code>ax1.get_position</code> 返回一个 <code>Bbox</code> 对象，可以通过其 <code>x0</code>, <code>y0</code>, <code>x1</code> 和 <code>y1</code> 得到左下角和右上角的坐标信息。即：</p>
  <img src='https://s4.ax1x.com/2022/01/13/7McFSS.md.png' style='zoom:80%' />
<p>综上，通过获得位置参数之后，将两张子图进行了对齐。</p>
</li>
</ul>
<p>由于 <code>Figure</code> 维持了 <code>current axes</code>，因此你不应该手动的从 <code>Figure.axes</code> 列表中添加删除元素，而是要通过 <code>Figure.add_subplot()</code>、<code>Figure.add_axes()</code> 来添加元素，通过<code>Figure.delaxes()</code>来删除元素。但是你可以迭代或者访问 <code>Figure.axes</code> 中的 <code>Axes</code>，然后修改这个 <code>Axes</code> 的属性。</p>
<p>比如下面的遍历 <code>axes</code> 里的内容，并且添加网格线：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fig = plt.figure()</span><br><span class="line">ax1 = fig.add_subplot(<span class="number">211</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ax <span class="keyword">in</span> fig.axes:</span><br><span class="line">    ax.grid(<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p>Results:</p>
<img src='https://s4.ax1x.com/2022/01/13/7McPW8.md.png' style='zoom:80%' />
<p><code>Figure</code> 也有它自己的 <code>text</code>、<code>line</code>、<code>patch</code>、<code>image</code>。你可以直接通过 <code>add primitive</code> 语句直接添加。但是注意 <code>Figure</code> 默认的坐标系是以像素为单位，需要转换成 <code>figure</code> 坐标系：<code>(0,0)</code> 表示左下点，<code>(1,1)</code> 表示右上点。</p>
<p><strong>Figure容器的常见属性：</strong></p>
<ul>
<li><code>Figure.patch</code>属性：<code>Figure</code> 的背景矩形</li>
<li><code>Figure.axes</code>属性：一个 <code>Axes</code> 实例的列表（包括 <code>Subplot</code>)</li>
<li><code>Figure.images</code>属性：一个 <code>FigureImages patch</code> 列表</li>
<li><code>Figure.lines</code>属性：一个 <code>Line2D</code> 实例的列表（很少使用）</li>
<li><code>Figure.legends</code>属性：一个 <code>Figure Legend</code> 实例列表（不同于 <code>Axes.legends</code>)</li>
<li><code>Figure.texts</code>属性：一个 <code>Figure Text</code> 实例列表</li>
</ul>
<h3 id="332-axes-坐标系容器"><a class="markdownIt-Anchor" href="#332-axes-坐标系容器"></a> 3.3.2 <code>Axes</code> 坐标系容器</h3>
<p><code>matplotlib.axes.Axes</code> 是 <code>matplotlib</code> 的核心。大量的用于绘图的 <code>Artist</code> 存放在它内部，并且它有许多辅助方法来创建和添加 <code>Artist</code> 给它自己，而且它也有许多赋值方法来访问和修改这些 <code>Artist</code>。</p>
<p>和 <code>Figure</code> 容器类似，<code>Axes</code> 包含了一个 <code>patch</code> 属性，对于笛卡尔坐标系而言，它是一个 <code>Rectangle</code>；对于极坐标而言，它是一个 <code>Circle</code>。这个 <code>patch</code> 属性决定了绘图区域的形状、背景和边框。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fig = plt.figure()</span><br><span class="line">ax = fig.add_subplot(<span class="number">111</span>)</span><br><span class="line">rect = ax.patch  <span class="comment"># axes的patch是一个Rectangle实例</span></span><br><span class="line">rect.set_facecolor(<span class="string">&#x27;green&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>Results:</p>
<img src='https://s4.ax1x.com/2022/01/13/7McCJf.md.png' style='zoom:80%' />
<p><code>Axes</code>有许多方法用于绘图，如<code>.plot()、.text()、.hist()、.imshow()</code>等方法用于创建大多数常见的<code>primitive</code>(如<code>Line2D，Rectangle，Text，Image</code>等等）。在<code>primitives</code>中已经涉及，不再赘述。</p>
<p><code>Subplot</code> 就是一个特殊的 <code>Axes</code>，其实例是位于网格中某个区域的 <code>Subplot</code> 实例。其实你也可以在任意区域创建 <code>Axes</code>，通过下述代码来创建一个任意区域的 <code>Axes</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Figure.add_axes([left,bottom,width,height])</span><br></pre></td></tr></table></figure>
<p>其中，<code>left</code>, <code>bottom</code>, <code>width</code>, <code>height</code> 都是 <code>[0—1]</code> 之间的浮点数，他们代表了相对于 <code>Figure</code> 的坐标。</p>
<p>你不应该直接通过 <code>Axes.lines</code> 和 <code>Axes.patches</code> 列表来添加图表。因为当创建或添加一个对象到图表中时，<code>Axes</code>会做许多自动化的工作:</p>
<ul>
<li>它会设置  <code>Artist</code> 中 <code>figure</code> 和 <code>axes</code> 的属性，同时默认 <code>Axes</code> 的转换；</li>
<li>它也会检视 <code>Artist</code> 中的数据，来更新数据结构，这样数据范围和呈现方式可以根据作图范围自动调整。</li>
</ul>
<p>可以使用Axes的辅助方法 <code>.add_line()</code> 和 <code>.add_patch()</code> 方法来直接添加。</p>
<p>此外，<code>Axes</code> 还包含两个最重要的 <code>Artist container</code>：</p>
<ul>
<li><code>ax.xaxis</code>：<code>XAxis</code> 对象的实例，用于处理 <code>x</code> 轴 <code>tick</code> 以及 <code>label</code> 的绘制；</li>
<li><code>ax.yaxis</code>：<code>YAxis</code> 对象的实例，用于处理 <code>y</code> 轴 <code>tick</code> 以及 <code>label</code> 的绘制;</li>
</ul>
<p><strong>Axes容器</strong>的常见属性有：</p>
<ul>
<li><code>artists</code>:    <code>Artist</code> 实例列表</li>
<li><code>patch</code>:     <code>Axes</code> 所在的矩形实例</li>
<li><code>collections</code>: <code>Collection</code> 实例</li>
<li><code>images</code>:    <code>Axes</code> 图像</li>
<li><code>legends</code>:	  <code>Legend</code> 实例</li>
<li><code>lines</code>:	  <code>Line2D</code> 实例</li>
<li><code>patches</code>:	  <code>Patch</code> 实例</li>
<li><code>texts</code>:	  <code>Text</code> 实例</li>
<li><code>xaxis</code>:	  <code>matplotlib.axis.XAxis</code> 实例</li>
<li><code>yaxis</code>:	  <code>matplotlib.axis.YAxis</code> 实例</li>
</ul>
<h3 id="333-axis-坐标轴容器"><a class="markdownIt-Anchor" href="#333-axis-坐标轴容器"></a> 3.3.3 <code>Axis</code> 坐标轴容器</h3>
<p><code>matplotlib.axis.Axis</code> 实例处理 <code>tick line</code>、<code>grid line</code>、<code>tick label</code> 以及 <code>axis label</code> 的绘制，它包括坐标轴上的刻度线、刻度 <code>label</code>、坐标网格、坐标轴标题。通常可以独立的配置 <code>y</code> 轴的左边刻度以及右边的刻度，也可以独立地配置 <code>x</code> 轴的上边刻度以及下边的刻度。</p>
<p>刻度包括主刻度和次刻度，它们都是 <code>Tick</code> 刻度对象。</p>
<p><code>Axis</code> 也存储了用于自适应、平移以及缩放的 <code>data_interval</code> 和 <code>view_interval</code>。它还有 <code>Locator</code> 实例和 <code>Formatter</code> 实例用于控制刻度线的位置以及刻度 <code>label</code>。</p>
<p>每个 <code>Axis</code> 都有一个 <code>label</code> 属性，也有主刻度列表和次刻度列表。这些 <code>ticks</code> 是 <code>axis.XTick</code>和 <code>axis.YTick</code> 实例，它们包含着 <code>line primitive</code> 以及 <code>text primitive</code> 用来渲染刻度线以及刻度文本。</p>
<p>刻度是动态创建的，只有在需要创建的时候才创建（比如缩放的时候）。<code>Axis</code> 也提供了一些辅助方法来获取刻度文本、刻度线位置等等：</p>
<p>常见的如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 不用print，直接显示结果</span></span><br><span class="line"><span class="keyword">from</span> IPython.core.interactiveshell <span class="keyword">import</span> InteractiveShell</span><br><span class="line">InteractiveShell.ast_node_interactivity = <span class="string">&quot;all&quot;</span></span><br><span class="line"></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line">x = <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">5</span>)</span><br><span class="line">y = [<span class="number">2</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">10</span>]</span><br><span class="line">plt.plot(x, y, <span class="string">&#x27;-&#x27;</span>)</span><br><span class="line"></span><br><span class="line">axis = ax.xaxis <span class="comment"># axis为X轴对象</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>获取刻度线位置</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axis.get_ticklocs()     <span class="comment"># 获取刻度线位置</span></span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array([-0.5,  0. ,  0.5,  1. ,  1.5,  2. ,  2.5,  3. ,  3.5,  4. ,  4.5])</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>获取刻度线 <code>label</code> 列表</p>
<p>返回一个 <code>Text</code> 实例的列表，可以通过 <code>minor=True|False</code> 关键字参数控制输出 <code>minor</code> 还是 <code>major</code> 的 <code>tick label</code>。</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axis.get_ticklabels()</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[Text(-0.5, 0, &#39;−0.5&#39;),</span><br><span class="line"> Text(0.0, 0, &#39;0.0&#39;),</span><br><span class="line"> Text(0.5, 0, &#39;0.5&#39;),</span><br><span class="line"> Text(1.0, 0, &#39;1.0&#39;),</span><br><span class="line"> Text(1.5, 0, &#39;1.5&#39;),</span><br><span class="line"> Text(2.0, 0, &#39;2.0&#39;),</span><br><span class="line"> Text(2.5, 0, &#39;2.5&#39;),</span><br><span class="line"> Text(3.0, 0, &#39;3.0&#39;),</span><br><span class="line"> Text(3.5, 0, &#39;3.5&#39;),</span><br><span class="line"> Text(4.0, 0, &#39;4.0&#39;),</span><br><span class="line"> Text(4.5, 0, &#39;4.5&#39;)]</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>获取刻度线列表</p>
<p>一个 <code>Line2D</code> 实例的列表。可以通过 <code>minor=True|False</code> 关键字参数控制输出 <code>minor</code> 还是 <code>major</code> 的 <code>tick line</code>。</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axis.get_ticklines()    <span class="comment"># 获取刻度线列表(</span></span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a list of 22 Line2D ticklines objects&gt;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>获取轴刻度间隔</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axis.get_data_interval()</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array([0., 4.])</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>获取轴视角（位置）的间隔</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axis.get_view_interval()</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array([-0.2,  4.2])</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>下面的例子展示了如何调整一些轴和刻度的属性(忽略美观度，仅作调整参考)：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">fig = plt.figure() <span class="comment"># 创建一个新图表</span></span><br><span class="line">rect = fig.patch   <span class="comment"># 矩形实例并将其设为黄色</span></span><br><span class="line">rect.set_facecolor(<span class="string">&#x27;lightgoldenrodyellow&#x27;</span>)</span><br><span class="line"></span><br><span class="line">ax1 = fig.add_axes([<span class="number">0.1</span>, <span class="number">0.3</span>, <span class="number">0.4</span>, <span class="number">0.4</span>]) <span class="comment"># 创一个axes对象，从(0.1,0.3)的位置开始，宽和高都为0.4，</span></span><br><span class="line">rect = ax1.patch   <span class="comment"># ax1的矩形设为灰色</span></span><br><span class="line">rect.set_facecolor(<span class="string">&#x27;lightslategray&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> label <span class="keyword">in</span> ax1.xaxis.get_ticklabels():</span><br><span class="line">    <span class="comment"># 调用x轴刻度标签实例，是一个text实例</span></span><br><span class="line">    label.set_color(<span class="string">&#x27;red&#x27;</span>) <span class="comment"># 颜色</span></span><br><span class="line">    label.set_rotation(<span class="number">45</span>) <span class="comment"># 旋转角度</span></span><br><span class="line">    label.set_fontsize(<span class="number">16</span>) <span class="comment"># 字体大小</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> ax1.yaxis.get_ticklines():</span><br><span class="line">    <span class="comment"># 调用y轴刻度线条实例, 是一个Line2D实例</span></span><br><span class="line">    line.set_color(<span class="string">&#x27;green&#x27;</span>)    <span class="comment"># 颜色</span></span><br><span class="line">    line.set_markersize(<span class="number">25</span>)    <span class="comment"># marker大小</span></span><br><span class="line">    line.set_markeredgewidth(<span class="number">2</span>)<span class="comment"># marker粗细</span></span><br></pre></td></tr></table></figure>
<p>Results:</p>
<img src='https://s4.ax1x.com/2022/01/13/7McSot.png' style='zoom:80%' />
<h3 id="334-tick-容器"><a class="markdownIt-Anchor" href="#334-tick-容器"></a> 3.3.4 <code>Tick</code> 容器</h3>
<p><code>matplotlib.axis.Tick</code> 是从 <code>Figure</code> 到 <code>Axes</code> 到 <code>Axis</code> 到 <code>Tick</code> 中最末端的容器对象。<code>Tick</code> 包含了 <code>tick</code>、<code>grid line</code> 实例以及对应的 <code>label</code>。</p>
<p>所有的这些都可以通过 <code>Tick</code> 的属性获取，常见的 <code>tick</code> 属性有  ：</p>
<ul>
<li><code>Tick.tick1line</code>：<code>Line2D</code> 实例</li>
<li><code>Tick.tick2line</code>：<code>Line2D</code> 实例</li>
<li><code>Tick.gridline</code>：<code>Line2D</code> 实例</li>
<li><code>Tick.label1</code>：<code>Text</code> 实例</li>
<li><code>Tick.label2</code>：<code>Text</code> 实例</li>
</ul>
<p>其中，<code>y</code> 轴分为左右两个，因此 <code>tick1</code> 对应左侧的轴；<code>tick2</code> 对应右侧的轴。<br />
<code>x</code> 轴分为上下两个，因此 <code>tick1</code> 对应下侧的轴；<code>tick2</code> 对应上侧的轴。</p>
<p>下面的例子展示了，如何将 <code>Y</code> 轴右边轴设为主轴，并将标签设置为美元符号且为绿色：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">fig, ax = plt.subplots()</span><br><span class="line">ax.plot(<span class="number">100</span>*np.random.rand(<span class="number">20</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置ticker的显示格式</span></span><br><span class="line">formatter = matplotlib.ticker.FormatStrFormatter(<span class="string">&#x27;$%1.2f&#x27;</span>)</span><br><span class="line">ax.yaxis.set_major_formatter(formatter)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置ticker的参数，右侧为主轴，颜色为绿色</span></span><br><span class="line">ax.yaxis.set_tick_params(which=<span class="string">&#x27;major&#x27;</span>, labelcolor=<span class="string">&#x27;green&#x27;</span>,</span><br><span class="line">                         labelleft=<span class="literal">False</span>, labelright=<span class="literal">True</span>);</span><br></pre></td></tr></table></figure>
<p>Results:</p>
<img src='https://s4.ax1x.com/2022/01/13/7Mc9FP.md.png' style='zoom:80%' />
<h2 id="34-thinking"><a class="markdownIt-Anchor" href="#34-thinking"></a> 3.4 Thinking</h2>
<ol>
<li>
<p><code>primitives</code> 和 <code>container</code> 的区别和联系是什么，分别用于控制可视化图表中的哪些要素</p>
<ul>
<li><code>container</code> 是容器，可以理解为一个盒子，用来盛放 <code>Axis</code> 坐标轴、<code>Axes</code> 坐标系 和 <code>Figure</code> 图形；</li>
<li><code>primitives</code> 表示基本要素，包括 <code>Line2D</code>, <code>Rectangle</code>, <code>Text</code>, <code>AxesImage</code> 这些基本的绘图要素。</li>
</ul>
<p>它们之间的关系是使用 <code>Figure</code> 容器创建一个或多个 <code>Axes</code> 坐标轴容器或者 <code>Subplot</code> 实例，然后用 <code>Axes</code> 坐标轴实例的帮助方法创建 <code>primitives</code>要素。接下来，我们用一个例子来演示。</p>
<ul>
<li>
<p>Create a <code>Figure</code> instance</p>
<p>We create a <code>Figure</code> instance using <code>matplotlib.pyplot.figure()</code>, which is a convenience method for instantiating <code>Figure</code> instances and connecting them with user interface or drawing toolkit <code>FigureCanvas</code>.</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">fig = plt.figure()</span><br><span class="line">ax = fig.add_subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>) <span class="comment"># two rows, one column, first plot</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">fig2 = plt.figure()</span><br><span class="line">ax2 = fig2.add_axes([<span class="number">0.15</span>, <span class="number">0.1</span>, <span class="number">0.7</span>, <span class="number">0.3</span>])</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/13/7M6zdI.md.png' style='zoom:80%' />
</li>
</ul>
</li>
<li>
<p>使用提供的drug数据集，对第一列yyyy和第二列state分组求和，画出下面折线图。PA加粗标黄，其他为灰色。图标题和横纵坐标轴标题，以及线的文本暂不做要求。</p>
<p>数据下载：<a id="download" href="https://www.aliyundrive.com/s/5ny6LPYdyiu" target="_blank"><i class="fa fa-download"></i><span> Download Now </span> </a></p>
 <img src='https://img-blog.csdnimg.cn/20210523162430365.png' style='zoom:80%' />
<p>实现代码如下：</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">data = pd.read_csv(<span class="string">&#x27;./data/Drugs.txt&#x27;</span>, encoding = <span class="string">&#x27;utf8&#x27;</span>, sep = <span class="string">&#x27;\t&#x27;</span>)</span><br><span class="line">plot_var = data[<span class="string">&#x27;State&#x27;</span>].unique()</span><br><span class="line">plot_data = data.groupby([<span class="string">&#x27;State&#x27;</span>, <span class="string">&#x27;YYYY&#x27;</span>])[<span class="string">&#x27;DrugReports&#x27;</span>].<span class="built_in">sum</span>()</span><br><span class="line">fig = plt.figure()</span><br><span class="line">ax = fig.add_axes([<span class="number">0.1</span>, <span class="number">0.1</span>, <span class="number">0.8</span>, <span class="number">0.6</span>])</span><br><span class="line">ax.grid()</span><br><span class="line"><span class="comment"># rect = ax.patch</span></span><br><span class="line"><span class="comment"># rect.set_facecolor(&#x27;grey&#x27;, alpha = 0.5)</span></span><br><span class="line"><span class="keyword">for</span> var <span class="keyword">in</span> plot_var:</span><br><span class="line">    <span class="keyword">if</span> var != <span class="string">&#x27;PA&#x27;</span>:</span><br><span class="line">        ax.plot(plot_data[var], <span class="string">&#x27;grey&#x27;</span>);</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        ax.plot(plot_data[var], <span class="string">&#x27;orange&#x27;</span>, lw = <span class="number">3</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>Results:</p>
 <img src='https://s4.ax1x.com/2022/01/13/7M6xeA.md.png' style='zoom:80%' />
</li>
<li>
<p>分别用一组长方形柱和填充面积的方式模仿画出下图，函数 y = -1 * (x - 2) * (x - 8) +10 在区间[2,9]的积分面积。如下图所示：</p>
 <img src='https://img-blog.csdnimg.cn/20201126105910781.png' style='zoom:80%' />
 <img src='https://img-blog.csdnimg.cn/20201126105910780.png' style='zoom:80%' />
</li>
</ol>
<ul>
<li>
<p>针对第一个长方形柱形</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">x = np.linspace(<span class="number">0</span>, <span class="number">10</span>, <span class="number">50</span>)</span><br><span class="line">y = -<span class="number">1</span> * (x - <span class="number">2</span>) * (x - <span class="number">8</span>) +<span class="number">10</span></span><br><span class="line"></span><br><span class="line">fig = plt.figure()</span><br><span class="line"></span><br><span class="line">ax = fig.add_subplot(<span class="number">111</span>)</span><br><span class="line">plt.plot(x, y)</span><br><span class="line">plt.ylim((<span class="number">0</span>, <span class="number">20</span>))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span>(<span class="params">i, num_bars</span>):</span></span><br><span class="line">    step = <span class="number">7</span>/num_bars</span><br><span class="line">    x = <span class="number">2</span> + i * step</span><br><span class="line">    <span class="keyword">if</span> i &lt; num_bars/<span class="number">2</span>:</span><br><span class="line">        y = -<span class="number">1</span> * (x - <span class="number">2</span>) * (x - <span class="number">8</span>) +<span class="number">10</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        x1 = <span class="number">2</span> + (i+<span class="number">1</span>) * step</span><br><span class="line">        y = -<span class="number">1</span> * (x1 - <span class="number">2</span>) * (x1 - <span class="number">8</span>) +<span class="number">10</span></span><br><span class="line">    <span class="keyword">return</span>  x, y</span><br><span class="line"></span><br><span class="line">num_bars = <span class="number">56</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,num_bars):</span><br><span class="line">    <span class="keyword">if</span> i%<span class="number">2</span> == <span class="number">0</span>:</span><br><span class="line">        x1, y1 = func(i, num_bars)</span><br><span class="line">        rect =  plt.Rectangle((x1,<span class="number">0</span>),<span class="number">7</span>/num_bars, y1)</span><br><span class="line">        ax.add_patch(rect)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/13/7M6XsH.md.png' style='zoom:80%' />
<p><strong>Note</strong>：为了使图形更为美观，此处对对称轴两端的矩形高度做了调整，左边的矩形高度等于矩形左边坐标轴所对应的函数值，而右边则取右边坐标轴对应的函数值。</p>
</li>
<li>
<p>栅栏面积填充</p>
<p>如果觉得矩形与曲线之间有一定间隔，不美观，则可以使用 <code>fill_between</code> 函数进行填充，这样得到的填充区为坐标轴与曲线之间的无缝连接区域：</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">x = np.linspace(<span class="number">0</span>, <span class="number">10</span>, <span class="number">1000</span>)</span><br><span class="line">y = -<span class="number">1</span> * (x - <span class="number">2</span>) * (x - <span class="number">8</span>) +<span class="number">10</span></span><br><span class="line"></span><br><span class="line">fig = plt.figure()</span><br><span class="line"></span><br><span class="line">ax = fig.add_subplot(<span class="number">111</span>)</span><br><span class="line">plt.plot(x, y);</span><br><span class="line">plt.ylim((<span class="number">0</span>, <span class="number">20</span>));</span><br><span class="line"></span><br><span class="line">num_bars = <span class="number">56</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,num_bars):</span><br><span class="line">    <span class="keyword">if</span> i%<span class="number">2</span> == <span class="number">0</span>:</span><br><span class="line">        step = <span class="number">7</span>/num_bars</span><br><span class="line">        x1 = <span class="number">2</span> + i * step</span><br><span class="line">        plt.fill_between(x, y, where=(x1 &lt; x) &amp; (x &lt; x1+step), facecolor=<span class="string">&#x27;pink&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/13/7M6OQe.md.png' style='zoom:80%' />
<p><strong>Note</strong>：需要注意的是：当设置的 <code>num_bars</code> 条形的数量较大时，要控制 <code>np.linspace</code> 函数生成的 <code>x</code> 值要足够的多，才能生成正确的图形，因为 <code>x</code> 数量较少时，函数找不到参照的区域，会导致生成图形不对，如下图所示（将 <code>1000</code> 改为 <code>100</code>）：</p>
  <img src='https://s4.ax1x.com/2022/01/13/7M6jLd.md.png' style='zoom:80%' />
</li>
<li>
<p>面积填充</p>
<p>类似的，借助 <code>fill_between</code> 函数，可以直接进行区域面积填充，如：</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">x = np.linspace(<span class="number">0</span>, <span class="number">10</span>, <span class="number">50</span>)</span><br><span class="line">y = -<span class="number">1</span> * (x - <span class="number">2</span>) * (x - <span class="number">8</span>) +<span class="number">10</span></span><br><span class="line"></span><br><span class="line">fig = plt.figure()</span><br><span class="line"></span><br><span class="line">ax = fig.add_subplot(<span class="number">111</span>)</span><br><span class="line">plt.plot(x, y);</span><br><span class="line">plt.ylim((<span class="number">0</span>, <span class="number">20</span>));</span><br><span class="line"></span><br><span class="line">plt.fill_between(x, y, where=(<span class="number">2</span> &lt; x) &amp; (x &lt; <span class="number">9</span>), facecolor=<span class="string">&#x27;pink&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/13/7M6qzD.md.png' style='zoom:80%' />
</li>
</ul>
<h2 id="35-reference"><a class="markdownIt-Anchor" href="#35-reference"></a> 3.5 Reference</h2>
<ol>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/32693665">matplotlib设计的基本逻辑</a></li>
<li><a target="_blank" rel="noopener" href="https://www.bookstack.cn/read/huaxiaozhuan-ai/spilt.2.333f5abdbabf383d.md">AI算法工程师手册</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/datawhalechina/fantastic-matplotlib">Fantastic-Matplotlib</a></li>
</ol>
<h1 id="4-布局格式定方圆"><a class="markdownIt-Anchor" href="#4-布局格式定方圆"></a> 4. 布局格式定方圆</h1>
<ul>
<li>
<p>Import modules</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]   <span class="comment">#用来正常显示中文标签</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span>   <span class="comment">#用来正常显示负号</span></span><br><span class="line"><span class="comment"># plt.figure(dpi=300,figsize=(12,8))</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;figure.figsize&#x27;</span>]=(<span class="number">12</span>,<span class="number">8</span>)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="41-subplot"><a class="markdownIt-Anchor" href="#41-subplot"></a> 4.1 Subplot</h2>
<h3 id="411-使用-pltsubplots-绘制均匀状态下的子图"><a class="markdownIt-Anchor" href="#411-使用-pltsubplots-绘制均匀状态下的子图"></a> 4.1.1 使用 <code>plt.subplots</code> 绘制均匀状态下的子图</h3>
<p>返回元素分别是画布和子图构成的列表，第一个数字为行，第二个为列，默认值都为 <code>1</code>。构造函数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">subplots(nrows=<span class="number">1</span>, ncols=<span class="number">1</span>, *, sharex=<span class="literal">False</span>, sharey=<span class="literal">False</span>, squeeze=<span class="literal">True</span>, subplot_kw=<span class="literal">None</span>, gridspec_kw=<span class="literal">None</span>, **fig_kw)</span><br></pre></td></tr></table></figure>
<p><strong>参数说明</strong>：</p>
<ul>
<li>
<p><code>nrows</code>：行</p>
</li>
<li>
<p><code>ncols</code>：列</p>
</li>
<li>
<p><code>sharex</code> and <code>sharey</code>：分别表示是否共享横轴和纵轴刻度</p>
</li>
<li>
<p><code>tight_layout</code> ：该函数可以调整子图的相对大小使字符不会重叠</p>
</li>
<li>
<p>Case：</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">fig, axs = plt.subplots(<span class="number">2</span>, <span class="number">5</span>, figsize=(<span class="number">10</span>, <span class="number">4</span>), sharex=<span class="literal">True</span>, sharey=<span class="literal">True</span>)</span><br><span class="line">fig.suptitle(<span class="string">&#x27;样例1&#x27;</span>, size=<span class="number">20</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">        axs[i][j].scatter(np.random.randn(<span class="number">10</span>), np.random.randn(<span class="number">10</span>))</span><br><span class="line">        axs[i][j].set_title(<span class="string">&#x27;第%d行，第%d列&#x27;</span>%(i+<span class="number">1</span>,j+<span class="number">1</span>))</span><br><span class="line">        axs[i][j].set_xlim(-<span class="number">5</span>,<span class="number">5</span>)</span><br><span class="line">        axs[i][j].set_ylim(-<span class="number">5</span>,<span class="number">5</span>)</span><br><span class="line">        <span class="keyword">if</span> i==<span class="number">1</span>: axs[i][j].set_xlabel(<span class="string">&#x27;横坐标&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> j==<span class="number">0</span>: axs[i][j].set_ylabel(<span class="string">&#x27;纵坐标&#x27;</span>)</span><br><span class="line">fig.tight_layout()</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/14/714z1s.png' style='zoom:80%' />
</li>
</ul>
<p><code>subplots</code> 是基于 <code>OO</code> 模式的写法，显式地创建一个或多个 <code>axes</code> 对象，然后在对应地子图对象中进行绘图操作。还有种方式是使用 <code>subplot</code> 这样基于 <code>pyplot</code> 模式的写法，每次在制定位置新建一个子图，并且之后的绘图操作都会只想当前子图，本质上 <code>subplot</code> 也是 <code>Figure.add_subplot</code> 的一种封装。</p>
<p>在调用 <code>subplot</code> 时一般需要传入三位数字，分别代表总行数，总列数，当前子图的 <code>index</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">plt.figure()</span><br><span class="line"><span class="comment"># 子图1</span></span><br><span class="line">plt.subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">plt.plot([<span class="number">1</span>,<span class="number">2</span>], <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line"><span class="comment"># 子图2</span></span><br><span class="line">plt.subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">plt.plot([<span class="number">1</span>,<span class="number">2</span>], <span class="string">&#x27;b&#x27;</span>)</span><br><span class="line"><span class="comment">#子图3</span></span><br><span class="line">plt.subplot(<span class="number">224</span>)  <span class="comment"># 当三位数都小于10时，可以省略中间的逗号，这行命令等价于plt.subplot(2,2,4)</span></span><br><span class="line">plt.plot([<span class="number">1</span>,<span class="number">3</span>], <span class="string">&#x27;g&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>Results:</p>
<img src='https://s4.ax1x.com/2022/01/14/714xpj.png' style='zoom:80%' />
<ul>
<li>
<p>极坐标 <code>projection</code></p>
<p>除了常规的直角坐标系，也可以通过 <code>projection</code> 方法创建极坐标系下的图表</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">N = <span class="number">150</span></span><br><span class="line">r = <span class="number">2</span> * np.random.rand(N)</span><br><span class="line">theta = <span class="number">2</span> * np.pi * np.random.rand(N)</span><br><span class="line">area = <span class="number">200</span> * r**<span class="number">2</span></span><br><span class="line">colors = theta</span><br><span class="line"></span><br><span class="line">plt.subplot(projection=<span class="string">&#x27;polar&#x27;</span>)</span><br><span class="line">plt.scatter(theta, r, c=colors, s=area, cmap=<span class="string">&#x27;hsv&#x27;</span>, alpha=<span class="number">0.75</span>);</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/14/714jhQ.png' style='zoom:80%' />
</li>
<li>
<p>思考：如何用 <code>GridSpec</code> 绘制非均匀子图</p>
<p>可以借助上一章所学习的楔形图来绘制玫瑰图，为了简单，此处我们随机生成 <code>36</code> 个分支，每个分支的长度从 <code>0.1</code> 开始，逐步增加 <code>0.01</code>，最终生成如下所示的玫瑰图：</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> matplotlib.patches <span class="keyword">import</span> Wedge</span><br><span class="line"><span class="keyword">from</span> matplotlib.collections <span class="keyword">import</span> PatchCollection</span><br><span class="line"></span><br><span class="line">fig = plt.figure(figsize=(<span class="number">9</span>,<span class="number">9</span>))</span><br><span class="line">ax1 = fig.add_subplot(<span class="number">111</span>)</span><br><span class="line">theta1 = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">num = <span class="number">36</span></span><br><span class="line">patches = []</span><br><span class="line"></span><br><span class="line">patches = [</span><br><span class="line">    Wedge((<span class="number">0.5</span>, <span class="number">0.5</span>), <span class="number">0.01</span> + <span class="number">0.01</span>*i, i* <span class="number">360</span>/num, (<span class="number">1</span> + i) * <span class="number">360</span>/num) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">colors = <span class="number">100</span> * np.random.rand(<span class="built_in">len</span>(patches))</span><br><span class="line">p = PatchCollection(patches, alpha=<span class="number">0.8</span>)</span><br><span class="line">p.set_array(colors)</span><br><span class="line">ax1.add_collection(p);</span><br></pre></td></tr></table></figure>
<p>Result:</p>
  <img src='https://s4.ax1x.com/2022/01/14/714Xtg.png' style='zoom:80%' />
</li>
</ul>
<h3 id="412-使用-gridspec-绘制非均匀子图"><a class="markdownIt-Anchor" href="#412-使用-gridspec-绘制非均匀子图"></a> 4.1.2 使用 <code>GridSpec</code> 绘制非均匀子图</h3>
<p>所谓的非均匀包含两层含义，第一是指图的比例大小不同但没有跨行或者跨列，第二是指图为跨列或跨行状态。利用 <code>add_gridspec</code> 可以制定相对宽度比例 <code>width_ratios</code> 和相对高度比例参数 <code>height_ratios</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">fig = plt.figure(figsize=(<span class="number">12</span>, <span class="number">5</span>))</span><br><span class="line">spec = fig.add_gridspec(nrows=<span class="number">2</span>, ncols=<span class="number">5</span>, width_ratios=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>], height_ratios=[<span class="number">1</span>,<span class="number">3</span>])</span><br><span class="line">fig.suptitle(<span class="string">&#x27;样例2&#x27;</span>, size=<span class="number">20</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">        ax = fig.add_subplot(spec[i, j])</span><br><span class="line">        ax.scatter(np.random.randn(<span class="number">10</span>), np.random.randn(<span class="number">10</span>))</span><br><span class="line">        ax.set_title(<span class="string">&#x27;第%d行，第%d列&#x27;</span>%(i+<span class="number">1</span>,j+<span class="number">1</span>))</span><br><span class="line">        <span class="keyword">if</span> i==<span class="number">1</span>: ax.set_xlabel(<span class="string">&#x27;横坐标&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> j==<span class="number">0</span>: ax.set_ylabel(<span class="string">&#x27;纵坐标&#x27;</span>)</span><br><span class="line">fig.tight_layout()</span><br></pre></td></tr></table></figure>
<p>Results：</p>
<img src='https://s4.ax1x.com/2022/01/14/714OAS.png' style='zoom:80%' />
<p>在上面的例子中出现了 <code>spec[i, j]</code> 的用法，事实上通过切片就可以实现子图的合并而达到跨图的功能。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">fig = plt.figure(figsize=(<span class="number">10</span>, <span class="number">4</span>))</span><br><span class="line">spec = fig.add_gridspec(nrows=<span class="number">2</span>, ncols=<span class="number">6</span>,</span><br><span class="line">        width_ratios=[<span class="number">2</span>,<span class="number">2.5</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">1.5</span>,<span class="number">2</span>], height_ratios=[<span class="number">1</span>,<span class="number">2</span>])</span><br><span class="line">fig.suptitle(<span class="string">&#x27;样例3&#x27;</span>, size=<span class="number">20</span>)</span><br><span class="line"><span class="comment"># sub1</span></span><br><span class="line">ax = fig.add_subplot(spec[<span class="number">0</span>, :<span class="number">3</span>])</span><br><span class="line">ax.scatter(np.random.randn(<span class="number">10</span>), np.random.randn(<span class="number">10</span>))</span><br><span class="line"><span class="comment"># sub2</span></span><br><span class="line">ax = fig.add_subplot(spec[<span class="number">0</span>, <span class="number">3</span>:<span class="number">5</span>])</span><br><span class="line">ax.scatter(np.random.randn(<span class="number">10</span>), np.random.randn(<span class="number">10</span>))</span><br><span class="line"><span class="comment"># sub3</span></span><br><span class="line">ax = fig.add_subplot(spec[:, <span class="number">5</span>])</span><br><span class="line">ax.scatter(np.random.randn(<span class="number">10</span>), np.random.randn(<span class="number">10</span>))</span><br><span class="line"><span class="comment"># sub4</span></span><br><span class="line">ax = fig.add_subplot(spec[<span class="number">1</span>, <span class="number">0</span>])</span><br><span class="line">ax.scatter(np.random.randn(<span class="number">10</span>), np.random.randn(<span class="number">10</span>))</span><br><span class="line"><span class="comment"># sub5</span></span><br><span class="line">ax = fig.add_subplot(spec[<span class="number">1</span>, <span class="number">1</span>:<span class="number">5</span>])</span><br><span class="line">ax.scatter(np.random.randn(<span class="number">10</span>), np.random.randn(<span class="number">10</span>))</span><br><span class="line">fig.tight_layout()</span><br></pre></td></tr></table></figure>
<p>Results：</p>
<img src='https://s4.ax1x.com/2022/01/14/714q78.png' style='zoom:80%' />
<h2 id="42-子图上的方法"><a class="markdownIt-Anchor" href="#42-子图上的方法"></a> 4.2 子图上的方法</h2>
<p>补充一些子图的用法，常用直线的画法为：<code>axhlive</code>, <code>axvline</code> 和 <code>axline</code> (horizontal, vertical and any)</p>
<ul>
<li>
<p>构造函数：</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">axhline(y=<span class="number">0</span>, xmin=<span class="number">0</span>, xmax=<span class="number">1</span>, **kwargs)</span><br><span class="line">axvline(x=<span class="number">0</span>, ymin=<span class="number">0</span>, ymax=<span class="number">1</span>, **kwargs)</span><br><span class="line">axline(xy1, xy2=<span class="literal">None</span>, *, slope=<span class="literal">None</span>, **kwargs)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>Cases</strong>:</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fig, ax = plt.subplots(figsize=(<span class="number">4</span>,<span class="number">3</span>))</span><br><span class="line">ax.axhline(<span class="number">0.5</span>,<span class="number">0.2</span>,<span class="number">0.8</span>)</span><br><span class="line">ax.axvline(<span class="number">0.5</span>,<span class="number">0.2</span>,<span class="number">0.8</span>)</span><br><span class="line">ax.axline([<span class="number">0.3</span>,<span class="number">0.3</span>],[<span class="number">0.7</span>,<span class="number">0.7</span>]);</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/14/714b0f.png' style='zoom:80%' />
</li>
<li>
<p>使用 <code>grid</code> 添加灰色网格</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fig, ax = plt.subplots(figsize=(<span class="number">12</span>,<span class="number">8</span>))</span><br><span class="line">ax.grid(<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/14/714HnP.png' style='zoom:80%' />
</li>
<li>
<p>使用 <code>set_xscale</code> 设置坐标轴的规度（指对数坐标等）</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">fig, axs = plt.subplots(<span class="number">1</span>, <span class="number">2</span>, figsize=(<span class="number">12</span>, <span class="number">4</span>))</span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>):</span><br><span class="line">    axs[j].plot(<span class="built_in">list</span>(<span class="string">&#x27;abcd&#x27;</span>), [<span class="number">10</span>**i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>)])</span><br><span class="line">    <span class="keyword">if</span> j==<span class="number">0</span>:</span><br><span class="line">        axs[j].set_yscale(<span class="string">&#x27;log&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">fig.tight_layout()</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/14/714TXt.png' style='zoom:80%' />
</li>
</ul>
<h2 id="43-thinking"><a class="markdownIt-Anchor" href="#43-thinking"></a> 4.3 Thinking</h2>
<h3 id="431-利用数据画出每个月的月温度曲线"><a class="markdownIt-Anchor" href="#431-利用数据画出每个月的月温度曲线"></a> 4.3.1 利用数据，画出每个月的月温度曲线</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ex1 = pd.read_csv(<span class="string">&#x27;data/layout_ex1.csv&#x27;</span>)</span><br><span class="line">ex1[<span class="string">&#x27;Year&#x27;</span>] = ex1[<span class="string">&#x27;Time&#x27;</span>].apply(<span class="keyword">lambda</span> x: x.split(<span class="string">&#x27;-&#x27;</span>)[<span class="number">0</span>])</span><br><span class="line">ex1[<span class="string">&#x27;Month&#x27;</span>] = ex1[<span class="string">&#x27;Time&#x27;</span>].apply(<span class="keyword">lambda</span> x: x.split(<span class="string">&#x27;-&#x27;</span>)[<span class="number">1</span>])</span><br><span class="line">plot_data = ex1.groupby([<span class="string">&#x27;Year&#x27;</span>, <span class="string">&#x27;Month&#x27;</span>])[<span class="string">&#x27;Temperature&#x27;</span>].<span class="built_in">sum</span>()</span><br><span class="line"></span><br><span class="line">figs, axs = plt.subplots(<span class="number">2</span>, <span class="number">5</span>, figsize=(<span class="number">12</span>, <span class="number">2</span>), sharex=<span class="literal">True</span>, sharey=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">        year = <span class="built_in">str</span>(i*<span class="number">2</span> + j + <span class="number">1981</span>)</span><br><span class="line">        axs[i][j].plot(plot_data[year])</span><br><span class="line">        axs[i][j].set_xticklabels(labels = ex1[<span class="string">&#x27;Year&#x27;</span>].index, fontsize = <span class="number">8</span>)</span><br></pre></td></tr></table></figure>
<p>Results:</p>
<img src='https://s4.ax1x.com/2022/01/14/714o6I.png' style='zoom:80%' />
<h3 id="432-用两种方式画出数据的散点图和边际分布"><a class="markdownIt-Anchor" href="#432-用两种方式画出数据的散点图和边际分布"></a> 4.3.2. 用两种方式画出数据的散点图和边际分布</h3>
<ul>
<li>
<p>方式一：使用 <code>gridspec</code> 方式</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">my_data_x, my_data_y = np.random.randn(<span class="number">2</span>, <span class="number">150</span>)</span><br><span class="line"><span class="comment"># my_data_y = np.random.randn(2, 150)</span></span><br><span class="line"></span><br><span class="line">fig = plt.figure(figsize=(<span class="number">10</span>,<span class="number">10</span>))</span><br><span class="line">spec = fig.add_gridspec(nrows = <span class="number">2</span>, ncols = <span class="number">2</span>, width_ratios = [<span class="number">5</span>, <span class="number">1</span>], height_ratios = [<span class="number">1</span>, <span class="number">5</span>])</span><br><span class="line"></span><br><span class="line">ax1 = fig.add_subplot(spec[<span class="number">0</span>, <span class="number">0</span>])</span><br><span class="line">ax1.hist(my_data_x, density = <span class="literal">True</span>, rwidth = <span class="number">0.8</span>)</span><br><span class="line">ax1.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Scatter</span></span><br><span class="line">ax2 = fig.add_subplot(spec[<span class="number">1</span>, <span class="number">0</span>])</span><br><span class="line">ax2.scatter(my_data_x, my_data_y)</span><br><span class="line">ax2.set_xlabel(<span class="string">&quot;my_data_x&quot;</span>)</span><br><span class="line">ax2.set_ylabel(<span class="string">&quot;my_data_y&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">ax3 = fig.add_subplot(spec[<span class="number">1</span>, <span class="number">1</span>])</span><br><span class="line">ax3.hist(my_data_y, orientation = <span class="string">&#x27;horizontal&#x27;</span>, density = <span class="literal">True</span>, rwidth = <span class="number">0.9</span>)</span><br><span class="line">ax3.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line"></span><br><span class="line">fig.tight_layout()</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/14/714fte.png' style='zoom:80%' />
<p>此处也可以不设置 <code>width_ratios</code> 和 <code>height_ratios</code>，而是选择生成一个 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>6</mn><mo>×</mo><mn>6</mn></mrow><annotation encoding="application/x-tex">6\times 6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">6</span></span></span></span> 的网格， 然后通过跨表格操作生成图形。</p>
  <img src='https://s4.ax1x.com/2022/01/14/714I1A.md.png' style='zoom:80%' />
<p>代码：</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">fig = plt.figure(figsize=(<span class="number">8</span>, <span class="number">8</span>))</span><br><span class="line">spec = fig.add_gridspec(nrows=<span class="number">6</span>, ncols=<span class="number">6</span>)  <span class="comment"># (nrows,ncols) == figsize</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#hist plot1</span></span><br><span class="line">ax1 = fig.add_subplot(spec[<span class="number">0</span>:<span class="number">1</span>,<span class="number">0</span>:<span class="number">5</span>])</span><br><span class="line">ax1.hist(my_data_x,density = <span class="literal">True</span>,rwidth = <span class="number">0.9</span>)  <span class="comment"># rwidth控制竹子宽度</span></span><br><span class="line">ax1.axis(<span class="string">&quot;off&quot;</span>)</span><br><span class="line"><span class="comment">#scatter plot</span></span><br><span class="line">ax2 = fig.add_subplot(spec[<span class="number">1</span>:<span class="number">6</span>,<span class="number">0</span>:<span class="number">5</span>])</span><br><span class="line">ax2.scatter(my_data_x, my_data_y)</span><br><span class="line">ax2.set_xlabel(<span class="string">&quot;my_data_x&quot;</span>)</span><br><span class="line">ax2.set_ylabel(<span class="string">&quot;my_data_y&quot;</span>)</span><br><span class="line">ax2.grid()</span><br><span class="line"><span class="comment">#hist plot2</span></span><br><span class="line">ax3 = fig.add_subplot(spec[<span class="number">1</span>:<span class="number">6</span>,<span class="number">5</span>])</span><br><span class="line">ax3.hist(my_data_y,orientation=<span class="string">&#x27;horizontal&#x27;</span>,density = <span class="literal">True</span>,rwidth = <span class="number">0.9</span>)  <span class="comment"># rwidth控制竹子宽度</span></span><br><span class="line">ax3.axis(<span class="string">&quot;off&quot;</span>)</span><br><span class="line">fig.tight_layout()</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/14/714hfH.png' style='zoom:80%' />
</li>
<li>
<p>方式二：借助 <code>gridspec</code> 生成网格自定义绘图</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> matplotlib.gridspec <span class="keyword">as</span> gridspec</span><br><span class="line"></span><br><span class="line">my_data_x, my_data_y = np.random.randn(<span class="number">2</span>, <span class="number">150</span>)</span><br><span class="line"><span class="comment"># my_data_y = np.random.randn(2, 150)</span></span><br><span class="line"></span><br><span class="line">fig = plt.figure(figsize=(<span class="number">8</span>,<span class="number">8</span>))</span><br><span class="line">spec = fig.add_gridspec(nrows = <span class="number">2</span>, ncols = <span class="number">2</span>, width_ratios = [<span class="number">5</span>, <span class="number">1</span>], height_ratios = [<span class="number">1</span>, <span class="number">5</span>])</span><br><span class="line"></span><br><span class="line">fig = plt.figure(figsize = (<span class="number">12</span>, <span class="number">8</span>), dpi = <span class="number">100</span>, facecolor = <span class="string">&#x27;white&#x27;</span>)</span><br><span class="line">gs = gridspec.GridSpec(<span class="number">6</span>, <span class="number">6</span>)</span><br><span class="line"></span><br><span class="line">graph_ax1 = fig.add_subplot(gs[<span class="number">0</span>, :<span class="number">5</span>])</span><br><span class="line">graph_ax1.hist(my_data_x, density = <span class="literal">True</span>, rwidth = <span class="number">0.8</span>)</span><br><span class="line">graph_ax1.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Scatter</span></span><br><span class="line">graph_ax2 = fig.add_subplot(gs[<span class="number">1</span>:<span class="number">6</span>, :<span class="number">5</span>])</span><br><span class="line">graph_ax2.scatter(my_data_x, my_data_y)</span><br><span class="line">graph_ax2.set_xlabel(<span class="string">&quot;my_data_x&quot;</span>)</span><br><span class="line">graph_ax2.set_ylabel(<span class="string">&quot;my_data_y&quot;</span>)</span><br><span class="line"></span><br><span class="line">graph_ax3 = fig.add_subplot(gs[<span class="number">1</span>:<span class="number">6</span>, <span class="number">5</span>])</span><br><span class="line">graph_ax3.hist(my_data_y, orientation = <span class="string">&#x27;horizontal&#x27;</span>, density = <span class="literal">True</span>, rwidth = <span class="number">0.9</span>)</span><br><span class="line">graph_ax3.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line"></span><br><span class="line">fig.tight_layout()</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/14/7145pd.png' style='zoom:80%' />
</li>
</ul>
<h1 id="5-文字图例尽眉目"><a class="markdownIt-Anchor" href="#5-文字图例尽眉目"></a> 5. 文字图例尽眉目</h1>
<ul>
<li>
<p>Import modules</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.dates <span class="keyword">as</span> mdates</span><br><span class="line"><span class="keyword">import</span> datetime</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="51-figure-和-axes-上的文本"><a class="markdownIt-Anchor" href="#51-figure-和-axes-上的文本"></a> 5.1 <code>Figure</code> 和 <code>Axes</code> 上的文本</h2>
<p><code>Matplotlib</code> 具有广泛的文本支持，包括对数学表达式的支持、对栅格和矢量输出的 <code>TrueType</code> 支持、具有任意旋转的换行分隔文本以及 <code>Unicode</code> 支持。</p>
<h3 id="511-文本-api-示例"><a class="markdownIt-Anchor" href="#511-文本-api-示例"></a> 5.1.1 文本 <code>API</code> 示例</h3>
<p>下面的命令是介绍了通过 <code>pyplot API</code> 和 <code>objected-oriented API</code> 分别创建文本的方式。</p>
<center> Table 1 Text creation </center>
<table>
<thead>
<tr>
<th>pyplot API</th>
<th>OO API</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>text</code></td>
<td><code>text</code></td>
<td>在子图axes的任意位置添加文本</td>
</tr>
<tr>
<td><code>annotate</code></td>
<td><code>annotate</code></td>
<td>在子图axes的任意位置添加注解，包含指向性的箭头</td>
</tr>
<tr>
<td><code>xlabel</code></td>
<td><code>set_xlabel</code></td>
<td>为子图axes添加x轴标签</td>
</tr>
<tr>
<td><code>ylabel</code></td>
<td><code>set_ylabel</code></td>
<td>为子图axes添加y轴标签</td>
</tr>
<tr>
<td><code>title</code></td>
<td><code>set_title</code></td>
<td>为子图axes添加标题</td>
</tr>
<tr>
<td><code>figtext</code></td>
<td><code>text</code></td>
<td>在画布figure的任意位置添加文本</td>
</tr>
<tr>
<td><code>suptitle</code></td>
<td><code>suptitle</code></td>
<td>为画布figure添加标题</td>
</tr>
</tbody>
</table>
<p>通过一个综合例子，以 <code>OO</code> 模式展示这些 <code>API</code> 是如何控制一个图像中各部分的文本，在之后的内容再详细分析这些 <code>api</code> 的使用技巧。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">fig = plt.figure()</span><br><span class="line">ax = fig.add_subplot()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 分别为 figure 和 ax 设置标题，注意两者的位置是不同的</span></span><br><span class="line">fig.suptitle(<span class="string">&#x27;bold figure suptitle&#x27;</span>, fontsize=<span class="number">14</span>, fontweight=<span class="string">&#x27;bold&#x27;</span>)</span><br><span class="line">ax.set_title(<span class="string">&#x27;axes title&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置 x 和 y 轴标签</span></span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;xlabel&#x27;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&#x27;ylabel&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置 x 和 y 轴显示范围均为 0 到 10</span></span><br><span class="line">ax.axis([<span class="number">0</span>, <span class="number">10</span>, <span class="number">0</span>, <span class="number">10</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在子图上添加文本</span></span><br><span class="line">ax.text(<span class="number">3</span>, <span class="number">8</span>, <span class="string">&#x27;boxed italics text in data coords&#x27;</span>, style=<span class="string">&#x27;italic&#x27;</span>,</span><br><span class="line">        bbox=&#123;<span class="string">&#x27;facecolor&#x27;</span>: <span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;alpha&#x27;</span>: <span class="number">0.5</span>, <span class="string">&#x27;pad&#x27;</span>: <span class="number">10</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在画布上添加文本，一般在子图上添加文本是更常见的操作，这种方法很少用</span></span><br><span class="line">fig.text(<span class="number">0.4</span>,<span class="number">0.8</span>,<span class="string">&#x27;This is text for figure&#x27;</span>)</span><br><span class="line"></span><br><span class="line">ax.plot([<span class="number">2</span>], [<span class="number">1</span>], <span class="string">&#x27;o&#x27;</span>)</span><br><span class="line"><span class="comment"># 添加注解</span></span><br><span class="line">ax.annotate(<span class="string">&#x27;annotate&#x27;</span>, xy=(<span class="number">2</span>, <span class="number">1</span>), xytext=(<span class="number">3</span>, <span class="number">4</span>),arrowprops=<span class="built_in">dict</span>(facecolor=<span class="string">&#x27;black&#x27;</span>, shrink=<span class="number">0.05</span>));</span><br></pre></td></tr></table></figure>
<h3 id="512-text-子图上的文本"><a class="markdownIt-Anchor" href="#512-text-子图上的文本"></a> 5.1.2 <code>text</code> 子图上的文本</h3>
<p><code>text</code> 的调用方式为</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Axes.text(x, y, s, fontdict=<span class="literal">None</span>, **kwargs) </span><br></pre></td></tr></table></figure>
<p><strong>参数说明</strong>：</p>
<ul>
<li><code>x</code>,<code>y</code>： 为文本出现的位置，默认状态下即为当前坐标系下的坐标值；</li>
<li><code>s</code>：文本的内容；</li>
<li><code>fontdict</code>：可选参数，用于覆盖默认的文本属性</li>
<li><code>**kwargs</code>：关键字参数，也可以用于传入文本样式参数</li>
</ul>
<p>接下来，重点解释下 <code>fontdict</code> 和 <code>**kwargs</code> 参数，这两种方式都可以用于调整呈现的文本样式，最终效果是一样的，不仅 <code>text</code> 方法，其他文本方法如 <code>set_xlabel</code>, <code>set_title</code> 等同样适用这两种方式修改样式。通过一个例子演示这两种方法如何使用：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">fig = plt.figure(figsize=(<span class="number">10</span>,<span class="number">3</span>))</span><br><span class="line">axes = fig.subplots(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用关键字参数修改文本样式</span></span><br><span class="line">axes[<span class="number">0</span>].text(<span class="number">0.3</span>, <span class="number">0.8</span>, <span class="string">&#x27;modify by **kwargs&#x27;</span>, style=<span class="string">&#x27;italic&#x27;</span>,</span><br><span class="line">        bbox=&#123;<span class="string">&#x27;facecolor&#x27;</span>: <span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;alpha&#x27;</span>: <span class="number">0.5</span>, <span class="string">&#x27;pad&#x27;</span>: <span class="number">10</span>&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用fontdict参数修改文本样式</span></span><br><span class="line">font = &#123;<span class="string">&#x27;bbox&#x27;</span>:&#123;<span class="string">&#x27;facecolor&#x27;</span>: <span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;alpha&#x27;</span>: <span class="number">0.5</span>, <span class="string">&#x27;pad&#x27;</span>: <span class="number">10</span>&#125;, <span class="string">&#x27;style&#x27;</span>:<span class="string">&#x27;italic&#x27;</span>&#125;</span><br><span class="line">axes[<span class="number">1</span>].text(<span class="number">0.3</span>, <span class="number">0.8</span>, <span class="string">&#x27;modify by fontdict&#x27;</span>, fontdict=font);</span><br></pre></td></tr></table></figure>
<p>Results:</p>
<img src='https://s4.ax1x.com/2022/01/14/714WkD.png' style='zoom:80%' />
<p>matplotlib中所有支持的样式参数请参考<a target="_blank" rel="noopener" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.text.html#matplotlib.axes.Axes.text">官网文档说明</a>，大多数时候需要用到的时候再查询即可。</p>
<p>下表列举了一些常用的参数供参考。</p>
<center> Table 2 Text Parameters </center>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>alpha</code></td>
<td>float or None   透明度，越接近0越透明，越接近1越不透明</td>
</tr>
<tr>
<td><code>backgroundcolor</code></td>
<td>color  文本的背景颜色</td>
</tr>
<tr>
<td><code>bbox</code></td>
<td>dict with properties for patches.FancyBboxPatch 用来设置text周围的box外框</td>
</tr>
<tr>
<td><code>color</code> or c</td>
<td>color 字体的颜色</td>
</tr>
<tr>
<td><code>fontfamily</code> or family</td>
<td>{FONTNAME, ‘serif’, ‘sans-serif’, ‘cursive’, ‘fantasy’, ‘monospace’} 字体的类型</td>
</tr>
<tr>
<td><code>fontsize</code> or size</td>
<td>float or {‘xx-small’, ‘x-small’, ‘small’, ‘medium’, ‘large’, ‘x-large’, ‘xx-large’} 字体大小</td>
</tr>
<tr>
<td><code>fontstyle</code> or style</td>
<td>{‘normal’, ‘italic’, ‘oblique’} 字体的样式是否倾斜等</td>
</tr>
<tr>
<td><code>fontweight</code> or weight</td>
<td>{a numeric value in range 0-1000, ‘ultralight’, ‘light’, ‘normal’, ‘regular’, ‘book’, ‘medium’, ‘roman’, ‘semibold’, ‘demibold’, ‘demi’, ‘bold’, ‘heavy’, ‘extra bold’, ‘black’} 文本粗细</td>
</tr>
<tr>
<td><code>horizontalalignment</code> or ha</td>
<td>{‘center’, ‘right’, ‘left’}  选择文本左对齐右对齐还是居中对齐</td>
</tr>
<tr>
<td><code>linespacing</code></td>
<td>float (multiple of font size)   文本间距</td>
</tr>
<tr>
<td><code>rotation</code></td>
<td>float or {‘vertical’, ‘horizontal’} 指text逆时针旋转的角度，“horizontal”等于0，“vertical”等于90</td>
</tr>
<tr>
<td><code>verticalalignment</code> or va</td>
<td>{‘center’, ‘top’, ‘bottom’, ‘baseline’, ‘center_baseline’}  文本在垂直角度的对齐方式</td>
</tr>
</tbody>
</table>
<h3 id="513-xlabel-and-ylabel"><a class="markdownIt-Anchor" href="#513-xlabel-and-ylabel"></a> 5.1.3 <code>xlabel</code> and <code>ylabel</code></h3>
<p><code>xlabel</code> and <code>ylabel</code> 分别表示子图的 <code>x</code>，<code>y</code> 轴标签，其构造函数为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Axes.set_xlabel(xlabel, fontdict=<span class="literal">None</span>, labelpad=<span class="literal">None</span>, *, loc=<span class="literal">None</span>, **kwargs)</span><br></pre></td></tr></table></figure>
<p><strong>参数说明</strong>：</p>
<ul>
<li><code>xlabel</code>：标签内容；</li>
<li><code>fontdict</code> and <code>**kwargs</code>：用来修改样式，上一小节已介绍；</li>
<li><code>labelpad</code>：标签和坐标轴的距离，默认为 <code>4</code>；</li>
<li><code>loc</code>：标签位置，可选的值为 <code>left</code>, <code>center</code>, <code>right</code> 之一，默认为居中。</li>
</ul>
<p><strong>Case</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 观察 labelpad 和 loc 参数的使用效果</span></span><br><span class="line">fig = plt.figure(figsize=(<span class="number">10</span>,<span class="number">3</span>))</span><br><span class="line">axes = fig.subplots(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">axes[<span class="number">0</span>].set_xlabel(<span class="string">&#x27;xlabel&#x27;</span>,labelpad = <span class="number">20</span>,loc=<span class="string">&#x27;left&#x27;</span>)</span><br><span class="line">axes[<span class="number">1</span>].set_xlabel(<span class="string">&#x27;xlabel&#x27;</span>, position=(<span class="number">0.2</span>, _), horizontalalignment=<span class="string">&#x27;left&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>Results:</p>
<img src='https://s4.ax1x.com/2022/01/14/715QHK.png' style='zoom:80%' />
<p><strong>Note</strong>：</p>
<ul>
<li><code>loc</code> 参数仅能提供粗略的位置调整，如果想要更精确的设置标签的位置，可以使用 <code>position</code> 参数和 <code>horizontalalignment</code> 参数来定位;</li>
<li><code>position</code> 由一个元组过程，第一个元素 <code>0.2</code> 表示 <code>x</code> 轴标签在 <code>x</code> 轴的位置，第二个元素对于 <code>xlabel</code> 其实是无意义的，随便填一个数都可以；</li>
<li><code>horizontalalignment</code> 为 <code>left</code> 表示左对齐，这样设置后 <code>x</code> 轴标签就能精确定位在 <code>x=0.2</code> 的位置处。</li>
</ul>
<h3 id="514-title-and-suptitle"><a class="markdownIt-Anchor" href="#514-title-and-suptitle"></a> 5.1.4 <code>title</code> and <code>suptitle</code></h3>
<ol>
<li>
<p><code>title</code> 的调用方式为：</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Axes.set_title(label, fontdict=<span class="literal">None</span>, loc=<span class="literal">None</span>, pad=<span class="literal">None</span>, *, y=<span class="literal">None</span>, **kwargs)</span><br></pre></td></tr></table></figure>
<p>参数说明：</p>
<ul>
<li><code>label</code>：为子图标签的内容；</li>
<li><code>pad</code>：标题偏离图表顶部的距离，默认为 <code>6</code>；</li>
<li><code>y</code> 是 <code>title</code> 所在子图吹响的位置。默认值为 <code>1</code>，即 <code>title</code> 位于子图的顶部。</li>
</ul>
</li>
<li>
<p><code>suptitle</code> 的调用方式为</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">figure.suptitle(t, **kwargs)</span><br></pre></td></tr></table></figure>
<p>其中，<code>t</code> 为画布的标题内容。</p>
</li>
</ol>
<ul>
<li>
<p><strong>Case</strong></p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 观察pad参数的使用效果</span></span><br><span class="line">fig = plt.figure(figsize=(<span class="number">10</span>,<span class="number">3</span>))</span><br><span class="line">fig.suptitle(<span class="string">&#x27;This is figure title&#x27;</span>,y=<span class="number">1.2</span>) <span class="comment"># 通过参数y设置高度</span></span><br><span class="line">axes = fig.subplots(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">axes[<span class="number">0</span>].set_title(<span class="string">&#x27;This is title&#x27;</span>,pad=<span class="number">15</span>)</span><br><span class="line">axes[<span class="number">1</span>].set_title(<span class="string">&#x27;This is title&#x27;</span>,pad=<span class="number">6</span>);</span><br></pre></td></tr></table></figure>
  <img src='https://s4.ax1x.com/2022/01/14/715MB6.png' style='zoom:80%' />
</li>
</ul>
<h3 id="515-annotate-子图的注解"><a class="markdownIt-Anchor" href="#515-annotate-子图的注解"></a> 5.1.5 <code>annotate</code> 子图的注解</h3>
<p><code>annotate</code> 的构造函数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># API</span></span><br><span class="line">matplotlib.pyplot.annotate(text, xy, *args,**kwargs)</span><br><span class="line"></span><br><span class="line"><span class="comment"># OO API</span></span><br><span class="line">Axes.annotate(text, xy, *args, **kwargs)</span><br></pre></td></tr></table></figure>
<p>参数说明：</p>
<ul>
<li><code>text</code>：注解的内容；</li>
<li><code>xy</code>：注解箭头指向的坐标；</li>
</ul>
<p>其他常用的参数包括：</p>
<ul>
<li>
<p><code>xytext</code>：注解文字的坐标，二维元组，默认与 <code>xy</code> 相同</p>
</li>
<li>
<p><code>xycoords</code>：用来定义 <code>xy</code> 参数的坐标系，允许的输入值如下:</p>
<table>
<thead>
<tr>
<th>属性值</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>‘figure points’</td>
<td>以绘图区左下角为参考，单位是点数</td>
</tr>
<tr>
<td>‘figure pixels’</td>
<td>以绘图区左下角为参考，单位是像素数</td>
</tr>
<tr>
<td>‘figure fraction’</td>
<td>以绘图区左下角为参考，单位是百分比</td>
</tr>
<tr>
<td>‘axes points’</td>
<td>以子绘图区左下角为参考，单位是点数（一个figure可以有多个axes，默认为1个）</td>
</tr>
<tr>
<td>‘axes pixels’</td>
<td>以子绘图区左下角为参考，单位是像素数</td>
</tr>
<tr>
<td>‘axes fraction’</td>
<td>以子绘图区左下角为参考，单位是百分比</td>
</tr>
<tr>
<td>‘data’</td>
<td>以被注释的坐标点xy为参考 (默认值)</td>
</tr>
<tr>
<td>‘polar’</td>
<td>不使用本地数据坐标系，使用极坐标系</td>
</tr>
</tbody>
</table>
</li>
<li>
<p><code>textcoords</code>：用来定义 <code>xytext</code> 参数的坐标系，默认与 <code>xycoords</code> 属性值相同，也可设为不同的值。除了允许输入 <code>xycoords</code> 的属性值，还允许输入以下两种：</p>
<table>
<thead>
<tr>
<th>属性值</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>‘offset points’</td>
<td>相对于被注释点xy的偏移量（单位是点）</td>
</tr>
<tr>
<td>‘offset pixels’</td>
<td>相对于被注释点xy的偏移量（单位是像素）</td>
</tr>
</tbody>
</table>
</li>
<li>
<p><code>arrowprops</code>：用来定义指向箭头的样式，<code>dict</code>（字典）型数据，如果该属性非空，则会在注释文本和被注释点之间画一个箭头。如果不设置 <code>arrowstyle</code> 关键字，则允许包含以下关键字：</p>
<table>
<thead>
<tr>
<th>关键字</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>width</td>
<td>箭头的宽度（单位是点）</td>
</tr>
<tr>
<td>headwidth</td>
<td>箭头头部的宽度（点）</td>
</tr>
<tr>
<td>headlength</td>
<td>箭头头部的长度（点）</td>
</tr>
<tr>
<td>shrink</td>
<td>箭头两端收缩的百分比（占总长）</td>
</tr>
<tr>
<td>?</td>
<td>任何 <a target="_blank" rel="noopener" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.patches.FancyArrowPatch.html">matplotlib.patches.FancyArrowPatch</a> 中的关键字</td>
</tr>
</tbody>
</table>
<p>如果设置了 <code>arrowstyle</code> 关键字，以上关键字就不能使用。允许的值有：</p>
<table>
<thead>
<tr>
<th>箭头的样式</th>
<th>属性</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>'-'</code></td>
<td>None</td>
</tr>
<tr>
<td><code>'-&gt;'</code></td>
<td>head_length=0.4,head_width=0.2</td>
</tr>
<tr>
<td><code>'-['</code></td>
<td>widthB=1.0,lengthB=0.2,angleB=None</td>
</tr>
<tr>
<td><code>'|-|'</code></td>
<td>widthA=1.0,widthB=1.0</td>
</tr>
<tr>
<td><code>'-|&gt;'</code></td>
<td>head_length=0.4,head_width=0.2</td>
</tr>
<tr>
<td><code>'&lt;-'</code></td>
<td>head_length=0.4,head_width=0.2</td>
</tr>
<tr>
<td><code>'&lt;-&gt;'</code></td>
<td>head_length=0.4,head_width=0.2</td>
</tr>
<tr>
<td><code>'&lt;|-'</code></td>
<td>head_length=0.4,head_width=0.2</td>
</tr>
<tr>
<td><code>'&lt;|-|&gt;'</code></td>
<td>head_length=0.4,head_width=0.2</td>
</tr>
<tr>
<td><code>'fancy'</code></td>
<td>head_length=0.4,head_width=0.4,tail_width=0.4</td>
</tr>
<tr>
<td><code>'simple'</code></td>
<td>head_length=0.5,head_width=0.5,tail_width=0.2</td>
</tr>
</tbody>
</table>
<p>下图展现了不同的 <code>arrowstyle</code> 的不同形式：</p>
  <img src='https://s4.ax1x.com/2022/01/14/73ij5F.png' style='zoom:80%' />
<p><a target="_blank" rel="noopener" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.patches.FancyArrowPatch.html">FancyArrowPatch</a>的关键字包括:</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>arrowstyle</td>
<td>箭头的样式</td>
</tr>
<tr>
<td>connectionstyle</td>
<td>连接线的样式</td>
</tr>
<tr>
<td>relpos</td>
<td>箭头起始点相对注释文本的位置，默认为 (0.5, 0.5)，即文本的中心，（0，0）表示左下角，（1，1）表示右上角</td>
</tr>
<tr>
<td>patchA</td>
<td>箭头起点处的图形（matplotlib.patches对象），默认是注释文字框</td>
</tr>
<tr>
<td>patchB</td>
<td>箭头终点处的图形（matplotlib.patches对象），默认为空</td>
</tr>
<tr>
<td>shrinkA</td>
<td>箭头起点的缩进点数，默认为2</td>
</tr>
<tr>
<td>shrinkB</td>
<td>箭头终点的缩进点数，默认为2</td>
</tr>
<tr>
<td>mutation_scale</td>
<td>default is text size (in points)</td>
</tr>
<tr>
<td>mutation_aspect</td>
<td>default is 1.</td>
</tr>
<tr>
<td>?</td>
<td>any key for <a target="_blank" rel="noopener" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.patches.PathPatch.html">matplotlib.patches.PathPatch</a></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><code>annotation_clip</code>: 布尔值，可选参数，默认为空。设为 <code>True</code> 时，只有被注释点在 <code>axes</code> 时才绘制注释；设为 <code>False</code> 时，无论被注释点在哪里都绘制注释。仅当 <code>xycoords</code> 为 <code>data</code> 时，默认值空相当于 <code>True</code> 。</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#此代码主要给示范了不同的arrowstyle以及FancyArrowPatch的样式</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> matplotlib.patches <span class="keyword">as</span> mpatches</span><br><span class="line">fig, axs = plt.subplots(<span class="number">2</span>, <span class="number">2</span>, figsize = (<span class="number">12</span>, <span class="number">8</span>))</span><br><span class="line">x1, y1 = <span class="number">0.3</span>, <span class="number">0.3</span></span><br><span class="line">x2, y2 = <span class="number">0.7</span>, <span class="number">0.7</span></span><br><span class="line"></span><br><span class="line">ax = axs.flat[<span class="number">0</span>]</span><br><span class="line">ax.plot([x1, x2], [y1, y2], <span class="string">&quot;.&quot;</span>)</span><br><span class="line">el = mpatches.Ellipse((x1, y1), <span class="number">0.3</span>, <span class="number">0.4</span>, angle=<span class="number">30</span>, alpha=<span class="number">0.2</span>)</span><br><span class="line">ax.add_artist(el)<span class="comment">#在axes中创建一个artist</span></span><br><span class="line">ax.annotate(<span class="string">&quot;&quot;</span>,</span><br><span class="line">            xy=(x1, y1), xycoords=<span class="string">&#x27;data&#x27;</span>,</span><br><span class="line">            xytext=(x2, y2), textcoords=<span class="string">&#x27;data&#x27;</span>,</span><br><span class="line">            arrowprops=<span class="built_in">dict</span>(arrowstyle=<span class="string">&quot;-&quot;</span>,<span class="comment">#箭头的样式</span></span><br><span class="line">                            color=<span class="string">&quot;0.5&quot;</span>,</span><br><span class="line">                            patchB=<span class="literal">None</span>,</span><br><span class="line">                            shrinkB=<span class="number">0</span>,</span><br><span class="line">                            connectionstyle=<span class="string">&quot;arc3,rad=0.3&quot;</span>,</span><br><span class="line">                            ),</span><br><span class="line">            )</span><br><span class="line"><span class="comment">#在整个代码中使用Transform=ax.transAx表示坐标相对于axes的bounding box，其中(0，0)是轴的左下角，(1，1)是右上角。</span></span><br><span class="line">ax.text(<span class="number">.05</span>, <span class="number">.95</span>, <span class="string">&quot;connect&quot;</span>, transform=ax.transAxes, ha=<span class="string">&quot;left&quot;</span>, va=<span class="string">&quot;top&quot;</span>)</span><br><span class="line"></span><br><span class="line">ax = axs.flat[<span class="number">1</span>]</span><br><span class="line">ax.plot([x1, x2], [y1, y2], <span class="string">&quot;.&quot;</span>)</span><br><span class="line">el = mpatches.Ellipse((x1, y1), <span class="number">0.3</span>, <span class="number">0.4</span>, angle=<span class="number">30</span>, alpha=<span class="number">0.2</span>)</span><br><span class="line">ax.add_artist(el)</span><br><span class="line">ax.annotate(<span class="string">&quot;&quot;</span>,</span><br><span class="line">            xy=(x1, y1), xycoords=<span class="string">&#x27;data&#x27;</span>,</span><br><span class="line">            xytext=(x2, y2), textcoords=<span class="string">&#x27;data&#x27;</span>,</span><br><span class="line">            arrowprops=<span class="built_in">dict</span>(arrowstyle=<span class="string">&quot;-&quot;</span>,</span><br><span class="line">                            color=<span class="string">&quot;0.5&quot;</span>,</span><br><span class="line">                            patchB=el,<span class="comment">#箭头终点处的图形</span></span><br><span class="line">                            shrinkB=<span class="number">0</span>,</span><br><span class="line">                            connectionstyle=<span class="string">&quot;arc3,rad=0.3&quot;</span>,</span><br><span class="line">                            ),</span><br><span class="line">            )</span><br><span class="line">ax.text(<span class="number">.05</span>, <span class="number">.95</span>, <span class="string">&quot;clip&quot;</span>, transform=ax.transAxes, ha=<span class="string">&quot;left&quot;</span>, va=<span class="string">&quot;top&quot;</span>)</span><br><span class="line"></span><br><span class="line">ax = axs.flat[<span class="number">2</span>]</span><br><span class="line">ax.plot([x1, x2], [y1, y2], <span class="string">&quot;.&quot;</span>)</span><br><span class="line">el = mpatches.Ellipse((x1, y1), <span class="number">0.3</span>, <span class="number">0.4</span>, angle=<span class="number">30</span>, alpha=<span class="number">0.2</span>)</span><br><span class="line">ax.add_artist(el)</span><br><span class="line">ax.annotate(<span class="string">&quot;&quot;</span>,</span><br><span class="line">            xy=(x1, y1), xycoords=<span class="string">&#x27;data&#x27;</span>,</span><br><span class="line">            xytext=(x2, y2), textcoords=<span class="string">&#x27;data&#x27;</span>,</span><br><span class="line">            arrowprops=<span class="built_in">dict</span>(arrowstyle=<span class="string">&quot;-&quot;</span>,</span><br><span class="line">                            color=<span class="string">&quot;0.5&quot;</span>,</span><br><span class="line">                            patchB=el,</span><br><span class="line">                            shrinkB=<span class="number">5</span>,</span><br><span class="line">                            connectionstyle=<span class="string">&quot;arc3,rad=0.3&quot;</span>,</span><br><span class="line">                            ),</span><br><span class="line">            )</span><br><span class="line">ax.text(<span class="number">.05</span>, <span class="number">.95</span>, <span class="string">&quot;shrink&quot;</span>, transform=ax.transAxes, ha=<span class="string">&quot;left&quot;</span>, va=<span class="string">&quot;top&quot;</span>)</span><br><span class="line"></span><br><span class="line">ax = axs.flat[<span class="number">3</span>]</span><br><span class="line">ax.plot([x1, x2], [y1, y2], <span class="string">&quot;.&quot;</span>)</span><br><span class="line">el = mpatches.Ellipse((x1, y1), <span class="number">0.3</span>, <span class="number">0.4</span>, angle=<span class="number">30</span>, alpha=<span class="number">0.2</span>)</span><br><span class="line">ax.add_artist(el)</span><br><span class="line">ax.annotate(<span class="string">&quot;&quot;</span>,</span><br><span class="line">            xy=(x1, y1), xycoords=<span class="string">&#x27;data&#x27;</span>,</span><br><span class="line">            xytext=(x2, y2), textcoords=<span class="string">&#x27;data&#x27;</span>,</span><br><span class="line">            arrowprops=<span class="built_in">dict</span>(arrowstyle=<span class="string">&quot;fancy&quot;</span>,</span><br><span class="line">                            color=<span class="string">&quot;0.5&quot;</span>,</span><br><span class="line">                            patchB=el,</span><br><span class="line">                            shrinkB=<span class="number">5</span>,<span class="comment">#箭头终点的缩进点数</span></span><br><span class="line">                            connectionstyle=<span class="string">&quot;arc3,rad=0.3&quot;</span>,</span><br><span class="line">                            ),</span><br><span class="line">            )</span><br><span class="line">ax.text(<span class="number">.05</span>, <span class="number">.95</span>, <span class="string">&quot;mutate&quot;</span>, transform=ax.transAxes, ha=<span class="string">&quot;left&quot;</span>, va=<span class="string">&quot;top&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ax <span class="keyword">in</span> axs.flat:</span><br><span class="line">    ax.<span class="built_in">set</span>(xlim=(<span class="number">0</span>, <span class="number">1</span>), ylim=(<span class="number">0</span>, <span class="number">1</span>), xticks=[], yticks=[], aspect=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/14/73iXUU.png' style='zoom:80%' />
</li>
<li>
<p>两个点之间的连线</p>
<p>两个点之间的连接路径主要有 <code>connectionstyle</code> 和以下样式确定</p>
<table>
<thead>
<tr>
<th>Name	Attrs</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>angle</td>
<td>angleA=90,angleB=0,rad=0.0</td>
</tr>
<tr>
<td>angle3</td>
<td>angleA=90,angleB=0</td>
</tr>
<tr>
<td>arc</td>
<td>angleA=0,angleB=0,armA=None,armB=None,rad=0.0</td>
</tr>
<tr>
<td>arc3</td>
<td>rad=0.0</td>
</tr>
<tr>
<td>bar</td>
<td>armA=0.0,armB=0.0,fraction=0.3,angle=None</td>
</tr>
</tbody>
</table>
<p>其中 <code>angle3</code> 和 <code>arc3</code> 中的 <code>3</code> 意味着所得到的路径是二次样条段（ 三个控制点）。下面的例子丰富的展现了连接线的用法，可以参考学习：</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">demo_con_style</span>(<span class="params">ax, connectionstyle</span>):</span></span><br><span class="line">    x1, y1 = <span class="number">0.3</span>, <span class="number">0.2</span></span><br><span class="line">    x2, y2 = <span class="number">0.8</span>, <span class="number">0.6</span></span><br><span class="line"></span><br><span class="line">    ax.plot([x1, x2], [y1, y2], <span class="string">&quot;.&quot;</span>)</span><br><span class="line">    ax.annotate(<span class="string">&quot;&quot;</span>,</span><br><span class="line">                xy=(x1, y1), xycoords=<span class="string">&#x27;data&#x27;</span>,</span><br><span class="line">                xytext=(x2, y2), textcoords=<span class="string">&#x27;data&#x27;</span>,</span><br><span class="line">                arrowprops=<span class="built_in">dict</span>(arrowstyle=<span class="string">&quot;-&gt;&quot;</span>, color=<span class="string">&quot;0.5&quot;</span>,</span><br><span class="line">                                shrinkA=<span class="number">5</span>, shrinkB=<span class="number">5</span>,</span><br><span class="line">                                patchA=<span class="literal">None</span>, patchB=<span class="literal">None</span>,</span><br><span class="line">                                connectionstyle=connectionstyle,</span><br><span class="line">                                ),</span><br><span class="line">                )</span><br><span class="line"></span><br><span class="line">ax.text(<span class="number">.05</span>, <span class="number">.95</span>, connectionstyle.replace(<span class="string">&quot;,&quot;</span>, <span class="string">&quot;,\n&quot;</span>),</span><br><span class="line">        transform=ax.transAxes, ha=<span class="string">&quot;left&quot;</span>, va=<span class="string">&quot;top&quot;</span>)</span><br><span class="line"></span><br><span class="line">fig, axs = plt.subplots(<span class="number">3</span>, <span class="number">5</span>, figsize=(<span class="number">12</span>, <span class="number">8</span>))</span><br><span class="line">demo_con_style(axs[<span class="number">0</span>, <span class="number">0</span>], <span class="string">&quot;angle3,angleA=90,angleB=0&quot;</span>)</span><br><span class="line">demo_con_style(axs[<span class="number">1</span>, <span class="number">0</span>], <span class="string">&quot;angle3,angleA=0,angleB=90&quot;</span>)</span><br><span class="line">demo_con_style(axs[<span class="number">0</span>, <span class="number">1</span>], <span class="string">&quot;arc3,rad=0.&quot;</span>)</span><br><span class="line">demo_con_style(axs[<span class="number">1</span>, <span class="number">1</span>], <span class="string">&quot;arc3,rad=0.3&quot;</span>)</span><br><span class="line">demo_con_style(axs[<span class="number">2</span>, <span class="number">1</span>], <span class="string">&quot;arc3,rad=-0.3&quot;</span>)</span><br><span class="line">demo_con_style(axs[<span class="number">0</span>, <span class="number">2</span>], <span class="string">&quot;angle,angleA=-90,angleB=180,rad=0&quot;</span>)</span><br><span class="line">demo_con_style(axs[<span class="number">1</span>, <span class="number">2</span>], <span class="string">&quot;angle,angleA=-90,angleB=180,rad=5&quot;</span>)</span><br><span class="line">demo_con_style(axs[<span class="number">2</span>, <span class="number">2</span>], <span class="string">&quot;angle,angleA=-90,angleB=10,rad=5&quot;</span>)</span><br><span class="line">demo_con_style(axs[<span class="number">0</span>, <span class="number">3</span>], <span class="string">&quot;arc,angleA=-90,angleB=0,armA=30,armB=30,rad=0&quot;</span>)</span><br><span class="line">demo_con_style(axs[<span class="number">1</span>, <span class="number">3</span>], <span class="string">&quot;arc,angleA=-90,angleB=0,armA=30,armB=30,rad=5&quot;</span>)</span><br><span class="line">demo_con_style(axs[<span class="number">2</span>, <span class="number">3</span>], <span class="string">&quot;arc,angleA=-90,angleB=0,armA=0,armB=40,rad=0&quot;</span>)</span><br><span class="line">demo_con_style(axs[<span class="number">0</span>, <span class="number">4</span>], <span class="string">&quot;bar,fraction=0.3&quot;</span>)</span><br><span class="line">demo_con_style(axs[<span class="number">1</span>, <span class="number">4</span>], <span class="string">&quot;bar,fraction=-0.3&quot;</span>)</span><br><span class="line">demo_con_style(axs[<span class="number">2</span>, <span class="number">4</span>], <span class="string">&quot;bar,angle=180,fraction=-0.2&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ax <span class="keyword">in</span> axs.flat:</span><br><span class="line">    ax.<span class="built_in">set</span>(xlim=(<span class="number">0</span>, <span class="number">1</span>), ylim=(<span class="number">0</span>, <span class="number">1</span>), xticks=[], yticks=[], aspect=<span class="number">1</span>)</span><br><span class="line">fig.tight_layout(pad=<span class="number">0.2</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>Results：</p>
  <img src='https://s4.ax1x.com/2022/01/14/73iOET.png' style='zoom:80%' />
</li>
<li>
<p><strong>kwargs</strong>：该参数接受任何 <code>Text</code> 的参数</p>
</li>
</ul>
<p>详细的参数介绍可以参考我之前的博客 <a target="_blank" rel="noopener" href="https://www.yangsuoly.com/2020/11/30/Matplotlib/">Matplotlib</a> 的 3.2 节 <strong>标注点的绘制</strong>。<br />
annotate的参数非常复杂，这里仅仅展示两个简单的例子，更多参数可以查看<a target="_blank" rel="noopener" href="https://matplotlib.org/stable/tutorials/text/annotations.html#plotting-guide-annotation">官方文档中的annotate介绍</a></p>
<ul>
<li>
<p>A simple case</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fig = plt.figure()</span><br><span class="line">ax = fig.add_subplot()</span><br><span class="line">ax.annotate(<span class="string">&quot;&quot;</span>,</span><br><span class="line">            xy=(<span class="number">0.2</span>, <span class="number">0.2</span>), xycoords=<span class="string">&#x27;data&#x27;</span>,</span><br><span class="line">            xytext=(<span class="number">0.8</span>, <span class="number">0.8</span>), textcoords=<span class="string">&#x27;data&#x27;</span>,</span><br><span class="line">            arrowprops=<span class="built_in">dict</span>(arrowstyle=<span class="string">&quot;-&gt;&quot;</span>, connectionstyle=<span class="string">&quot;arc3,rad=0.2&quot;</span>)</span><br><span class="line">            );</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/14/715Knx.md.png' style='zoom:80%' />
</li>
<li>
<p>A complex case</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">fig = plt.figure(figsize = (<span class="number">12</span>, <span class="number">8</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在 Figure 对象中创建一个 Axes 对象，每个 Axes 对象即为一个绘图区域</span></span><br><span class="line">ax = fig.add_subplot(<span class="number">111</span>)</span><br><span class="line">x = np.arange(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line">y = np.around(np.log(x), <span class="number">2</span>)</span><br><span class="line">ax.plot(x, y, marker = <span class="string">&#x27;o&#x27;</span>)</span><br><span class="line"></span><br><span class="line">ax.annotate(<span class="string">u&#x27;样式1&#x27;</span>, xy = (x[<span class="number">1</span>], y[<span class="number">1</span>]), xytext = (<span class="number">80</span>, <span class="number">10</span>), textcoords = <span class="string">&#x27;offset points&#x27;</span>,</span><br><span class="line">            arrowprops = <span class="built_in">dict</span>(arrowstyle = <span class="string">&#x27;-&gt;&#x27;</span>, connectionstyle = <span class="string">&#x27;angle3, angleA = 80, angleB = 50&#x27;</span>))</span><br><span class="line"></span><br><span class="line">ax.annotate(<span class="string">u&#x27;样式2&#x27;</span>, xy = (x[<span class="number">3</span>], y[<span class="number">3</span>]), xytext = (<span class="number">80</span>, <span class="number">10</span>), textcoords = <span class="string">&#x27;offset points&#x27;</span>,</span><br><span class="line">            arrowprops = <span class="built_in">dict</span>(facecolor = <span class="string">&#x27;black&#x27;</span>, shrink = <span class="number">0.05</span>, width = <span class="number">5</span>))</span><br><span class="line"></span><br><span class="line">ax.annotate(<span class="string">u&#x27;样式3&#x27;</span>, xy = (x[<span class="number">5</span>], y[<span class="number">5</span>]), xytext = (<span class="number">80</span>, <span class="number">10</span>), textcoords = <span class="string">&#x27;offset points&#x27;</span>,</span><br><span class="line">            arrowprops = <span class="built_in">dict</span>(facecolor = <span class="string">&#x27;green&#x27;</span>, headwidth = <span class="number">5</span>, headlength = <span class="number">10</span>),</span><br><span class="line">            bbox = <span class="built_in">dict</span>(boxstyle = <span class="string">&#x27;circle, pad = 0.5&#x27;</span>, fc = <span class="string">&#x27;yellow&#x27;</span>, ec = <span class="string">&#x27;k&#x27;</span>, lw = <span class="number">1</span>, alpha = <span class="number">0.5</span>))</span><br><span class="line"><span class="comment"># fc: facecolor, ec: edegcolor, lw: lineweight</span></span><br><span class="line"></span><br><span class="line">ax.annotate(<span class="string">u&#x27;样式4&#x27;</span>, xy = (x[<span class="number">7</span>], y[<span class="number">7</span>]), xytext = (<span class="number">80</span>, <span class="number">10</span>), textcoords = <span class="string">&#x27;offset points&#x27;</span>,</span><br><span class="line">            arrowprops = <span class="built_in">dict</span>(facecolor = <span class="string">&#x27;blue&#x27;</span>, headwidth = <span class="number">5</span>, headlength = <span class="number">10</span>),</span><br><span class="line">            bbox = <span class="built_in">dict</span>(boxstyle = <span class="string">&#x27;round, pad = 0.5&#x27;</span>, fc = <span class="string">&#x27;gray&#x27;</span>, ec = <span class="string">&#x27;k&#x27;</span>, lw = <span class="number">1</span>, alpha = <span class="number">0.5</span>))</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/14/715nj1.png' style='zoom:80%' />
</li>
</ul>
<p>以下两个 <code>block</code> 懂了之后，<code>annotate</code> 基本懂了。如果想更深入学习可以参看[]官网案例学习](<a target="_blank" rel="noopener" href="https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.annotate.html#matplotlib.axes.Axes.annotate">https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.annotate.html#matplotlib.axes.Axes.annotate</a>)</p>
<ul>
<li>
<p>More Case one</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 以步长0.005绘制一个曲线</span></span><br><span class="line">x = np.arange(<span class="number">0</span>, <span class="number">10</span>, <span class="number">0.005</span>)</span><br><span class="line">y = np.exp(-x/<span class="number">2.</span>) * np.sin(<span class="number">2</span>*np.pi*x)</span><br><span class="line"></span><br><span class="line">fig, ax = plt.subplots(figsize = (<span class="number">12</span>, <span class="number">8</span>))</span><br><span class="line">ax.plot(x, y)</span><br><span class="line">ax.set_xlim(<span class="number">0</span>, <span class="number">10</span>)<span class="comment">#设置x轴的范围</span></span><br><span class="line">ax.set_ylim(-<span class="number">1</span>, <span class="number">1</span>)<span class="comment">#设置x轴的范围</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 被注释点的数据轴坐标和所在的像素</span></span><br><span class="line">xdata, ydata = <span class="number">5</span>, <span class="number">0</span></span><br><span class="line">xdisplay, ydisplay = ax.transData.transform_point((xdata, ydata))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置注释文本的样式和箭头的样式</span></span><br><span class="line">bbox = <span class="built_in">dict</span>(boxstyle=<span class="string">&quot;round&quot;</span>, fc=<span class="string">&quot;0.8&quot;</span>)</span><br><span class="line">arrowprops = <span class="built_in">dict</span>(</span><br><span class="line">    arrowstyle = <span class="string">&quot;-&gt;&quot;</span>,</span><br><span class="line">    connectionstyle = <span class="string">&quot;angle,angleA=0,angleB=90,rad=10&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置偏移量</span></span><br><span class="line">offset = <span class="number">72</span></span><br><span class="line"><span class="comment"># xycoords默认为&#x27;data&#x27;数据轴坐标，对坐标点（5,0）添加注释</span></span><br><span class="line"><span class="comment"># 注释文本参考被注释点设置偏移量，向左2*72points，向上72points</span></span><br><span class="line">ax.annotate(<span class="string">&#x27;data = (%.1f, %.1f)&#x27;</span>%(xdata, ydata),</span><br><span class="line">            (xdata, ydata), xytext=(-<span class="number">2</span>*offset, offset), textcoords=<span class="string">&#x27;offset points&#x27;</span>,</span><br><span class="line">            bbox=bbox, arrowprops=arrowprops)</span><br><span class="line"></span><br><span class="line"><span class="comment"># xycoords以绘图区左下角为参考，单位为像素</span></span><br><span class="line"><span class="comment"># 注释文本参考被注释点设置偏移量，向右0.5*72points，向下72points</span></span><br><span class="line">disp = ax.annotate(<span class="string">&#x27;display = (%.1f, %.1f)&#x27;</span>%(xdisplay, ydisplay),</span><br><span class="line">            (xdisplay, ydisplay), xytext=(<span class="number">0.5</span>*offset, -offset),</span><br><span class="line">            xycoords=<span class="string">&#x27;figure pixels&#x27;</span>,</span><br><span class="line">            textcoords=<span class="string">&#x27;offset points&#x27;</span>,</span><br><span class="line">            bbox=bbox, arrowprops=arrowprops)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/14/73iqbV.png' style='zoom:80%' />
</li>
<li>
<p>More Case two</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制一个极地坐标，再以0.001为步长，画一条螺旋曲线</span></span><br><span class="line">fig = plt.figure(figsize = (<span class="number">12</span>, <span class="number">8</span>))</span><br><span class="line">ax = fig.add_subplot(<span class="number">111</span>, polar=<span class="literal">True</span>)</span><br><span class="line">r = np.arange(<span class="number">0</span>,<span class="number">1</span>,<span class="number">0.001</span>)</span><br><span class="line">theta = <span class="number">2</span> * <span class="number">2</span>*np.pi * r</span><br><span class="line">line, = ax.plot(theta, r, color=<span class="string">&#x27;#ee8d18&#x27;</span>, lw=<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对索引为800处画一个圆点，并做注释</span></span><br><span class="line">ind = <span class="number">800</span></span><br><span class="line">thisr, thistheta = r[ind], theta[ind]</span><br><span class="line">ax.plot([thistheta], [thisr], <span class="string">&#x27;o&#x27;</span>)</span><br><span class="line">ax.annotate(<span class="string">&#x27;a polar annotation&#x27;</span>,</span><br><span class="line">            xy=(thistheta, thisr),  <span class="comment"># 被注释点遵循极坐标系，坐标为角度和半径</span></span><br><span class="line">            xytext=(<span class="number">0.05</span>, <span class="number">0.05</span>),    <span class="comment"># 注释文本放在绘图区的0.05百分比处</span></span><br><span class="line">            textcoords=<span class="string">&#x27;figure fraction&#x27;</span>,</span><br><span class="line">            arrowprops=<span class="built_in">dict</span>(facecolor=<span class="string">&#x27;black&#x27;</span>, shrink=<span class="number">0.05</span>),<span class="comment"># 箭头线为黑色，两端缩进5%</span></span><br><span class="line">            horizontalalignment=<span class="string">&#x27;left&#x27;</span>,<span class="comment"># 注释文本的左端和低端对齐到指定位置</span></span><br><span class="line">            verticalalignment=<span class="string">&#x27;bottom&#x27;</span>,</span><br><span class="line">            )</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>Results:</p>
<img src='https://s4.ax1x.com/2022/01/14/73ibD0.png' style='zoom:80%' />
<h3 id="516-字体的属性设置"><a class="markdownIt-Anchor" href="#516-字体的属性设置"></a> 5.1.6 字体的属性设置</h3>
<p>字体设置一般有全局字体设置和自定义局部字体设置两种方法。为方便在图中加入合适的字体，可以尝试了解中文字体的英文名称,该链接告诉了常用中文的英文名称：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/chendc/p/9298832.html">Here</a>。</p>
<ul>
<li>
<p>全局修改</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#该block讲述如何在matplotlib里面，修改字体默认属性，完成全局字体的更改。</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimSun&#x27;</span>]    <span class="comment"># 指定默认字体为新宋体。</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span>      <span class="comment"># 解决保存图像时 负号&#x27;-&#x27; 显示为方块和报错的问题。</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>局部修改</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#局部字体的修改方法1</span></span><br><span class="line">x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line">plt.plot(x, label=<span class="string">&#x27;小示例图标签&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 直接用字体的名字</span></span><br><span class="line">plt.xlabel(<span class="string">&#x27;x 轴名称参数&#x27;</span>, fontproperties=<span class="string">&#x27;Microsoft YaHei&#x27;</span>, fontsize=<span class="number">16</span>)         <span class="comment"># 设置x轴名称，采用微软雅黑字体</span></span><br><span class="line">plt.ylabel(<span class="string">&#x27;y 轴名称参数&#x27;</span>, fontproperties=<span class="string">&#x27;Microsoft YaHei&#x27;</span>, fontsize=<span class="number">14</span>)         <span class="comment"># 设置Y轴名称</span></span><br><span class="line">plt.title(<span class="string">&#x27;坐标系的标题&#x27;</span>,  fontproperties=<span class="string">&#x27;Microsoft YaHei&#x27;</span>, fontsize=<span class="number">20</span>)         <span class="comment"># 设置坐标系标题的字体</span></span><br><span class="line">plt.legend(loc=<span class="string">&#x27;lower right&#x27;</span>, prop=&#123;<span class="string">&quot;family&quot;</span>: <span class="string">&#x27;Microsoft YaHei&#x27;</span>&#125;, fontsize=<span class="number">10</span>) ;</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/14/715mcR.png' style='zoom:80%' />
</li>
</ul>
<h2 id="52-tick-上的文本"><a class="markdownIt-Anchor" href="#52-tick-上的文本"></a> 5.2 <code>Tick</code> 上的文本</h2>
<p>设置 <code>tick</code>（刻度）和 <code>ticklabel</code>（刻度标签）也是可视化中经常需要操作的步骤，<code>matplotlib</code> 既提供了自动生成刻度和刻度标签的模式（默认状态），同时也提供了许多灵活设置的方式。</p>
<h3 id="521-simple-mode"><a class="markdownIt-Anchor" href="#521-simple-mode"></a> 5.2.1 Simple mode</h3>
<p>可以使用 <code>axis</code> 的 <code>set_ticks</code> 方法手动设置标签位置，使用 <code>axis</code> 的 <code>set_ticklabels</code> 方法手动设置标签格式。例如：</p>
<ul>
<li>
<p><code>set_ticks</code> 手动设置标签位置</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">x1 = np.linspace(<span class="number">0.0</span>, <span class="number">5.0</span>, <span class="number">100</span>)</span><br><span class="line">y1 = np.cos(<span class="number">2</span> * np.pi * x1) * np.exp(-x1)</span><br><span class="line"></span><br><span class="line">fig, axs = plt.subplots(<span class="number">2</span>, <span class="number">1</span>, figsize=(<span class="number">5</span>, <span class="number">3</span>), tight_layout=<span class="literal">True</span>)</span><br><span class="line">axs[<span class="number">0</span>].plot(x1, y1)</span><br><span class="line">axs[<span class="number">1</span>].plot(x1, y1)</span><br><span class="line">axs[<span class="number">1</span>].xaxis.set_ticks(np.arange(<span class="number">0.</span>, <span class="number">10.1</span>, <span class="number">2.</span>));</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/14/715e39.png' style='zoom:80%' />
<p><strong>Note</strong>：使用 <code>axis的set_ticks</code> 方法手动设置标签位置的例子，该案例中由于 <code>tick</code> 设置过大，所以会影响绘图美观，不建议用此方式进行设置 <code>tick</code>。</p>
</li>
<li>
<p><code>set_ticklabels</code> 手动设置标签格式</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fig, axs = plt.subplots(<span class="number">2</span>, <span class="number">1</span>, figsize=(<span class="number">12</span>, <span class="number">6</span>), tight_layout=<span class="literal">True</span>)</span><br><span class="line">axs[<span class="number">0</span>].plot(x1, y1)</span><br><span class="line">axs[<span class="number">1</span>].plot(x1, y1)</span><br><span class="line">ticks = np.arange(<span class="number">0.</span>, <span class="number">8.1</span>, <span class="number">2.</span>)</span><br><span class="line">tickla = [<span class="string">f&#x27;<span class="subst">&#123;tick:<span class="number">1.2</span>f&#125;</span>&#x27;</span> <span class="keyword">for</span> tick <span class="keyword">in</span> ticks]</span><br><span class="line">axs[<span class="number">1</span>].xaxis.set_ticks(ticks)</span><br><span class="line">axs[<span class="number">1</span>].xaxis.set_ticklabels(tickla);</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/14/715Z9J.png' style='zoom:80%' />
</li>
<li>
<p>不更改刻度，直接修改刻度标签</p>
<p>一般绘图时会自动创建刻度，而如果通过上面的例子使用 <code>set_ticks</code> 创建刻度可能会导致 <code>tick</code> 的范围与所绘制图形的范围不一致的问题。所以在下面的案例中，<code>axs[1]</code>中 <code>set_xtick</code> 的设置要与数据范围所对应，然后再通过 <code>set_xticklabels</code> 设置刻度所对应的标签。</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">fig, axs = plt.subplots(<span class="number">2</span>, <span class="number">1</span>, figsize=(<span class="number">12</span>, <span class="number">6</span>), tight_layout=<span class="literal">True</span>)</span><br><span class="line">x1 = np.linspace(<span class="number">0.0</span>, <span class="number">6.0</span>, <span class="number">100</span>)</span><br><span class="line">y1 = np.cos(<span class="number">2</span> * np.pi * x1) * np.exp(-x1)</span><br><span class="line">axs[<span class="number">0</span>].plot(x1, y1)</span><br><span class="line">axs[<span class="number">0</span>].set_xticks([<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>])</span><br><span class="line">axs[<span class="number">0</span>].set_xticklabels([<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>], fontsize = <span class="number">14</span>)</span><br><span class="line"></span><br><span class="line">axs[<span class="number">1</span>].plot(x1, y1)</span><br><span class="line">axs[<span class="number">1</span>].set_xticks([<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]) <span class="comment"># 要将 x 轴的刻度放在数据范围中的哪些位置</span></span><br><span class="line">axs[<span class="number">1</span>].set_xticklabels([<span class="string">&#x27;zero&#x27;</span>,<span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;two&#x27;</span>, <span class="string">&#x27;three&#x27;</span>, <span class="string">&#x27;four&#x27;</span>, <span class="string">&#x27;five&#x27;</span>,<span class="string">&#x27;six&#x27;</span>], <span class="comment"># 设置刻度对应的标签</span></span><br><span class="line">                   rotation=<span class="number">30</span>, fontsize=<span class="number">14</span>) <span class="comment"># rotation选项设定 x 刻度标签倾斜30度。</span></span><br><span class="line">axs[<span class="number">1</span>].xaxis.set_ticks_position(<span class="string">&#x27;bottom&#x27;</span>)<span class="comment"># set_ticks_position()方法是用来设置刻度所在的位置，常用的参数有bottom、top、both、none</span></span><br><span class="line">print(axs[<span class="number">1</span>].xaxis.get_ticklines());</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/14/715Eh4.png' style='zoom:80%' />
</li>
</ul>
<h3 id="522-tick-locators-and-formatters"><a class="markdownIt-Anchor" href="#522-tick-locators-and-formatters"></a> 5.2.2 Tick Locators and Formatters</h3>
<p>除了上述的简单模式，还可以使用<code>Tick Locators and Formatters</code>完成对于刻度位置和刻度标签的设置。<br />
其中 <a target="_blank" rel="noopener" href="https://matplotlib.org/api/_as_gen/matplotlib.axis.Axis.set_major_locator.html#matplotlib.axis.Axis.set_major_locator">Axis.set_major_locator</a> 和 <a target="_blank" rel="noopener" href="https://matplotlib.org/api/_as_gen/matplotlib.axis.Axis.set_minor_locator.html#matplotlib.axis.Axis.set_minor_locator">Axis.set_minor_locator</a> 方法用来设置标签的位置，<a target="_blank" rel="noopener" href="https://matplotlib.org/api/_as_gen/matplotlib.axis.Axis.set_major_formatter.html#matplotlib.axis.Axis.set_major_formatter">Axis.set_major_formatter</a> 和 <a target="_blank" rel="noopener" href="https://matplotlib.org/api/_as_gen/matplotlib.axis.Axis.set_minor_formatter.html#matplotlib.axis.Axis.set_minor_formatter">Axis.set_minor_formatter</a>方法用来设置标签的格式。这种方式的好处是不用显式地列举出刻度值列表。</p>
<p><code>set_major_formatter</code> 和 <code>set_minor_formatter</code> 这两个 <code>formatter</code> 格式命令可以接收字符串格式（<code>matplotlib.ticker.StrMethodFormatter</code>）或函数参数（<code>matplotlib.ticker.FuncFormatter</code>）来设置刻度值的格式 。</p>
<ol>
<li>
<p>Tick Formatters</p>
<ul>
<li>
<p><code>FormatStrFormatter</code> 接收字符串</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 接收字符串格式的例子</span></span><br><span class="line">fig, axs = plt.subplots(<span class="number">2</span>, <span class="number">2</span>, figsize=(<span class="number">8</span>, <span class="number">5</span>), tight_layout=<span class="literal">True</span>)</span><br><span class="line"><span class="keyword">for</span> n, ax <span class="keyword">in</span> <span class="built_in">enumerate</span>(axs.flat):</span><br><span class="line">    ax.plot(x1*<span class="number">10.</span>, y1)</span><br><span class="line"></span><br><span class="line">formatter = matplotlib.ticker.FormatStrFormatter(<span class="string">&#x27;%1.1f&#x27;</span>)</span><br><span class="line">axs[<span class="number">0</span>, <span class="number">1</span>].xaxis.set_major_formatter(formatter)</span><br><span class="line"></span><br><span class="line">formatter = matplotlib.ticker.FormatStrFormatter(<span class="string">&#x27;-%1.1f&#x27;</span>)</span><br><span class="line">axs[<span class="number">1</span>, <span class="number">0</span>].xaxis.set_major_formatter(formatter)</span><br><span class="line"></span><br><span class="line">formatter = matplotlib.ticker.FormatStrFormatter(<span class="string">&#x27;%1.5f&#x27;</span>)</span><br><span class="line">axs[<span class="number">1</span>, <span class="number">1</span>].xaxis.set_major_formatter(formatter);</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/14/715ANF.png' style='zoom:80%' />
</li>
<li>
<p><code>FuncFormatter</code> 接收函数参数</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">formatoddticks</span>(<span class="params">x, pos</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;Format odd tick positions.&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> x % <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&#x27;<span class="subst">&#123;x:<span class="number">1.2</span>f&#125;</span>&#x27;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">fig, ax = plt.subplots(figsize=(<span class="number">5</span>, <span class="number">3</span>), tight_layout=<span class="literal">True</span>)</span><br><span class="line">ax.plot(x1, y1)</span><br><span class="line">ax.xaxis.set_major_formatter(formatoddticks);</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/14/715kAU.png' style='zoom:80%' />
</li>
</ul>
</li>
<li>
<p>Tick Locators</p>
<p>在普通的绘图中，我们可以直接通过上图的 <code>set_ticks</code> 进行设置刻度的位置，缺点是需要自己指定或者接受 <code>matplotlib</code> 默认给定的刻度。当需要更改刻度的位置时，<code>matplotlib</code> 给了常用的几种 <code>locator</code> 的类型。如果要绘制更复杂的图，可以先设置 <code>locator</code> 的类型，然后通过 <code>axs.xaxis.set_major_locator(locator)</code> 绘制即可。</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">locator=plt.MaxNLocator(nbins=<span class="number">7</span>)  </span><br><span class="line">locator=plt.FixedLocator(locs=[<span class="number">0</span>,<span class="number">0.5</span>,<span class="number">1.5</span>,<span class="number">2.5</span>,<span class="number">3.5</span>,<span class="number">4.5</span>,<span class="number">5.5</span>,<span class="number">6</span>])<span class="comment">#直接指定刻度所在的位置  </span></span><br><span class="line">locator=plt.AutoLocator()<span class="comment">#自动分配刻度值的位置  </span></span><br><span class="line">locator=plt.IndexLocator(offset=<span class="number">0.5</span>, base=<span class="number">1</span>)<span class="comment">#面元间距是1，从0.5开始  </span></span><br><span class="line">locator=plt.MultipleLocator(<span class="number">1.5</span>)<span class="comment">#将刻度的标签设置为1.5的倍数  </span></span><br><span class="line">locator=plt.LinearLocator(numticks=<span class="number">5</span>)<span class="comment">#线性划分5等分，4个刻度  </span></span><br></pre></td></tr></table></figure>
<p><strong>Case</strong>:</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">fig, axs = plt.subplots(<span class="number">2</span>, <span class="number">2</span>, figsize=(<span class="number">8</span>, <span class="number">5</span>), tight_layout=<span class="literal">True</span>)</span><br><span class="line"><span class="keyword">for</span> n, ax <span class="keyword">in</span> <span class="built_in">enumerate</span>(axs.flat):</span><br><span class="line">    ax.plot(x1*<span class="number">10.</span>, y1)</span><br><span class="line"></span><br><span class="line">locator = matplotlib.ticker.AutoLocator()</span><br><span class="line">axs[<span class="number">0</span>, <span class="number">0</span>].xaxis.set_major_locator(locator)</span><br><span class="line"></span><br><span class="line">locator = matplotlib.ticker.MaxNLocator(nbins=<span class="number">10</span>)</span><br><span class="line">axs[<span class="number">0</span>, <span class="number">1</span>].xaxis.set_major_locator(locator)</span><br><span class="line"></span><br><span class="line">locator = matplotlib.ticker.MultipleLocator(<span class="number">5</span>)</span><br><span class="line">axs[<span class="number">1</span>, <span class="number">0</span>].xaxis.set_major_locator(locator)</span><br><span class="line"></span><br><span class="line">locator = matplotlib.ticker.FixedLocator([<span class="number">0</span>,<span class="number">7</span>,<span class="number">14</span>,<span class="number">21</span>,<span class="number">28</span>])</span><br><span class="line">axs[<span class="number">1</span>, <span class="number">1</span>].xaxis.set_major_locator(locator);</span><br></pre></td></tr></table></figure>
<p>Results:</p>
 <img src='https://s4.ax1x.com/2022/01/14/715i7T.png' style='zoom:80%' />
</li>
</ol>
<p>此外<code>matplotlib.dates</code> 模块还提供了特殊的设置日期型刻度格式和位置的方式：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 特殊的日期型locator和formatter</span></span><br><span class="line">locator = mdates.DayLocator(bymonthday=[<span class="number">1</span>,<span class="number">15</span>,<span class="number">25</span>])</span><br><span class="line">formatter = mdates.DateFormatter(<span class="string">&#x27;%b %d&#x27;</span>)</span><br><span class="line"></span><br><span class="line">fig, ax = plt.subplots(figsize=(<span class="number">12</span>, <span class="number">6</span>), tight_layout=<span class="literal">True</span>)</span><br><span class="line">ax.xaxis.set_major_locator(locator)</span><br><span class="line">ax.xaxis.set_major_formatter(formatter)</span><br><span class="line">base = datetime.datetime(<span class="number">2017</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">time = [base + datetime.timedelta(days=x) <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(x1))]</span><br><span class="line">ax.plot(time, y1)</span><br><span class="line">ax.tick_params(axis=<span class="string">&#x27;x&#x27;</span>, rotation=<span class="number">70</span>);</span><br></pre></td></tr></table></figure>
<p>Results:</p>
<img src='https://s4.ax1x.com/2022/01/14/715PBV.png' style='zoom:80%' />
<h3 id="523-设置图形标题和坐标轴标签字体大小"><a class="markdownIt-Anchor" href="#523-设置图形标题和坐标轴标签字体大小"></a> 5.2.3 设置图形标题和坐标轴标签字体大小</h3>
<p><code>Matplotlib</code> 中标题和轴的大小和字体可以通过使用 <code>set_size()</code> 方法调整 <code>fontsize</code> 参数并更改 <code>rcParams</code> 字典的值来设置。本小节的内容参考博客 <a target="_blank" rel="noopener" href="https://www.delftstack.com/zh/howto/matplotlib/how-to-set-the-figure-title-and-axes-labels-font-size-in-matplotlib/#%E8%B0%83%E6%95%B4-fontsize-%E5%8F%82%E6%95%B0%E4%BB%A5%E5%9C%A8-matplotlib-%E4%B8%AD%E8%AE%BE%E7%BD%AE%E6%A0%87%E9%A2%98%E5%92%8C%E8%BD%B4%E7%9A%84%E5%AD%97%E4%BD%93%E5%A4%A7%E5%B0%8F">DelftStack</a></p>
<ul>
<li>
<p>调整 <code>fontsize</code> 参数以在 <code>Matplotlib</code> 中设置标题和轴的字体大小</p>
<p>我们可以在标签和标题方法中调整字体大小参数的适当值，以在 <code>Matplotlib</code> 中设置标签的字体大小和图表标题。</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">x=np.linspace(<span class="number">0</span>,<span class="number">5</span>,<span class="number">100</span>)</span><br><span class="line">y= np.sin(<span class="number">2</span> * np.pi * x)</span><br><span class="line"></span><br><span class="line">fig = plt.figure(figsize=(<span class="number">8</span>, <span class="number">6</span>))</span><br><span class="line">plt.plot(x,y,)</span><br><span class="line">plt.title(<span class="string">&#x27;Plot of sinx&#x27;</span>, fontsize=<span class="number">25</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;x&#x27;</span>, fontsize=<span class="number">20</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;sinx&#x27;</span>, fontsize=<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/14/73FpvR.png' style='zoom:80%' />
</li>
<li>
<p>修改 <code>rcParams</code> 字典的默认值</p>
<p>可以更改存储在名为 <code>matplotlib.rcParams</code> 的全局字典式变量中的默认 <code>rc</code> 设置，以设置 <code>Matplotlib</code> 中标签的字体大小和图表标题。</p>
<p><strong><code>rcParams</code> 的结构</strong>：</p>
<p>可以通过 <code>plt.rcParams.keys()</code> 函数获取 <code>rcParams</code> 键的完整列表。</p>
  <center> Table plt parameters </center>
<table>
<thead>
<tr>
<th>Keys</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>axes.labelsize</td>
<td>x 和 y 标签的字体大小</td>
</tr>
<tr>
<td>axes.titlesize</td>
<td>轴标题的字体大小</td>
</tr>
<tr>
<td>figure.titlesize</td>
<td>图形标题的大小（figure.suptitle()）</td>
</tr>
<tr>
<td>xtick.labelsize</td>
<td>刻度标签的字体大小</td>
</tr>
<tr>
<td>ytick.labelsize</td>
<td>刻度标签的字体大小</td>
</tr>
<tr>
<td>legend.fontsize</td>
<td>图例的字体大小（plt.legend()，fig.legend()）</td>
</tr>
<tr>
<td>legend.title_fontsize</td>
<td>图例标题的字体大小，无设置为默认轴。</td>
</tr>
</tbody>
</table>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">x=np.linspace(<span class="number">0</span>,<span class="number">5</span>,<span class="number">100</span>)</span><br><span class="line">y= np.sin(<span class="number">2</span> * np.pi * x)</span><br><span class="line"></span><br><span class="line">parameters = &#123;<span class="string">&#x27;axes.labelsize&#x27;</span>: <span class="number">25</span>,</span><br><span class="line">          <span class="string">&#x27;axes.titlesize&#x27;</span>: <span class="number">35</span>&#125;</span><br><span class="line">plt.rcParams.update(parameters)</span><br><span class="line"></span><br><span class="line">fig = plt.figure(figsize=(<span class="number">8</span>, <span class="number">6</span>))</span><br><span class="line">plt.plot(x, y)</span><br><span class="line">plt.title(<span class="string">&#x27;Plot of sinx&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;sinx&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/14/73ixC4.png' style='zoom:80%' />
</li>
<li>
<p><code>set_size()</code> 方法在 <code>Matplotlib</code> 种设置标题和轴的字体大小</p>
<p>首先，我们使用 <code>get()</code> 方法返回绘图的轴。然后，使用 <code>axes.title.set_size(title_size)</code>，<code>axes.xaxis.label.set_size(x_size)</code> 和 <code>axes.yaxis.label.set_size(y_size)</code> 来更改标题、<code>x</code> 轴标签和 <code>y</code> 轴标签的字体大小。</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">x=np.linspace(<span class="number">0</span>,<span class="number">5</span>,<span class="number">100</span>)</span><br><span class="line">y= np.sin(<span class="number">2</span> * np.pi * x)</span><br><span class="line"></span><br><span class="line">axes = plt.gca()</span><br><span class="line">plt.plot(x, y)</span><br><span class="line">axes.set_title(<span class="string">&#x27;Plot of sinx&#x27;</span>)</span><br><span class="line">axes.set_xlabel(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">axes.set_ylabel(<span class="string">&#x27;sinx&#x27;</span>)</span><br><span class="line"></span><br><span class="line">axes.title.set_size(<span class="number">20</span>)</span><br><span class="line">axes.xaxis.label.set_size(<span class="number">16</span>)</span><br><span class="line">axes.yaxis.label.set_size(<span class="number">16</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/14/73ixC4.png' style='zoom:80%' />
</li>
</ul>
<h2 id="53-legend"><a class="markdownIt-Anchor" href="#53-legend"></a> 5.3 Legend</h2>
<h3 id="531-术语与概念"><a class="markdownIt-Anchor" href="#531-术语与概念"></a> 5.3.1 术语与概念</h3>
<p>在具体学习图例之前，首先解释几个术语：</p>
<ul>
<li>
<p>legend entry（图例条目）</p>
<p>每个图例由一个或多个 <code>legend entries</code> 组成。一个 <code>entry</code> 包含一个 <code>key</code> 和其对应的 <code>label</code>。</p>
</li>
<li>
<p>legend key（图例键）</p>
<p>每个 <code>legend label</code> 左面的 <code>colored/patterned marker</code>（彩色/图案标记）</p>
</li>
<li>
<p>legend label（图例标签）</p>
<p>描述由 <code>key</code> 来表示的 <code>handle</code> 的文本</p>
</li>
<li>
<p>legend handle（图例句柄）</p>
<p>用于在图例中生成适当图例条目的原始对象</p>
</li>
</ul>
<p>以下面这个图为例，右侧的方框中的共有两个 <code>legend entry</code>；两个 <code>legend key</code>，分别是一个蓝色和一个黄色的 <code>legend key</code>；两个 <code>legend label</code>，一个名为 <code>Line up</code> 和一个名为 <code>Line Down</code> 的 <code>legend label</code>。</p>
<img src='https://s4.ax1x.com/2022/01/14/715Cn0.md.png' style='zoom:80%' />
<p>图例的绘制同样有 <code>OO</code> 模式和 <code>pyplot</code> 模式两种方式，写法都是一样的，使用 <code>legend()</code> 即可调用。</p>
<p>以下面的代码为例，在使用 <code>legend</code> 方法时，我们可以手动传入两个变量，句柄和标签，用以指定条目中的特定绘图对象和显示的标签值。当然通常更简单的操作是不传入任何参数，此时 <code>matplotlib</code> 会自动寻找合适的图例条目。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fig, ax = plt.subplots()</span><br><span class="line">line_up, = ax.plot([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], label=<span class="string">&#x27;Line 2&#x27;</span>)</span><br><span class="line">line_down, = ax.plot([<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>], label=<span class="string">&#x27;Line 1&#x27;</span>)</span><br><span class="line">ax.legend(handles = [line_up, line_down], labels = [<span class="string">&#x27;Line Up&#x27;</span>, <span class="string">&#x27;Line Down&#x27;</span>]);</span><br></pre></td></tr></table></figure>
<p>Results:</p>
<img src='https://s4.ax1x.com/2022/01/14/715Cn0.md.png' style='zoom:80%' />
<h3 id="532-legend-的参数"><a class="markdownIt-Anchor" href="#532-legend-的参数"></a> 5.3.2 legend 的参数</h3>
<p>参数：此方法接受以下描述的参数:</p>
<table>
<thead>
<tr>
<th>keyword</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>prop</td>
<td>the font property字体参数</td>
</tr>
<tr>
<td>fontsize</td>
<td>the font size (used only if prop is not specified)</td>
</tr>
<tr>
<td>markerscale</td>
<td>the relative size of legend markers vs. original图例标记与原始标记的相对大小</td>
</tr>
<tr>
<td>markerfirst</td>
<td>If True (default), marker is to left of the label.如果为True，则图例标记位于图例标签的左侧</td>
</tr>
<tr>
<td>numpoints</td>
<td>the number of points in the legend for line为线条图图例条目创建的标记点数</td>
</tr>
<tr>
<td>scatterpoints</td>
<td>the number of points in the legend for scatter plot为散点图图例条目创建的标记点数</td>
</tr>
<tr>
<td>scatteryoffsets</td>
<td>a list of yoffsets for scatter symbols in legend为散点图图例条目创建的标记的垂直偏移量</td>
</tr>
<tr>
<td>frameon</td>
<td>If True, draw the legend on a patch (frame).控制是否应在图例周围绘制框架</td>
</tr>
<tr>
<td>fancybox</td>
<td>If True, draw the frame with a round fancybox.控制是否应在构成图例背景的FancyBboxPatch周围启用圆边</td>
</tr>
<tr>
<td>shadow</td>
<td>If True, draw a shadow behind legend.控制是否在图例后面画一个阴</td>
</tr>
<tr>
<td>framealpha</td>
<td>Transparency of the frame.控制图例框架的 Alpha 透明度</td>
</tr>
<tr>
<td>edgecolor</td>
<td>Frame edgecolor.</td>
</tr>
<tr>
<td>facecolor</td>
<td>Frame facecolor.</td>
</tr>
<tr>
<td>ncol</td>
<td>number of columns 设置图例分为n列展示</td>
</tr>
<tr>
<td>borderpad</td>
<td>the fractional whitespace inside the legend border图例边框的内边距</td>
</tr>
<tr>
<td>labelspacing</td>
<td>the vertical space between the legend entries图例条目之间的垂直间距</td>
</tr>
<tr>
<td>handlelength</td>
<td>the length of the legend handles 图例句柄的长度</td>
</tr>
<tr>
<td>handleheight</td>
<td>the height of the legend handles 图例句柄的高度</td>
</tr>
<tr>
<td>handletextpad</td>
<td>the pad between the legend handle and text 图例句柄和文本之间的间距</td>
</tr>
<tr>
<td>borderaxespad</td>
<td>the pad between the axes and legend border轴与图例边框之间的距离</td>
</tr>
<tr>
<td>columnspacing</td>
<td>the spacing between columns 列间距</td>
</tr>
<tr>
<td>title</td>
<td>the legend title</td>
</tr>
<tr>
<td>bbox_to_anchor</td>
<td>the bbox that the legend will be anchored.指定图例在轴的位置</td>
</tr>
<tr>
<td>bbox_transform</td>
<td>the transform for the bbox. transAxes if None.</td>
</tr>
</tbody>
</table>
<p><strong>常用参数</strong>:</p>
<ul>
<li>
<p><code>loc</code> 设置图例位置</p>
<p><code>loc</code> 参数接收一个字符串或数字表示图例出现的位置。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ax.legend(loc=<span class="string">&#x27;upper center&#x27;</span>)</span><br><span class="line"><span class="comment"># Equals to</span></span><br><span class="line">ax.legend(loc=<span class="number">9</span>)</span><br></pre></td></tr></table></figure>
<center> Table 3 Loc options </center>
<table>
<thead>
<tr>
<th>Location String</th>
<th>Location Code</th>
</tr>
</thead>
<tbody>
<tr>
<td>‘best’</td>
<td>0</td>
</tr>
<tr>
<td>‘upper right’</td>
<td>1</td>
</tr>
<tr>
<td>‘upper left’</td>
<td>2</td>
</tr>
<tr>
<td>‘lower left’</td>
<td>3</td>
</tr>
<tr>
<td>‘lower right’</td>
<td>4</td>
</tr>
<tr>
<td>‘right’</td>
<td>5</td>
</tr>
<tr>
<td>‘center left’</td>
<td>6</td>
</tr>
<tr>
<td>‘center right’</td>
<td>7</td>
</tr>
<tr>
<td>‘lower center’</td>
<td>8</td>
</tr>
<tr>
<td>‘upper center’</td>
<td>9</td>
</tr>
<tr>
<td>‘center’</td>
<td>10</td>
</tr>
</tbody>
</table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fig,axes = plt.subplots(<span class="number">1</span>,<span class="number">4</span>,figsize=(<span class="number">10</span>,<span class="number">4</span>))</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>):</span><br><span class="line">    axes[i].plot([<span class="number">0.5</span>],[<span class="number">0.5</span>])</span><br><span class="line">    axes[i].legend(labels=<span class="string">&#x27;a&#x27;</span>,loc=i)  <span class="comment"># 观察loc参数传入不同值时图例的位置</span></span><br><span class="line">fig.tight_layout()</span><br></pre></td></tr></table></figure>
<p>Results:</p>
<img src='https://s4.ax1x.com/2022/01/14/715pXq.png' style='zoom:80%' />
</li>
<li>
<p>设置图例边框及背景</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fig = plt.figure(figsize=(<span class="number">10</span>,<span class="number">3</span>))</span><br><span class="line">axes = fig.subplots(<span class="number">1</span>,<span class="number">3</span>)</span><br><span class="line"><span class="keyword">for</span> i, ax <span class="keyword">in</span> <span class="built_in">enumerate</span>(axes):</span><br><span class="line">    ax.plot([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],label=<span class="string">f&#x27;ax <span class="subst">&#123;i&#125;</span>&#x27;</span>)</span><br><span class="line">axes[<span class="number">0</span>].legend(frameon=<span class="literal">False</span>) <span class="comment">#去掉图例边框</span></span><br><span class="line">axes[<span class="number">1</span>].legend(edgecolor=<span class="string">&#x27;blue&#x27;</span>) <span class="comment">#设置图例边框颜色</span></span><br><span class="line">axes[<span class="number">2</span>].legend(facecolor=<span class="string">&#x27;gray&#x27;</span>); <span class="comment">#设置图例背景颜色,若无边框,参数无效</span></span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/14/715Scn.png' style='zoom:80%' />
</li>
<li>
<p>设置图例标题</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fig,ax =plt.subplots()</span><br><span class="line">ax.plot([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],label=<span class="string">&#x27;label&#x27;</span>)</span><br><span class="line">ax.legend(title=<span class="string">&#x27;legend title&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/14/73Fib6.png' style='zoom:80%' />
</li>
</ul>
<h2 id="54-thinking"><a class="markdownIt-Anchor" href="#54-thinking"></a> 5.4 Thinking</h2>
<p>请尝试使用两种方式模仿画出下面的图表(重点是柱状图上的标签)，本文学习的text方法和matplotlib自带的柱状图标签方法bar_label</p>
  <img src='https://s4.ax1x.com/2022/01/14/73FPDx.png' style='zoom:80%' />
<ul>
<li>
<p>常规的竖向图</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">names = [<span class="string">&#x27;Tom&#x27;</span>, <span class="string">&#x27;Dick&#x27;</span>, <span class="string">&#x27;Harry&#x27;</span>, <span class="string">&#x27;Slim&#x27;</span>, <span class="string">&#x27;Jim&#x27;</span>]</span><br><span class="line">idx = np.arange(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">values = <span class="number">8</span> + <span class="number">8</span>*np.random.rand(<span class="number">1</span>,<span class="number">5</span>)</span><br><span class="line">bias = np.random.rand(<span class="number">1</span>, <span class="number">5</span>).<span class="built_in">round</span>(<span class="number">2</span>)[<span class="number">0</span>]</span><br><span class="line">values = values.<span class="built_in">round</span>(<span class="number">1</span>)[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">fig = plt.figure(figsize = (<span class="number">12</span>, <span class="number">8</span>))</span><br><span class="line">ax = fig.add_subplot(<span class="number">111</span>)</span><br><span class="line"></span><br><span class="line">plt.bar(names, values, orientation = <span class="string">&#x27;vertical&#x27;</span>, yerr = bias)</span><br><span class="line">ax.set_xticklabels(names, fontsize = <span class="number">14</span>)</span><br><span class="line"></span><br><span class="line">ax.xaxis.label.set_size(<span class="number">16</span>)</span><br><span class="line">ax.yaxis.label.set_size(<span class="number">16</span>) <span class="comment"># 设置坐标轴文字大小</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">    ax.text(names[i], values[i] + bias[i] + <span class="number">0.2</span>, <span class="string">&#x27;±&#x27;</span> + <span class="built_in">str</span>(bias[i]), fontsize = <span class="number">13</span>, horizontalalignment = <span class="string">&#x27;center&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/14/73FCK1.png' style='zoom:80%' />
</li>
<li>
<p>横向</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">names = [<span class="string">&#x27;Tom&#x27;</span>, <span class="string">&#x27;Dick&#x27;</span>, <span class="string">&#x27;Harry&#x27;</span>, <span class="string">&#x27;Slim&#x27;</span>, <span class="string">&#x27;Jim&#x27;</span>]</span><br><span class="line">idx = np.arange(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">values = <span class="number">8</span> + <span class="number">8</span>*np.random.rand(<span class="number">1</span>,<span class="number">5</span>)</span><br><span class="line">bias = np.random.rand(<span class="number">1</span>, <span class="number">5</span>).<span class="built_in">round</span>(<span class="number">2</span>)[<span class="number">0</span>]</span><br><span class="line">values = values.<span class="built_in">round</span>(<span class="number">1</span>)[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">fig = plt.figure(figsize = (<span class="number">16</span>, <span class="number">8</span>))</span><br><span class="line">ax = fig.add_subplot(<span class="number">111</span>)</span><br><span class="line"></span><br><span class="line">plt.barh(names, values, xerr = bias)</span><br><span class="line"></span><br><span class="line">ax.xaxis.label.set_size(<span class="number">16</span>)</span><br><span class="line">ax.yaxis.label.set_size(<span class="number">16</span>)</span><br><span class="line">ax.xaxis.set_ticks(np.arange(<span class="number">0</span>, <span class="number">20</span>, <span class="number">2</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">    ax.text(values[i] + bias[i] + <span class="number">1</span>, names[i], <span class="string">&#x27;±&#x27;</span> + <span class="built_in">str</span>(bias[i]), fontsize = <span class="number">13</span>, horizontalalignment = <span class="string">&#x27;center&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/14/73FS29.png' style='zoom:80%' />
</li>
</ul>
<h1 id="6-样式色彩秀芳华"><a class="markdownIt-Anchor" href="#6-样式色彩秀芳华"></a> 6. 样式色彩秀芳华</h1>
<p>本章详细介绍 <code>matplotlib</code> 种样式和颜色的使用，绘图样式和颜色是丰富可视化图表的重要手段，因此熟练掌握本章可以让可视化图表变得更美观，突出重点和凸显艺术性。</p>
<p>关于绘图样式，常见的有 <code>3</code> 种方法：</p>
<ul>
<li>修改预定义样式；</li>
<li>自定义样式；</li>
<li><code>rcParams</code>；</li>
</ul>
<p>关于颜色使用，本章将介绍常见的5种表示单色颜色的基本方法，以及colormap多色显示的方法。</p>
<h2 id="61-matplotlib-的绘图样式style"><a class="markdownIt-Anchor" href="#61-matplotlib-的绘图样式style"></a> 6.1 <code>Matplotlib</code> 的绘图样式（<code>style</code>）</h2>
<p>在 <code>matplotlib</code> 中，要想设置绘制样式，最简单的方法是在绘制元素时单独设置样式。 但是有时候，当用户在做专题报告时，往往会希望保持整体风格的统一而不用对每张图一张张修改，因此 <code>matplotlib</code> 库还提供了四种批量修改全局样式的方式。</p>
<h3 id="611-matplotlib-预先定义样式"><a class="markdownIt-Anchor" href="#611-matplotlib-预先定义样式"></a> 6.1.1 <code>matplotlib</code> 预先定义样式</h3>
<p><code>matplotlib</code> 贴心地提供了许多内置的样式供用户操作，使用方式很简单，只需在 <code>python</code> 脚本的最开始输入想使用 <code>style</code> 的名称即可调用，尝试调用不同内置样式，比较区别。</p>
<ul>
<li>
<p>Default</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib <span class="keyword">as</span> mpl</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">plt.rcParams[<span class="string">&#x27;figure.figsize&#x27;</span>] = (<span class="number">12</span> ,<span class="number">8</span>)</span><br><span class="line"></span><br><span class="line">plt.style.use(<span class="string">&#x27;default&#x27;</span>)</span><br><span class="line">plt.plot([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/14/73iI3j.png' style='zoom:80%' />
</li>
<li>
<p>ggplot</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plt.style.use(<span class="string">&#x27;ggplot&#x27;</span>)</span><br><span class="line">plt.plot([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],[<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/14/73iTvn.png' style='zoom:80%' />
</li>
</ul>
<p><code>matplotlib</code> 共内置了以下 <code>26</code> 种丰富的样式可供选择。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(plt.style.available)</span><br></pre></td></tr></table></figure>
<p>Results:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[&#39;Solarize_Light2&#39;, &#39;_classic_test_patch&#39;, &#39;bmh&#39;, &#39;classic&#39;, &#39;dark_background&#39;, </span><br><span class="line">&#39;fast&#39;, &#39;fivethirtyeight&#39;, &#39;ggplot&#39;, &#39;grayscale&#39;, &#39;seaborn&#39;, &#39;seaborn-bright&#39;, </span><br><span class="line">&#39;seaborn-colorblind&#39;, &#39;seaborn-dark&#39;, &#39;seaborn-dark-palette&#39;, &#39;seaborn-darkgrid&#39;, </span><br><span class="line">&#39;seaborn-deep&#39;, &#39;seaborn-muted&#39;, &#39;seaborn-notebook&#39;, &#39;seaborn-paper&#39;,</span><br><span class="line">&#39;seaborn-pastel&#39;, &#39;seaborn-poster&#39;, &#39;seaborn-talk&#39;, &#39;seaborn-ticks&#39;,</span><br><span class="line">&#39;seaborn-white&#39;, &#39;seaborn-whitegrid&#39;, &#39;tableau-colorblind10&#39;]</span><br></pre></td></tr></table></figure>
<h3 id="612-用户自定义-stylesheet"><a class="markdownIt-Anchor" href="#612-用户自定义-stylesheet"></a> 6.1.2 用户自定义 <code>stylesheet</code></h3>
<p>在任意路径下创建一个后缀名为 <code>mplstyle</code> 的样式清单，编辑文件添加以下样式内容：</p>
<blockquote>
<p>axes.titlesize : 24</p>
<p>axes.labelsize : 20</p>
<p>lines.linewidth : 3</p>
<p>lines.markersize : 10</p>
<p>xtick.labelsize : 16</p>
<p>ytick.labelsize : 16</p>
</blockquote>
<p>引用上述定义的 <code>stylesheet</code> 后观察图表变化：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plt.style.use(<span class="string">&#x27;./my.mplstyle&#x27;</span>)</span><br><span class="line">plt.plot([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],[<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</span><br></pre></td></tr></table></figure>
<p>Results:</p>
<img src='https://s4.ax1x.com/2022/01/14/73ifUS.png' style='zoom:80%' />
<ul>
<li>
<p>混合样式输入</p>
<p>值得特别注意的是，<code>matplotlib</code> 支持混合样式的引用，只需在引用时输入一个样式列表，若是几个样式中涉及到同一个参数，右边的样式表会覆盖左边的值。</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plt.style.use([<span class="string">&#x27;dark_background&#x27;</span>, <span class="string">&#x27;./my.mplstyle&#x27;</span>])</span><br><span class="line">plt.plot([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],[<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/14/73ih4g.png' style='zoom:80%' />
</li>
</ul>
<h3 id="613-设置-rcparams"><a class="markdownIt-Anchor" href="#613-设置-rcparams"></a> 6.1.3 设置 <code>rcparams</code></h3>
<p>我们还可以通过修改默认 <code>rc</code> 设置的方式改变样式，所有 <code>rc</code> 设置都保存在一个叫做 <code>matplotlib.rcParams</code> 的变量中。修改过后再绘图，可以看到绘图样式发生了变化。</p>
<ul>
<li>
<p>Default</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plt.style.use(<span class="string">&#x27;default&#x27;</span>) <span class="comment"># 恢复到默认样式</span></span><br><span class="line">plt.plot([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],[<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/14/73iI3j.png' style='zoom:80%' />
</li>
<li>
<p>虚线形式</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mpl.rcParams[<span class="string">&#x27;lines.linewidth&#x27;</span>] = <span class="number">2</span></span><br><span class="line">mpl.rcParams[<span class="string">&#x27;lines.linestyle&#x27;</span>] = <span class="string">&#x27;--&#x27;</span></span><br><span class="line">plt.plot([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],[<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</span><br></pre></td></tr></table></figure>
<p>Results:</p>
  <img src='https://s4.ax1x.com/2022/01/14/73iogs.png' style='zoom:80%' />
</li>
<li>
<p>一次性修改多个样式</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mpl.rc(<span class="string">&#x27;lines&#x27;</span>, linewidth=<span class="number">4</span>, linestyle=<span class="string">&#x27;-.&#x27;</span>)</span><br><span class="line">plt.plot([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],[<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</span><br></pre></td></tr></table></figure>
<p>Results:</p>
<img src='https://s4.ax1x.com/2022/01/14/73i5CQ.png' style='zoom:80%' />
</li>
</ul>
<h2 id="62-matplotlib-color-setting"><a class="markdownIt-Anchor" href="#62-matplotlib-color-setting"></a> 6.2 <code>Matplotlib</code> color setting</h2>
<p>在可视化中，如何选择合适的颜色和搭配组合也是需要仔细考虑的，色彩选择要能够反映出可视化图像的主旨。从可视化编码的角度对颜色进行分析，可以将颜色分为 <strong>色相</strong>、<strong>亮度</strong> 和 <strong>饱和度</strong> 三个视觉通道。</p>
<ul>
<li>色相： 没有明显的顺序性、一般不用来表达数据量的高低，而是用来表达数据列的类别。</li>
<li>明度和饱和度： 在视觉上很容易区分出优先级的高低、被用作表达顺序或者表达数据量视觉通道。</li>
</ul>
<p>具体关于色彩理论部分的知识，可以参阅下列拓展材料进行学习。</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://vis.baidu.com/chartcolor/basis/">ECharts数据可视化实验室</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/88892542">学会这6个可视化配色基本技巧，还原数据本身的意义</a></li>
</ul>
<p>在matplotlib中，设置颜色有以下几种方式：</p>
<ul>
<li><code>RGB</code> or <code>RGBA</code></li>
<li><code>HEX RGB</code> or <code>RGBA</code></li>
<li>灰度色阶</li>
<li>单字符基本颜色</li>
<li>颜色名称</li>
<li>使用 <code>colormap</code> 设置一组颜色</li>
</ul>
<h3 id="621-rgb-or-rgba"><a class="markdownIt-Anchor" href="#621-rgb-or-rgba"></a> 6.2.1 <code>RGB</code> or <code>RGBA</code></h3>
<p><code>RGBA</code> 颜色用 <code>[0,1]</code> 之间的浮点数表示，四个分量按顺序分别为 <code>(red, green, blue, alpha)</code>，其中 <code>alpha</code> 透明度可省略。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">plt.style.use(<span class="string">&#x27;default&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.plot([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],color=(<span class="number">0.1</span>, <span class="number">0.2</span>, <span class="number">0.5</span>))</span><br><span class="line">plt.plot([<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],color=(<span class="number">0.1</span>, <span class="number">0.2</span>, <span class="number">0.5</span>, <span class="number">0.5</span>))</span><br></pre></td></tr></table></figure>
<p>Results:</p>
<img src='https://s4.ax1x.com/2022/01/14/73FKKI.png' style='zoom:80%' />
<h3 id="622-hex-rgb-or-rgba"><a class="markdownIt-Anchor" href="#622-hex-rgb-or-rgba"></a> 6.2.2 <code>HEX RGB</code> or <code>RGBA</code></h3>
<p><code>HEX RGBA</code> 用十六进制颜色码表示，同样最后两位表示透明度，可省略。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plt.plot([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],color=<span class="string">&#x27;#0f0f0f&#x27;</span>)</span><br><span class="line">plt.plot([<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],color=<span class="string">&#x27;#0f0f0f80&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>Results:</p>
<img src='https://s4.ax1x.com/2022/01/14/73FnxA.png' style='zoom:80%' />
<h3 id="623-灰度色阶"><a class="markdownIt-Anchor" href="#623-灰度色阶"></a> 6.2.3 灰度色阶</h3>
<p>当只有一个位于 <code>[0,1]</code> 的值时，表示灰度色阶。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.plot([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],color=<span class="string">&#x27;0.5&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>Results:</p>
<img src='https://s4.ax1x.com/2022/01/14/73Fm2d.png' style='zoom:80%' />
<h3 id="624-单字符基本颜色"><a class="markdownIt-Anchor" href="#624-单字符基本颜色"></a> 6.2.4 单字符基本颜色</h3>
<p><code>matplotlib</code> 有八个基本颜色，可以用单字符串来表示，分别是：</p>
<center> Table color properties </center>
<table>
<thead>
<tr>
<th style="text-align:center">Character</th>
<th style="text-align:center">Color</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>'b'</code></td>
<td style="text-align:center">blue</td>
</tr>
<tr>
<td style="text-align:center"><code>'g'</code></td>
<td style="text-align:center">green</td>
</tr>
<tr>
<td style="text-align:center"><code>'r'</code></td>
<td style="text-align:center">red</td>
</tr>
<tr>
<td style="text-align:center"><code>'c'</code></td>
<td style="text-align:center">cyan（蓝绿色）</td>
</tr>
<tr>
<td style="text-align:center"><code>'m'</code></td>
<td style="text-align:center">magenta（品红）</td>
</tr>
<tr>
<td style="text-align:center"><code>'y'</code></td>
<td style="text-align:center">yellow</td>
</tr>
<tr>
<td style="text-align:center"><code>'k'</code></td>
<td style="text-align:center">black</td>
</tr>
<tr>
<td style="text-align:center"><code>'w'</code></td>
<td style="text-align:center">white</td>
</tr>
</tbody>
</table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.plot([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],color=<span class="string">&#x27;m&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>Results:</p>
<img src='https://s4.ax1x.com/2022/01/14/73Fe8H.png' style='zoom:80%' />
<h3 id="625-颜色名称"><a class="markdownIt-Anchor" href="#625-颜色名称"></a> 6.2.5 颜色名称</h3>
<p><code>matplotlib</code> 提供了颜色对照表，可供查询颜色对应的名称。</p>
<img src='https://s4.ax1x.com/2022/01/14/73FAUO.png' style='zoom:80%' />
<img src='https://s4.ax1x.com/2022/01/14/73FE5D.png' style='zoom:80%' />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.plot([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], color = <span class="string">&#x27;tan&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>Results:</p>
<img src='https://s4.ax1x.com/2022/01/14/73FZPe.png' style='zoom:80%' />
<h3 id="626-使用-colormap-设置一组颜色"><a class="markdownIt-Anchor" href="#626-使用-colormap-设置一组颜色"></a> 6.2.6 使用 <code>colormap</code> 设置一组颜色</h3>
<p>有些图表支持使用 <code>colormap</code> 的方式配置一组颜色，从而在可视化中通过色彩的变化表达更多信息。在 <code>matplotlib</code> 中，<code>colormap</code> 共有五种类型:</p>
<ul>
<li>顺序（<code>Sequential</code>）。通常使用单一色调，逐渐改变亮度和颜色渐渐增加，用于表示有顺序的信息</li>
<li>发散（<code>Diverging</code>）。改变两种不同颜色的亮度和饱和度，这些颜色在中间以不饱和的颜色相遇；当绘制的信息具有关键中间值（例如地形）或数据偏离零时，应使用此值。</li>
<li>循环（<code>Cyclic</code>）。改变两种不同颜色的亮度，在中间和开始/结束时以不饱和的颜色相遇。用于在端点处环绕的值，例如相角，风向或一天中的时间。</li>
<li>定性（<code>Qualitative</code>）。常是杂色，用来表示没有排序或关系的信息。</li>
<li>杂色（<code>Miscellaneous</code>）。一些在特定场景使用的杂色组合，如彩虹，海洋，地形等。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = np.random.randn(<span class="number">50</span>)</span><br><span class="line">y = np.random.randn(<span class="number">50</span>)</span><br><span class="line">plt.scatter(x,y,c=x,cmap=<span class="string">&#x27;RdPu&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>Results:</p>
<img src='https://s4.ax1x.com/2022/01/14/73FkVK.png' style='zoom:80%' />
<p>在以下官网页面可以查询上述五种colormap的字符串表示和颜色图的对应关系，<a target="_blank" rel="noopener" href="https://matplotlib.org/stable/tutorials/colors/colormaps.html">Here</a></p>

    </div>

    
    
    

    <div>
      
        <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">
            -------------This blog is over!
            <i class="fa fa-eye"></i>
            Thanks for your reading-------------
        </div>
    
</div>
      
    </div>
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>Post author:  </strong>YangSu
  </li>
  <li class="post-copyright-link">
    <strong>Post link: </strong>
    <a href="http://yangsuoly.com/2022/01/11/Fantastic-Matplotlib/" title="Fantastic-Matplotlib">http://yangsuoly.com/2022/01/11/Fantastic-Matplotlib/</a>
  </li>
</ul>
</div>


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/Tags/Python/" rel="tag"><i class="fa fa-tag"></i> Python</a>
              <a href="/Tags/Data-analysis/" rel="tag"><i class="fa fa-tag"></i> Data analysis</a>
              <a href="/Tags/Matplotlib/" rel="tag"><i class="fa fa-tag"></i> Matplotlib</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/12/30/Recommentation-Construct/" rel="prev" title="Recommentation-Construct">
      <i class="fa fa-chevron-left"></i> Recommentation-Construct
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div id="music163player">
      <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=1317956275&auto=0&height=66"></iframe>
      </iframe>
    </div>
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-introduction"><span class="nav-number">1.</span> <span class="nav-text"> 1. Introduction</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-begin-with-a-simple-case"><span class="nav-number">2.</span> <span class="nav-text"> 2. Begin with a simple case</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#21-create-figure"><span class="nav-number">2.1.</span> <span class="nav-text"> 2.1 Create figure</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#22-interfaces"><span class="nav-number">2.2.</span> <span class="nav-text"> 2.2 Interfaces</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#221-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E7%BB%98%E5%9B%BE"><span class="nav-number">2.2.1.</span> <span class="nav-text"> 2.2.1 面向对象编程绘图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#222-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BB%98%E5%9B%BE"><span class="nav-number">2.2.2.</span> <span class="nav-text"> 2.2.2 函数式绘图</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#23-general-plot-template"><span class="nav-number">2.3.</span> <span class="nav-text"> 2.3 General plot template</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#24-thinking"><span class="nav-number">2.4.</span> <span class="nav-text"> 2.4 Thinking</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-%E8%89%BA%E6%9C%AF%E7%94%BB%E7%AC%94%E8%A7%81%E4%B9%BE%E5%9D%A4"><span class="nav-number">3.</span> <span class="nav-text"> 3. 艺术画笔见乾坤</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#31-matplotlib-%E5%8E%9F%E7%90%86"><span class="nav-number">3.1.</span> <span class="nav-text"> 3.1 Matplotlib 原理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#311-%E7%BB%98%E5%9B%BE%E6%AD%A5%E9%AA%A4"><span class="nav-number">3.1.1.</span> <span class="nav-text"> 3.1.1 绘图步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#312-artist-%E5%88%86%E7%B1%BB"><span class="nav-number">3.1.2.</span> <span class="nav-text"> 3.1.2 Artist 分类</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#32-primitives-%E5%9F%BA%E6%9C%AC%E5%85%83%E7%B4%A0"><span class="nav-number">3.2.</span> <span class="nav-text"> 3.2 Primitives 基本元素</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#321-2dlines"><span class="nav-number">3.2.1.</span> <span class="nav-text"> 3.2.1 2Dlines</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#322-patches"><span class="nav-number">3.2.2.</span> <span class="nav-text"> 3.2.2 patches</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#323-collection"><span class="nav-number">3.2.3.</span> <span class="nav-text"> 3.2.3 collection</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#324-images"><span class="nav-number">3.2.4.</span> <span class="nav-text"> 3.2.4 images</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#33-object-container-%E5%AF%B9%E8%B1%A1%E5%AE%B9%E5%99%A8"><span class="nav-number">3.3.</span> <span class="nav-text"> 3.3 Object container 对象容器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#331-figure-%E5%AE%B9%E5%99%A8"><span class="nav-number">3.3.1.</span> <span class="nav-text"> 3.3.1 Figure 容器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#332-axes-%E5%9D%90%E6%A0%87%E7%B3%BB%E5%AE%B9%E5%99%A8"><span class="nav-number">3.3.2.</span> <span class="nav-text"> 3.3.2 Axes 坐标系容器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#333-axis-%E5%9D%90%E6%A0%87%E8%BD%B4%E5%AE%B9%E5%99%A8"><span class="nav-number">3.3.3.</span> <span class="nav-text"> 3.3.3 Axis 坐标轴容器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#334-tick-%E5%AE%B9%E5%99%A8"><span class="nav-number">3.3.4.</span> <span class="nav-text"> 3.3.4 Tick 容器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#34-thinking"><span class="nav-number">3.4.</span> <span class="nav-text"> 3.4 Thinking</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#35-reference"><span class="nav-number">3.5.</span> <span class="nav-text"> 3.5 Reference</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-%E5%B8%83%E5%B1%80%E6%A0%BC%E5%BC%8F%E5%AE%9A%E6%96%B9%E5%9C%86"><span class="nav-number">4.</span> <span class="nav-text"> 4. 布局格式定方圆</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#41-subplot"><span class="nav-number">4.1.</span> <span class="nav-text"> 4.1 Subplot</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#411-%E4%BD%BF%E7%94%A8-pltsubplots-%E7%BB%98%E5%88%B6%E5%9D%87%E5%8C%80%E7%8A%B6%E6%80%81%E4%B8%8B%E7%9A%84%E5%AD%90%E5%9B%BE"><span class="nav-number">4.1.1.</span> <span class="nav-text"> 4.1.1 使用 plt.subplots 绘制均匀状态下的子图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#412-%E4%BD%BF%E7%94%A8-gridspec-%E7%BB%98%E5%88%B6%E9%9D%9E%E5%9D%87%E5%8C%80%E5%AD%90%E5%9B%BE"><span class="nav-number">4.1.2.</span> <span class="nav-text"> 4.1.2 使用 GridSpec 绘制非均匀子图</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#42-%E5%AD%90%E5%9B%BE%E4%B8%8A%E7%9A%84%E6%96%B9%E6%B3%95"><span class="nav-number">4.2.</span> <span class="nav-text"> 4.2 子图上的方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#43-thinking"><span class="nav-number">4.3.</span> <span class="nav-text"> 4.3 Thinking</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#431-%E5%88%A9%E7%94%A8%E6%95%B0%E6%8D%AE%E7%94%BB%E5%87%BA%E6%AF%8F%E4%B8%AA%E6%9C%88%E7%9A%84%E6%9C%88%E6%B8%A9%E5%BA%A6%E6%9B%B2%E7%BA%BF"><span class="nav-number">4.3.1.</span> <span class="nav-text"> 4.3.1 利用数据，画出每个月的月温度曲线</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#432-%E7%94%A8%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F%E7%94%BB%E5%87%BA%E6%95%B0%E6%8D%AE%E7%9A%84%E6%95%A3%E7%82%B9%E5%9B%BE%E5%92%8C%E8%BE%B9%E9%99%85%E5%88%86%E5%B8%83"><span class="nav-number">4.3.2.</span> <span class="nav-text"> 4.3.2. 用两种方式画出数据的散点图和边际分布</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-%E6%96%87%E5%AD%97%E5%9B%BE%E4%BE%8B%E5%B0%BD%E7%9C%89%E7%9B%AE"><span class="nav-number">5.</span> <span class="nav-text"> 5. 文字图例尽眉目</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#51-figure-%E5%92%8C-axes-%E4%B8%8A%E7%9A%84%E6%96%87%E6%9C%AC"><span class="nav-number">5.1.</span> <span class="nav-text"> 5.1 Figure 和 Axes 上的文本</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#511-%E6%96%87%E6%9C%AC-api-%E7%A4%BA%E4%BE%8B"><span class="nav-number">5.1.1.</span> <span class="nav-text"> 5.1.1 文本 API 示例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#512-text-%E5%AD%90%E5%9B%BE%E4%B8%8A%E7%9A%84%E6%96%87%E6%9C%AC"><span class="nav-number">5.1.2.</span> <span class="nav-text"> 5.1.2 text 子图上的文本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#513-xlabel-and-ylabel"><span class="nav-number">5.1.3.</span> <span class="nav-text"> 5.1.3 xlabel and ylabel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#514-title-and-suptitle"><span class="nav-number">5.1.4.</span> <span class="nav-text"> 5.1.4 title and suptitle</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#515-annotate-%E5%AD%90%E5%9B%BE%E7%9A%84%E6%B3%A8%E8%A7%A3"><span class="nav-number">5.1.5.</span> <span class="nav-text"> 5.1.5 annotate 子图的注解</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#516-%E5%AD%97%E4%BD%93%E7%9A%84%E5%B1%9E%E6%80%A7%E8%AE%BE%E7%BD%AE"><span class="nav-number">5.1.6.</span> <span class="nav-text"> 5.1.6 字体的属性设置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#52-tick-%E4%B8%8A%E7%9A%84%E6%96%87%E6%9C%AC"><span class="nav-number">5.2.</span> <span class="nav-text"> 5.2 Tick 上的文本</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#521-simple-mode"><span class="nav-number">5.2.1.</span> <span class="nav-text"> 5.2.1 Simple mode</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#522-tick-locators-and-formatters"><span class="nav-number">5.2.2.</span> <span class="nav-text"> 5.2.2 Tick Locators and Formatters</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#523-%E8%AE%BE%E7%BD%AE%E5%9B%BE%E5%BD%A2%E6%A0%87%E9%A2%98%E5%92%8C%E5%9D%90%E6%A0%87%E8%BD%B4%E6%A0%87%E7%AD%BE%E5%AD%97%E4%BD%93%E5%A4%A7%E5%B0%8F"><span class="nav-number">5.2.3.</span> <span class="nav-text"> 5.2.3 设置图形标题和坐标轴标签字体大小</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#53-legend"><span class="nav-number">5.3.</span> <span class="nav-text"> 5.3 Legend</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#531-%E6%9C%AF%E8%AF%AD%E4%B8%8E%E6%A6%82%E5%BF%B5"><span class="nav-number">5.3.1.</span> <span class="nav-text"> 5.3.1 术语与概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#532-legend-%E7%9A%84%E5%8F%82%E6%95%B0"><span class="nav-number">5.3.2.</span> <span class="nav-text"> 5.3.2 legend 的参数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#54-thinking"><span class="nav-number">5.4.</span> <span class="nav-text"> 5.4 Thinking</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#6-%E6%A0%B7%E5%BC%8F%E8%89%B2%E5%BD%A9%E7%A7%80%E8%8A%B3%E5%8D%8E"><span class="nav-number">6.</span> <span class="nav-text"> 6. 样式色彩秀芳华</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#61-matplotlib-%E7%9A%84%E7%BB%98%E5%9B%BE%E6%A0%B7%E5%BC%8Fstyle"><span class="nav-number">6.1.</span> <span class="nav-text"> 6.1 Matplotlib 的绘图样式（style）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#611-matplotlib-%E9%A2%84%E5%85%88%E5%AE%9A%E4%B9%89%E6%A0%B7%E5%BC%8F"><span class="nav-number">6.1.1.</span> <span class="nav-text"> 6.1.1 matplotlib 预先定义样式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#612-%E7%94%A8%E6%88%B7%E8%87%AA%E5%AE%9A%E4%B9%89-stylesheet"><span class="nav-number">6.1.2.</span> <span class="nav-text"> 6.1.2 用户自定义 stylesheet</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#613-%E8%AE%BE%E7%BD%AE-rcparams"><span class="nav-number">6.1.3.</span> <span class="nav-text"> 6.1.3 设置 rcparams</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#62-matplotlib-color-setting"><span class="nav-number">6.2.</span> <span class="nav-text"> 6.2 Matplotlib color setting</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#621-rgb-or-rgba"><span class="nav-number">6.2.1.</span> <span class="nav-text"> 6.2.1 RGB or RGBA</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#622-hex-rgb-or-rgba"><span class="nav-number">6.2.2.</span> <span class="nav-text"> 6.2.2 HEX RGB or RGBA</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#623-%E7%81%B0%E5%BA%A6%E8%89%B2%E9%98%B6"><span class="nav-number">6.2.3.</span> <span class="nav-text"> 6.2.3 灰度色阶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#624-%E5%8D%95%E5%AD%97%E7%AC%A6%E5%9F%BA%E6%9C%AC%E9%A2%9C%E8%89%B2"><span class="nav-number">6.2.4.</span> <span class="nav-text"> 6.2.4 单字符基本颜色</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#625-%E9%A2%9C%E8%89%B2%E5%90%8D%E7%A7%B0"><span class="nav-number">6.2.5.</span> <span class="nav-text"> 6.2.5 颜色名称</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#626-%E4%BD%BF%E7%94%A8-colormap-%E8%AE%BE%E7%BD%AE%E4%B8%80%E7%BB%84%E9%A2%9C%E8%89%B2"><span class="nav-number">6.2.6.</span> <span class="nav-text"> 6.2.6 使用 colormap 设置一组颜色</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="YangSu"
      src="/images/YangSu.jpg">
  <p class="site-author-name" itemprop="name">YangSu</p>
  <div class="site-description" itemprop="description">A blog for recording learning notes...</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">40</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/Categories/">
          
        <span class="site-state-item-count">28</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/Tags/">
          
        <span class="site-state-item-count">27</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/YangSuoly" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;YangSuoly" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://gitee.com/yangsuoly" title="Gitee → https:&#x2F;&#x2F;gitee.com&#x2F;yangsuoly" rel="noopener" target="_blank"><i class="fab fa-github-square fa-fw"></i>Gitee</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://space.bilibili.com/64518717" title="B 站 → https:&#x2F;&#x2F;space.bilibili.com&#x2F;64518717" rel="noopener" target="_blank"><i class="fa fa-play-circle fa-fw"></i>B 站</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Related links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://www.58pic.com/u/19637930/" title="https:&#x2F;&#x2F;www.58pic.com&#x2F;u&#x2F;19637930&#x2F;" rel="noopener" target="_blank">千图网</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" integrity="sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js" integrity="sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa" crossorigin="anonymous"
        onload="renderMathInElement(document.body);"></script>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">YangSu</span>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script size="300" alpha="0.6" zIndex="-1" src="/lib/canvas-ribbon/canvas-ribbon.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>









<script>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  let url = element.dataset.target;
  let pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  let pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  let fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>




  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  
  <script src="//cdn.jsdelivr.net/npm/quicklink@1/dist/quicklink.umd.js"></script>
  <script>
      window.addEventListener('load', () => {
      quicklink({
        timeout : 3000,
        priority: true,
        ignores : [uri => uri.includes('#'),uri => uri === 'http://yangsuoly.com/2022/01/11/Fantastic-Matplotlib/',]
      });
      });
  </script>

  
  <script id="ribbon" src="js/canvas-ribbon.js"></script>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/22.2017.cba-normal.model.json"},"display":{"position":"right","width":300,"height":450},"mobile":{"show":false},"react":{"opacity":0.7},"log":false});</script></body>
</html>
